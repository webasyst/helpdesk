var RedactorPlugins,RedactorPlugins;!function(o){(console="undefined"==typeof console?void 0!==window.console?window.console:{}:console).log=console.log||function(){},console.debug=console.debug||console.log,console.warn=console.warn||console.log,console.error=console.error||function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);alert(t.join("\n"))},console.trace=console.trace||console.log,console.group=console.group||console.log,console.groupEnd=console.groupEnd||console.log,console.profile=console.profile||console.log,console.profileEnd=console.profileEnd||console.log,o.History={options:{debug:!1},state:"",$window:null,$iframe:null,handlers:{generic:[],specific:{}},format:function(t){return t=t.replace(/^.+?#/g,"").replace(/^#?\/?|\/?$/g,"")},getState:function(){return o.History.state},setState:function(t){var e=o.History;return t=e.format(t),e.state=t,e.state},getHash:function(){var t,e=o.History;return t=parent&&!o.browser.msie?parent.window.location.hash:window.location.hash||location.hash,t=e.format(t)},setHash:function(t){o.History;t=(t=o.History.format(t)).replace(/^\/?|\/?(\?)|\/?$/g,"/$1"),void 0===window.location.hash&&(location.hash=t),o.browser.msie&&parseInt(o.browser.version,10)<8&&(o.History.$iframe.contentWindow.document.open(),o.History.$iframe.contentWindow.document.close())},go:function(t){var e=o.History;return t=e.format(t),e.getHash()!==t?e.setHash(t):(e.setState(t),e.trigger()),!0},hashchange:function(t){var e=o.History,i=(e.options.debug&&console.debug("History.hashchange",this,arguments),e.getHash()),s=e.getState();return!(!e.$iframe&&s===i||e.$iframe&&e.hash===e.$iframe.contentWindow.document.location.hash||s===i||(e.setState(i),e.trigger(),0))},bind:function(t,e){var i=o.History;return e?(void 0===i.handlers.specific[t]&&(i.handlers.specific[t]=[]),i.handlers.specific[t].push(e)):i.handlers.generic.push(e=t),!0},trigger:function(t){var e,i,s,n=o.History;if(void 0===t&&(t=n.getState()),void 0!==n.handlers.specific[t])for(e=0,i=(s=n.handlers.specific[t]).length;e<i;++e)(0,s[e])(t);for(e=0,i=(s=n.handlers.generic).length;e<i;++e)(0,s[e])(t);return!0},construct:function(){var t=o.History;return o(document).ready(function(){t.domReady()}),!0},configure:function(t){var e=o.History;return e.options=o.extend(e.options,t),!0},domReadied:!1,domReady:function(){var t=o.History;if(!t.domRedied)return t.domRedied=!0,t.$window=o(window),t.$window.bind("hashchange",this.hashchange),setTimeout(t.hashchangeLoader,200),!0},hashchangeLoader:function(){var t,e=o.History;return o.browser.msie&&8<=parseInt(o.browser.version)?(t=e.getHash())&&e.$window.trigger("hashchange"):(t=o.browser.msie?(e.$iframe=o('<iframe id="jquery-history-iframe" style="display: none;"></$iframe>').prependTo(document.body)[0],e.$iframe.contentWindow.document.open(),e.$iframe.contentWindow.document.close(),(t=e.getHash())&&(e.$iframe.contentWindow.document.location.hash=t),function(){var t=e.format(e.$iframe.contentWindow.document.location.hash),t=(e.getState()!==t&&e.setHash(e.$iframe.contentWindow.document.location.hash),e.getHash());e.getState()!==t&&e.go(t)}):function(){var t=e.getHash();e.getState()!==t&&e.go(t)},o.browser.msie&&parseInt(o.browser.version)<8?setInterval(t,1500):setInterval(t,200)),!0}},o.History.construct()}(jQuery),jQuery.JSON={useHasOwn:!!{}.hasOwnProperty,pad:function(t){return t<10?"0"+t:t},m:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString:function(t){return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,e){var i=jQuery.JSON.m[e];return i||(i=e.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})+'"':'"'+t+'"'},encodeArray:function(t){for(var e,i,s=["["],n=t.length,o=0;o<n;o+=1)switch(typeof(i=t[o])){case"undefined":case"function":case"unknown":break;default:e&&s.push(","),s.push(null===i?"null":this.encode(i)),e=!0}return s.push("]"),s.join("")},encodeDate:function(t){return'"'+t.getFullYear()+"-"+pad(t.getMonth()+1)+"-"+pad(t.getDate())+"T"+pad(t.getHours())+":"+pad(t.getMinutes())+":"+pad(t.getSeconds())+'"'},encode:function(t){if(null==t)return"null";if(t instanceof Array)return this.encodeArray(t);if(t instanceof Date)return this.encodeDate(t);if("string"==typeof t)return this.encodeString(t);if("number"==typeof t)return isFinite(t)?String(t):"null";if("boolean"==typeof t)return String(t);var e,i,s,n=["{"];for(i in t)if(!this.useHasOwn||t.hasOwnProperty(i))switch(typeof(s=t[i])){case"undefined":case"function":case"unknown":break;default:e&&n.push(","),n.push(this.encode(i),":",null===s?"null":this.encode(s)),e=!0}return n.push("}"),n.join("")},decode:function(json){return eval("("+json+")")}},!function(a){var g=a.scrollTo=function(t,e,i){a(window).scrollTo(t,e,i)};function t(t){return"object"==typeof t?t:{top:t,left:t}}g.defaults={axis:"xy",duration:1.3<=parseFloat(a.fn.jquery)?0:1,limit:!0},g.window=function(t){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var t,e=this;return e.nodeName&&-1==a.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])?e:(t=(e.contentWindow||e).document||e.ownerDocument||e,/webkit/i.test(navigator.userAgent)||"BackCompat"==t.compatMode?t.body:t.documentElement)})},a.fn.scrollTo=function(e,i,f){return"object"==typeof i&&(f=i,i=0),"function"==typeof f&&(f={onAfter:f}),"max"==e&&(e=9e9),f=a.extend({},g.defaults,f),i=i||f.duration,f.queue=f.queue&&1<f.axis.length,f.queue&&(i/=2),f.offset=t(f.offset),f.over=t(f.over),this._scrollable().each(function(){if(null!=e){var r,l=this,h=a(l),c=e,d={},u=h.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(c)){c=t(c);break}if(!(c=a(c,this)).length)return;case"object":(c.is||c.style)&&(r=(c=a(c)).offset())}a.each(f.axis.split(""),function(t,e){var i="x"==e?"Left":"Top",s=i.toLowerCase(),n="scroll"+i,o=l[n],a=g.max(l,e);r?(d[n]=r[s]+(u?0:o-h.offset()[s]),f.margin&&(d[n]-=parseInt(c.css("margin"+i))||0,d[n]-=parseInt(c.css("border"+i+"Width"))||0),d[n]+=f.offset[s]||0,f.over[s]&&(d[n]+=c["x"==e?"width":"height"]()*f.over[s])):(i=c[s],d[n]=i.slice&&"%"==i.slice(-1)?parseFloat(i)/100*a:i),f.limit&&/^\d+$/.test(d[n])&&(d[n]=d[n]<=0?0:Math.min(d[n],a)),!t&&f.queue&&(o!=d[n]&&p(f.onAfterFirst),delete d[n])}),p(f.onAfter)}function p(t){h.animate(d,i,f.easing,t&&function(){t.call(this,e,f)})}}).end()},g.max=function(t,e){var i,s,n,e="x"==e?"Width":"Height",o="scroll"+e;return a(t).is("html,body")?(i="client"+e,s=t.ownerDocument.documentElement,n=t.ownerDocument.body,Math.max(s[o],n[o])-Math.min(s[i],n[i])):t[o]-a(t)[e.toLowerCase()]()}}(jQuery),!function(s,i){s.store=function(t,e){var i=this;if("string"==typeof t){if(!s.store.drivers[t])throw new Error("Unknown driver "+t);this.driver=s.store.drivers[t]}else if("object"==typeof t){if(!(s.isFunction(t.init)&&s.isFunction(t.get)&&s.isFunction(t.set)&&s.isFunction(t.del)&&s.isFunction(t.flush)))throw new Error("The specified driver does not fulfill the API requirements");this.driver=t}else s.each(s.store.drivers,function(){return!s.isFunction(this.available)||!this.available()||(i.driver=this,!1===i.driver.init()&&!(i.driver=null))});e=e||s.store.serializers,this.serializers={},s.each(e,function(t,e){if(!s.isFunction(this.init))return!0;i.serializers[t]=this,i.serializers[t].init(i.encoders,i.decoders)})},s.extend(s.store.prototype,{get:function(t){t=this.driver.get(t);return this.driver.encodes?t:this.unserialize(t)},set:function(t,e){this.driver.set(t,this.driver.encodes?e:this.serialize(e))},del:function(t){this.driver.del(t)},flush:function(){this.driver.flush()},driver:i,encoders:[],decoders:[],serialize:function(e){var i=this;return s.each(this.encoders,function(){var t=i.serializers[this+""];if(!t||!t.encode)return!0;try{e=t.encode(e)}catch(t){}}),e},unserialize:function(e){var i=this;return e&&s.each(this.decoders,function(){var t=i.serializers[this+""];if(!t||!t.decode)return!0;e=t.decode(e)}),e}}),s.store.drivers={localStorage:{ident:"$.store.drivers.localStorage",scope:"browser",available:function(){try{return!!window.localStorage}catch(t){return!1}},init:s.noop,get:function(t){return window.localStorage.getItem(t)},set:function(t,e){window.localStorage.setItem(t,e)},del:function(t){window.localStorage.removeItem(t)},flush:function(){window.localStorage.clear()}},userData:{ident:"$.store.drivers.userData",element:null,nodeName:"userdatadriver",scope:"browser",initialized:!1,available:function(){try{return!(!document.documentElement||!document.documentElement.addBehavior)}catch(t){return!1}},init:function(){if(!this.initialized)try{this.element=document.createElement(this.nodeName),document.documentElement.insertBefore(this.element,document.getElementsByTagName("title")[0]),this.element.addBehavior("#default#userData"),this.initialized=!0}catch(t){return!1}},get:function(t){return this.element.load(this.nodeName),this.element.getAttribute(t)},set:function(t,e){this.element.setAttribute(t,e),this.element.save(this.nodeName)},del:function(t){this.element.removeAttribute(t),this.element.save(this.nodeName)},flush:function(){this.element.expires=(new Date).toUTCString(),this.element.save(this.nodeName)}},windowName:{ident:"$.store.drivers.windowName",scope:"window",cache:{},encodes:!0,available:function(){return!0},init:function(){this.load()},save:function(){window.name=s.store.serializers.json.encode(this.cache)},load:function(){try{this.cache=s.store.serializers.json.decode(window.name+""),"object"!=typeof this.cache&&(this.cache={})}catch(t){this.cache={},window.name="{}"}},get:function(t){return this.cache[t]},set:function(t,e){this.cache[t]=e,this.save()},del:function(e){try{delete this.cache[e]}catch(t){this.cache[e]=i}this.save()},flush:function(){window.name="{}"}}},s.store.serializers={json:{ident:"$.store.serializers.json",init:function(t,e){t.push("json"),e.push("json")},encode:("object"==typeof JSON?JSON:s.JSON).stringify,decode:("object"==typeof JSON?JSON:s.JSON).parse},xml:{ident:"$.store.serializers.xml",init:function(t,e){t.unshift("xml"),e.push("xml")},isXML:function(t){t=(t?t.ownerDocument||t:0).documentElement;return!!t&&"html"!==t.nodeName.toLowerCase()},encode:function(e){if(e&&!e._serialized&&this.isXML(e)){var i={_serialized:this.ident,value:e};try{return i.value=(new XMLSerializer).serializeToString(e),i}catch(t){try{return i.value=e.xml,i}catch(t){}}}return e},decode:function(t){var e;return t&&t._serialized&&t._serialized==this.ident?(e=!(e="DOMParser"in window&&(new DOMParser).parseFromString)&&window.ActiveXObject?function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}:e)&&(t.value=e.call("DOMParser"in window&&new DOMParser||window,t.value,"text/xml"),this.isXML(t.value))?t.value:i:t}}}}(jQuery),!function(d){d.fn.hoverIntent=function(t,e){function i(t){var e=jQuery.extend({},t),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t)),"mouseenter"==t.type?(o=e.pageX,a=e.pageY,d(i).bind("mousemove",l),1!=i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){h(e,i)},r.interval))):(d(i).unbind("mousemove",l),1==i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){c(e,i)},r.timeout)))}var s,n,o,a,r={sensitivity:7,interval:100,timeout:0},r=d.extend(r,e?{over:t,out:e}:t),l=function(t){s=t.pageX,n=t.pageY},h=function(t,e){if(e.hoverIntent_t=clearTimeout(e.hoverIntent_t),Math.abs(o-s)+Math.abs(a-n)<r.sensitivity)return d(e).unbind("mousemove",l),e.hoverIntent_s=1,r.over.apply(e,[t]);o=s,a=n,e.hoverIntent_t=setTimeout(function(){h(t,e)},r.interval)},c=function(t,e){return e.hoverIntent_t=clearTimeout(e.hoverIntent_t),e.hoverIntent_s=0,r.out.apply(e,[t])};return this.bind("mouseenter",i).bind("mouseleave",i)}}(jQuery),!function(n){"use strict";n.fn.swap=function(t,e){var i=n(this),t=isNaN(parseInt(t))?n(t).index():t,s=(e=e||i.siblings()).length;s===t?i.insertAfter(e.get(s-1)):i.insertBefore(e.get(t))}}(jQuery),function(r){function s(t,e){var i,s,n,o=t.nodeName.toLowerCase();return"area"===o?(s=(i=t.parentNode).name,!(!t.href||!s||"map"!==i.nodeName.toLowerCase()||!(n=r("img[usemap=#"+s+"]")[0]))&&a(n)):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"==o&&t.href||e)&&a(t)}function a(t){return!r(t).parents().andSelf().filter(function(){return"hidden"===r.curCSS(this,"visibility")||r.expr.filters.hidden(this)}).length}r.ui=r.ui||{},r.ui.version||(r.extend(r.ui,{version:"1.8.24",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),r.fn.extend({propAttr:r.fn.prop||r.fn.attr,_focus:r.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var t=this;setTimeout(function(){r(t).focus(),i&&i.call(t)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var t=(r.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(r.curCSS(this,"position",1))&&/(auto|scroll)/.test(r.curCSS(this,"overflow",1)+r.curCSS(this,"overflow-y",1)+r.curCSS(this,"overflow-x",1))}):this.parents().filter(function(){return/(auto|scroll)/.test(r.curCSS(this,"overflow",1)+r.curCSS(this,"overflow-y",1)+r.curCSS(this,"overflow-x",1))})).eq(0);return/fixed/.test(this.css("position"))||!t.length?r(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var e,i=r(this[0]);i.length&&i[0]!==document;){if(("absolute"===(e=i.css("position"))||"relative"===e||"fixed"===e)&&(e=parseInt(i.css("zIndex"),10),!isNaN(e))&&0!==e)return e;i=i.parent()}return 0},disableSelection:function(){return this.bind((r.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),r("<a>").outerWidth(1).jquery||r.each(["Width","Height"],function(t,i){function s(t,e,i,s){return r.each(n,function(){e-=parseFloat(r.curCSS(t,"padding"+this,!0))||0,i&&(e-=parseFloat(r.curCSS(t,"border"+this+"Width",!0))||0),s&&(e-=parseFloat(r.curCSS(t,"margin"+this,!0))||0)}),e}var n="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:r.fn.innerWidth,innerHeight:r.fn.innerHeight,outerWidth:r.fn.outerWidth,outerHeight:r.fn.outerHeight};r.fn["inner"+i]=function(t){return void 0===t?a["inner"+i].call(this):this.each(function(){r(this).css(o,s(this,t)+"px")})},r.fn["outer"+i]=function(t,e){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){r(this).css(o,s(this,t,!0,e)+"px")})}}),r.extend(r.expr[":"],{data:r.expr.createPseudo?r.expr.createPseudo(function(e){return function(t){return!!r.data(t,e)}}):function(t,e,i){return!!r.data(t,i[3])},focusable:function(t){return s(t,!isNaN(r.attr(t,"tabindex")))},tabbable:function(t){var e=r.attr(t,"tabindex"),i=isNaN(e);return(i||0<=e)&&s(t,!i)}}),r(function(){var t=document.body,e=t.appendChild(document.createElement("div"));e.offsetHeight,r.extend(e.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),r.support.minHeight=100===e.offsetHeight,r.support.selectstart="onselectstart"in e,t.removeChild(e).style.display="none"}),r.curCSS||(r.curCSS=r.css),r.extend(r.ui,{plugin:{add:function(t,e,i){var s,n=r.ui[t].prototype;for(s in i)n.plugins[s]=n.plugins[s]||[],n.plugins[s].push([e,i[s]])},call:function(t,e,i){var s=t.plugins[e];if(s&&t.element[0].parentNode)for(var n=0;n<s.length;n++)t.options[s[n][0]]&&s[n][1].apply(t.element,i)}},contains:function(t,e){return document.compareDocumentPosition?16&t.compareDocumentPosition(e):t!==e&&t.contains(e)},hasScroll:function(t,e){var i;return"hidden"!==r(t).css("overflow")&&(i=!1,0<t[e=e&&"left"===e?"scrollLeft":"scrollTop"]||(t[e]=1,i=0<t[e],t[e]=0,i))},isOverAxis:function(t,e,i){return e<t&&t<e+i},isOver:function(t,e,i,s,n,o){return r.ui.isOverAxis(t,i,n)&&r.ui.isOverAxis(e,s,o)}}))}(jQuery),function(a){var s,i;a.cleanData?(s=a.cleanData,a.cleanData=function(t){for(var e,i=0;null!=(e=t[i]);i++)try{a(e).triggerHandler("remove")}catch(t){}s(t)}):(i=a.fn.remove,a.fn.remove=function(t,e){return this.each(function(){return e||(t&&!a.filter(t,[this]).length||a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(t){}})),i.call(a(this),t,e)})}),a.widget=function(e,t,i){var s,n=e.split(".")[0],t=(s=n+"-"+(e=e.split(".")[1]),i||(i=t,t=a.Widget),a.expr[":"][s]=function(t){return!!a.data(t,e)},a[n]=a[n]||{},a[n][e]=function(t,e){arguments.length&&this._createWidget(t,e)},new t);t.options=a.extend(!0,{},t.options),a[n][e].prototype=a.extend(!0,t,{namespace:n,widgetName:e,widgetEventPrefix:a[n][e].prototype.widgetEventPrefix||e,widgetBaseClass:s},i),a.widget.bridge(e,a[n][e])},a.widget.bridge=function(o,e){a.fn[o]=function(i){var t="string"==typeof i,s=Array.prototype.slice.call(arguments,1),n=this;return i=!t&&s.length?a.extend.apply(null,[!0,i].concat(s)):i,t&&"_"===i.charAt(0)||(t?this.each(function(){var t=a.data(this,o),e=t&&a.isFunction(t[i])?t[i].apply(t,s):t;if(e!==t&&void 0!==e)return n=e,!1}):this.each(function(){var t=a.data(this,o);t?t.option(i||{})._init():a.data(this,o,new e(i,this))})),n}},a.Widget=function(t,e){arguments.length&&this._createWidget(t,e)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,e){a.data(e,this.widgetName,this),this.element=a(e),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),t);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(t,e){var i=t;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof t){if(void 0===e)return this.options[t];(i={})[t]=e}return this._setOptions(i),this},_setOptions:function(t){var i=this;return a.each(t,function(t,e){i._setOption(t,e)}),this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,e,i){var s,n,o=this.options[t];if(i=i||{},(e=a.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],n=e.originalEvent)for(s in n)s in e||(e[s]=n[s]);return this.element.trigger(e,i),!(a.isFunction(o)&&!1===o.call(this.element[0],e,i)||e.isDefaultPrevented())}}}(jQuery),function(n){var o=!1;n(document).mouseup(function(t){o=!1}),n.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){if(!0===n.data(t.target,e.widgetName+".preventClickEvent"))return n.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){var e,i,s;if(!o)return this._mouseStarted&&this._mouseUp(t),i=1==(this._mouseDownEvent=t).which,s=!("string"!=typeof(e=this).options.cancel||!t.target.nodeName)&&n(t.target).closest(this.options.cancel).length,i&&!s&&this._mouseCapture(t)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?t.preventDefault():(!0===n.data(t.target,this.widgetName+".preventClickEvent")&&n.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},n(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),o=!0)),!0},_mouseMove:function(t){return!n.browser.msie||9<=document.documentMode||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return n(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(t){return this.mouseDelayMet},_mouseStart:function(t){},_mouseDrag:function(t){},_mouseStop:function(t){},_mouseCapture:function(t){return!0}})}(jQuery),function(_){_.widget("ui.draggable",_.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||_(t.target).is(".ui-resizable-handle")||(this.handle=this._getHandle(t),!this.handle)||(e.iframeFix&&_(!0===e.iframeFix?"iframe":e.iframeFix).each(function(){_('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(_(this).offset()).appendTo("body")}),0))},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),_.ui.ddmanager&&(_.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},_.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),e.containment&&this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),_.ui.ddmanager&&!e.dropBehaviour&&_.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),_.ui.ddmanager&&_.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,e){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!e){e=this._uiHash();if(!1===this._trigger("drag",t,e))return this._mouseUp({}),!1;this.position=e.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),_.ui.ddmanager&&_.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){for(var e,i=!1,s=(_.ui.ddmanager&&!this.options.dropBehaviour&&(i=_.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),this.element[0]),n=!1;s=s&&s.parentNode;)s==document&&(n=!0);return!n&&"original"===this.options.helper||("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||!0===this.options.revert||_.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?_((e=this).helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear()),!1},_mouseUp:function(t){return _("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),_.ui.ddmanager&&_.ui.ddmanager.dragStop(this,t),_.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var e=!this.options.handle||!_(this.options.handle,this.element).length;return _(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(e=!0)}),e},_createHelper:function(t){var e=this.options,t=_.isFunction(e.helper)?_(e.helper.apply(this.element[0],[t])):"clone"==e.helper?this.element.clone().removeAttr("id"):this.element;return t.parents("body").length||t.appendTo("parent"==e.appendTo?this.element[0].parentNode:e.appendTo),t[0]==this.element[0]||/(fixed|absolute)/.test(t.css("position"))||t.css("position","absolute"),t},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),"left"in(t=_.isArray(t)?{left:+t[0],top:+t[1]||0}:t)&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&_.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),{top:(t=this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&_.browser.msie?{top:0,left:0}:t).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){var t;return"relative"==this.cssPosition?{top:(t=this.element.position()).top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}:{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i=this.options;"parent"==i.containment&&(i.containment=this.helper[0].parentNode),"document"!=i.containment&&"window"!=i.containment||(this.containment=["document"==i.containment?0:_(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==i.containment?0:_(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==i.containment?0:_(window).scrollLeft())+_("document"==i.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==i.containment?0:_(window).scrollTop())+(_("document"==i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||i.containment.constructor==Array?i.containment.constructor==Array&&(this.containment=i.containment):(t=(i=_(i.containment))[0])&&(i.offset(),e="hidden"!=_(t).css("overflow"),this.containment=[(parseInt(_(t).css("borderLeftWidth"),10)||0)+(parseInt(_(t).css("paddingLeft"),10)||0),(parseInt(_(t).css("borderTopWidth"),10)||0)+(parseInt(_(t).css("paddingTop"),10)||0),(e?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(_(t).css("borderLeftWidth"),10)||0)-(parseInt(_(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(_(t).css("borderTopWidth"),10)||0)-(parseInt(_(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i)},_convertPositionTo:function(t,e){e=e||this.position;var t="absolute"==t?1:-1,i=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&_.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*t+this.offset.parent.top*t-(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*t),left:e.left+this.offset.relative.left*t+this.offset.parent.left*t-(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*t)}},_generatePosition:function(t){var e,i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&_.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(s[0].tagName),o=t.pageX,a=t.pageY;return this.originalPosition&&(this.containment&&(e=this.relative_container?(e=this.relative_container.offset(),[this.containment[0]+e.left,this.containment[1]+e.top,this.containment[2]+e.left,this.containment[3]+e.top]):this.containment,t.pageX-this.offset.click.left<e[0]&&(o=e[0]+this.offset.click.left),t.pageY-this.offset.click.top<e[1]&&(a=e[1]+this.offset.click.top),t.pageX-this.offset.click.left>e[2]&&(o=e[2]+this.offset.click.left),t.pageY-this.offset.click.top>e[3])&&(a=e[3]+this.offset.click.top),i.grid)&&(t=i.grid[1]?this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY,a=e&&(t-this.offset.click.top<e[1]||t-this.offset.click.top>e[3])?t-this.offset.click.top<e[1]?t+i.grid[1]:t-i.grid[1]:t,t=i.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX,o=e&&(t-this.offset.click.left<e[0]||t-this.offset.click.left>e[2])?t-this.offset.click.left<e[0]?t+i.grid[0]:t-i.grid[0]:t),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(_.browser.safari&&_.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,e,i){return i=i||this._uiHash(),_.ui.plugin.call(this,t,[e,i]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),_.Widget.prototype._trigger.call(this,t,e,i)},plugins:{},_uiHash:function(t){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),_.extend(_.ui.draggable,{version:"1.8.24"}),_.ui.plugin.add("draggable","connectToSortable",{start:function(e,t){var i=_(this).data("draggable"),s=i.options,n=_.extend({},t,{item:i.element});i.sortables=[],_(s.connectToSortable).each(function(){var t=_.data(this,"sortable");t&&!t.options.disabled&&(i.sortables.push({instance:t,shouldRevert:t.options.revert}),t.refreshPositions(),t._trigger("activate",e,n))})},stop:function(t,e){var i=_(this).data("draggable"),s=_.extend({},e,{item:i.element});_.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(e,i){var s=_(this).data("draggable"),n=this;_.each(s.sortables,function(t){this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=_(n).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),_.ui.plugin.add("draggable","cursor",{start:function(t,e){var i=_("body"),s=_(this).data("draggable").options;i.css("cursor")&&(s._cursor=i.css("cursor")),i.css("cursor",s.cursor)},stop:function(t,e){var i=_(this).data("draggable").options;i._cursor&&_("body").css("cursor",i._cursor)}}),_.ui.plugin.add("draggable","opacity",{start:function(t,e){var e=_(e.helper),i=_(this).data("draggable").options;e.css("opacity")&&(i._opacity=e.css("opacity")),e.css("opacity",i.opacity)},stop:function(t,e){var i=_(this).data("draggable").options;i._opacity&&_(e.helper).css("opacity",i._opacity)}}),_.ui.plugin.add("draggable","scroll",{start:function(t,e){var i=_(this).data("draggable");i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(t,e){var i=_(this).data("draggable"),s=i.options,n=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(s.axis&&"x"==s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"==s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"==s.axis||(t.pageY-_(document).scrollTop()<s.scrollSensitivity?n=_(document).scrollTop(_(document).scrollTop()-s.scrollSpeed):_(window).height()-(t.pageY-_(document).scrollTop())<s.scrollSensitivity&&(n=_(document).scrollTop(_(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"==s.axis||(t.pageX-_(document).scrollLeft()<s.scrollSensitivity?n=_(document).scrollLeft(_(document).scrollLeft()-s.scrollSpeed):_(window).width()-(t.pageX-_(document).scrollLeft())<s.scrollSensitivity&&(n=_(document).scrollLeft(_(document).scrollLeft()+s.scrollSpeed)))),!1!==n&&_.ui.ddmanager&&!s.dropBehaviour&&_.ui.ddmanager.prepareOffsets(i,t)}}),_.ui.plugin.add("draggable","snap",{start:function(t,e){var i=_(this).data("draggable"),s=i.options;i.snapElements=[],_(s.snap.constructor!=String?s.snap.items||":data(draggable)":s.snap).each(function(){var t=_(this),e=t.offset();this!=i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e){for(var i=_(this).data("draggable"),s=i.options,n=s.snapTolerance,o=e.offset.left,a=o+i.helperProportions.width,r=e.offset.top,l=r+i.helperProportions.height,h=i.snapElements.length-1;0<=h;h--){var c,d,u,p,f,g=i.snapElements[h].left,m=g+i.snapElements[h].width,v=i.snapElements[h].top,b=v+i.snapElements[h].height;g-n<o&&o<m+n&&v-n<r&&r<b+n||g-n<o&&o<m+n&&v-n<l&&l<b+n||g-n<a&&a<m+n&&v-n<r&&r<b+n||g-n<a&&a<m+n&&v-n<l&&l<b+n?(c=("inner"!=s.snapMode&&(d=Math.abs(v-l)<=n,u=Math.abs(b-r)<=n,p=Math.abs(g-a)<=n,f=Math.abs(m-o)<=n,d&&(e.position.top=i._convertPositionTo("relative",{top:v-i.helperProportions.height,left:0}).top-i.margins.top),u&&(e.position.top=i._convertPositionTo("relative",{top:b,left:0}).top-i.margins.top),p&&(e.position.left=i._convertPositionTo("relative",{top:0,left:g-i.helperProportions.width}).left-i.margins.left),f)&&(e.position.left=i._convertPositionTo("relative",{top:0,left:m}).left-i.margins.left),d||u||p||f),"outer"!=s.snapMode&&(d=Math.abs(v-r)<=n,u=Math.abs(b-l)<=n,p=Math.abs(g-o)<=n,f=Math.abs(m-a)<=n,d&&(e.position.top=i._convertPositionTo("relative",{top:v,left:0}).top-i.margins.top),u&&(e.position.top=i._convertPositionTo("relative",{top:b-i.helperProportions.height,left:0}).top-i.margins.top),p&&(e.position.left=i._convertPositionTo("relative",{top:0,left:g}).left-i.margins.left),f)&&(e.position.left=i._convertPositionTo("relative",{top:0,left:m-i.helperProportions.width}).left-i.margins.left),!i.snapElements[h].snapping&&(d||u||p||f||c)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,_.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=d||u||p||f||c):(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,_.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1)}}}),_.ui.plugin.add("draggable","stack",{start:function(t,e){var i,s=_(this).data("draggable").options,s=_.makeArray(_(s.stack)).sort(function(t,e){return(parseInt(_(t).css("zIndex"),10)||0)-(parseInt(_(e).css("zIndex"),10)||0)});s.length&&(i=parseInt(s[0].style.zIndex)||0,_(s).each(function(t){this.style.zIndex=i+t}),this[0].style.zIndex=i+s.length)}}),_.ui.plugin.add("draggable","zIndex",{start:function(t,e){var e=_(e.helper),i=_(this).data("draggable").options;e.css("zIndex")&&(i._zIndex=e.css("zIndex")),e.css("zIndex",i.zIndex)},stop:function(t,e){var i=_(this).data("draggable").options;i._zIndex&&_(e.helper).css("zIndex",i._zIndex)}})}(jQuery),function(p){p.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,e=t.accept;this.isover=0,this.isout=1,this.accept=p.isFunction(e)?e:function(t){return t.is(e)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},p.ui.ddmanager.droppables[t.scope]=p.ui.ddmanager.droppables[t.scope]||[],p.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=p.ui.ddmanager.droppables[this.options.scope],e=0;e<t.length;e++)t[e]==this&&t.splice(e,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,e){"accept"==t&&(this.accept=p.isFunction(e)?e:function(t){return t.is(e)}),p.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var e=p.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=p.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=p.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!=this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=p.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!=this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(e)))},_drop:function(t,e){var i,s=e||p.ui.ddmanager.current;return!(!s||(s.currentItem||s.element)[0]==this.element[0]||(i=!1,this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=p.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==s.options.scope&&t.accept.call(t.element[0],s.currentItem||s.element)&&p.ui.intersect(s,p.extend(t,{offset:t.element.offset()}),t.options.tolerance))return!(i=!0)}),i)||!this.accept.call(this.element[0],s.currentItem||s.element))&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element)},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),p.extend(p.ui.droppable,{version:"1.8.24"}),p.ui.intersect=function(t,e,i){if(!e.offset)return!1;var s=(t.positionAbs||t.position.absolute).left,n=s+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,a=o+t.helperProportions.height,r=e.offset.left,l=r+e.proportions.width,h=e.offset.top,c=h+e.proportions.height;switch(i){case"fit":return r<=s&&n<=l&&h<=o&&a<=c;case"intersect":return r<s+t.helperProportions.width/2&&n-t.helperProportions.width/2<l&&h<o+t.helperProportions.height/2&&a-t.helperProportions.height/2<c;case"pointer":var d=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,u=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top;return p.ui.isOver(u,d,h,r,e.proportions.height,e.proportions.width);case"touch":return(h<=o&&o<=c||h<=a&&a<=c||o<h&&c<a)&&(r<=s&&s<=l||r<=n&&n<=l||s<r&&l<n);default:return!1}},p.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var i=p.ui.ddmanager.droppables[t.options.scope]||[],s=e?e.type:null,n=(t.currentItem||t.element).find(":data(droppable)").andSelf();t:for(var o=0;o<i.length;o++)if(!(i[o].options.disabled||t&&!i[o].accept.call(i[o].element[0],t.currentItem||t.element))){for(var a=0;a<n.length;a++)if(n[a]==i[o].element[0]){i[o].proportions.height=0;continue t}i[o].visible="none"!=i[o].element.css("display"),i[o].visible&&("mousedown"==s&&i[o]._activate.call(i[o],e),i[o].offset=i[o].element.offset(),i[o].proportions={width:i[o].element[0].offsetWidth,height:i[o].element[0].offsetHeight})}},drop:function(t,e){var i=!1;return p.each(p.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&p.ui.intersect(t,this,this.options.tolerance)&&(i=this._drop.call(this,e)||i),!this.options.disabled)&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,e))}),i},dragStart:function(t,e){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||p.ui.ddmanager.prepareOffsets(t,e)})},drag:function(n,o){n.options.refreshPositions&&p.ui.ddmanager.prepareOffsets(n,o),p.each(p.ui.ddmanager.droppables[n.options.scope]||[],function(){var t,e,i,s;this.options.disabled||this.greedyChild||!this.visible||(t=(t=p.ui.intersect(n,this,this.options.tolerance))||1!=this.isover?t&&0==this.isover?"isover":null:"isout")&&(this.options.greedy&&(i=this.options.scope,(s=this.element.parents(":data(droppable)").filter(function(){return p.data(this,"droppable").options.scope===i})).length)&&((e=p.data(s[0],"droppable")).greedyChild="isover"==t?1:0),e&&"isover"==t&&(e.isover=0,e.isout=1,e._out.call(e,o)),this[t]=1,this["isout"==t?"isover":"isout"]=0,this["isover"==t?"_over":"_out"].call(this,o),e)&&"isout"==t&&(e.isout=0,e.isover=1,e._over.call(e,o))})},dragStop:function(t,e){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||p.ui.ddmanager.prepareOffsets(t,e)}}}(jQuery),function(c){c.widget("ui.resizable",c.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var e=this,t=this.options;if(this.element.addClass("ui-resizable"),c.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=t.handles||(c(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var i=this.handles.split(",");this.handles={};for(var s=0;s<i.length;s++){var n=c.trim(i[s]),o=c('<div class="ui-resizable-handle '+("ui-resizable-"+n)+'"></div>');o.css({zIndex:t.zIndex}),"se"==n&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(o)}}this._renderAxis=function(t){for(var e in t=t||this.element,this.handles){var i,s;this.handles[e].constructor==String&&(this.handles[e]=c(this.handles[e],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=c(this.handles[e],this.element),i=0,i=/sw|ne|nw|se|n|s/.test(e)?s.outerHeight():s.outerWidth(),s=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(s,i),this._proportionallyResize()),c(this.handles[e]).length}},this._renderAxis(this.element),this._handles=c(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){var t;e.resizing||(this.className&&(t=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),e.axis=t&&t[1]?t[1]:"se")}),t.autoHide&&(this._handles.hide(),c(this.element).addClass("ui-resizable-autohide").hover(function(){t.disabled||(c(this).removeClass("ui-resizable-autohide"),e._handles.show())},function(){t.disabled||e.resizing||(c(this).addClass("ui-resizable-autohide"),e._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();function t(t){c(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()}var e;return this.elementIsWrapper&&(t(this.element),(e=this.element).after(this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")})).remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var e,i=!1;for(e in this.handles)c(this.handles[e])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var e=this.options,i=this.element.position(),s=this.element,i=(this.resizing=!0,this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy(),h(this.helper.css("left"))),n=h(this.helper.css("top")),i=(e.containment&&(i+=c(e.containment).scrollLeft()||0,n+=c(e.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:i,top:n},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof e.aspectRatio?e.aspectRatio:this.originalSize.width/this.originalSize.height||1,c(".ui-resizable-"+this.axis).css("cursor"));return c("body").css("cursor","auto"==i?this.axis+"-resize":i),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e=this.helper,i=(this.options,this.originalMousePosition),s=this.axis,n=t.pageX-i.left||0,i=t.pageY-i.top||0,s=this._change[s];return s&&(s=s.apply(this,[t,n,i]),c.browser.msie&&c.browser.version,this.sizeDiff,this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(s=this._updateRatio(s,t)),s=this._respectSize(s,t),this._propagate("resize",t),e.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(s),this._trigger("resize",t,this.ui())),!1},_mouseStop:function(t){this.resizing=!1;var e,i,s,n=this.options,o=this;return this._helper&&(i=(e=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&c.ui.hasScroll(i[0],"left")?0:o.sizeDiff.height,e=e?0:o.sizeDiff.width,e={width:o.helper.width()-e,height:o.helper.height()-i},i=parseInt(o.element.css("left"),10)+(o.position.left-o.originalPosition.left)||null,s=parseInt(o.element.css("top"),10)+(o.position.top-o.originalPosition.top)||null,n.animate||this.element.css(c.extend(e,{top:s,left:i})),o.helper.height(o.size.height),o.helper.width(o.size.width),this._helper)&&!n.animate&&this._proportionallyResize(),c("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,s,n=this.options,n={minWidth:d(n.minWidth)?n.minWidth:0,maxWidth:d(n.maxWidth)?n.maxWidth:1/0,minHeight:d(n.minHeight)?n.minHeight:0,maxHeight:d(n.maxHeight)?n.maxHeight:1/0};(this._aspectRatio||t)&&(t=n.minHeight*this.aspectRatio,i=n.minWidth/this.aspectRatio,e=n.maxHeight*this.aspectRatio,s=n.maxWidth/this.aspectRatio,n.minWidth<t&&(n.minWidth=t),n.minHeight<i&&(n.minHeight=i),e<n.maxWidth&&(n.maxWidth=e),s<n.maxHeight)&&(n.maxHeight=s),this._vBoundaries=n},_updateCache:function(t){this.options;this.offset=this.helper.offset(),d(t.left)&&(this.position.left=t.left),d(t.top)&&(this.position.top=t.top),d(t.height)&&(this.size.height=t.height),d(t.width)&&(this.size.width=t.width)},_updateRatio:function(t,e){this.options;var i=this.position,s=this.size,n=this.axis;return d(t.height)?t.width=t.height*this.aspectRatio:d(t.width)&&(t.height=t.width/this.aspectRatio),"sw"==n&&(t.left=i.left+(s.width-t.width),t.top=null),"nw"==n&&(t.top=i.top+(s.height-t.height),t.left=i.left+(s.width-t.width)),t},_respectSize:function(t,e){this.helper;var i=this._vBoundaries,e=(this._aspectRatio||e.shiftKey,this.axis),s=d(t.width)&&i.maxWidth&&i.maxWidth<t.width,n=d(t.height)&&i.maxHeight&&i.maxHeight<t.height,o=d(t.width)&&i.minWidth&&i.minWidth>t.width,a=d(t.height)&&i.minHeight&&i.minHeight>t.height,r=(o&&(t.width=i.minWidth),a&&(t.height=i.minHeight),s&&(t.width=i.maxWidth),n&&(t.height=i.maxHeight),this.originalPosition.left+this.originalSize.width),l=this.position.top+this.size.height,h=/sw|nw|w/.test(e),e=/nw|ne|n/.test(e),o=(o&&h&&(t.left=r-i.minWidth),s&&h&&(t.left=r-i.maxWidth),a&&e&&(t.top=l-i.minHeight),n&&e&&(t.top=l-i.maxHeight),!t.width&&!t.height);return o&&!t.left&&t.top?t.top=null:o&&!t.top&&t.left&&(t.left=null),t},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var t=this.helper||this.element,e=0;e<this._proportionallyResizeElements.length;e++){var i,s,n=this._proportionallyResizeElements[e];this.borderDif||(i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],this.borderDif=c.map(i,function(t,e){return(parseInt(t,10)||0)+(parseInt(s[e],10)||0)})),c.browser.msie&&(c(t).is(":hidden")||c(t).parents(":hidden").length)||n.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t,e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||c('<div style="overflow:hidden;"></div>'),t=(e=c.browser.msie&&c.browser.version<7)?1:0,e=e?2:-1,this.helper.addClass(this._helper).css({width:this.element.outerWidth()+e,height:this.element.outerHeight()+e,position:"absolute",left:this.elementOffset.left-t+"px",top:this.elementOffset.top-t+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e,i){return{width:this.originalSize.width+e}},w:function(t,e,i){this.options;var s=this.originalSize;return{left:this.originalPosition.left+e,width:s.width-e}},n:function(t,e,i){this.options;var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(t,e,i){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},sw:function(t,e,i){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,i]))},ne:function(t,e,i){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},nw:function(t,e,i){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,i]))}},_propagate:function(t,e){c.ui.plugin.call(this,t,[e,this.ui()]),"resize"!=t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),c.extend(c.ui.resizable,{version:"1.8.24"}),c.ui.plugin.add("resizable","alsoResize",{start:function(t,e){function i(t){c(t).each(function(){var t=c(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})}var s=c(this).data("resizable").options;"object"!=typeof s.alsoResize||s.alsoResize.parentNode?i(s.alsoResize):s.alsoResize.length?(s.alsoResize=s.alsoResize[0],i(s.alsoResize)):c.each(s.alsoResize,function(t){i(t)})},resize:function(t,o){function i(t,i){c(t).each(function(){var t=c(this),s=c(this).data("resizable-alsoresize"),n={},e=i&&i.length?i:t.parents(o.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(e,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&0<=i&&(n[e]=i||null)}),t.css(n)})}var e=c(this).data("resizable"),s=e.options,n=e.originalSize,a=e.originalPosition,r={height:e.size.height-n.height||0,width:e.size.width-n.width||0,top:e.position.top-a.top||0,left:e.position.left-a.left||0};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?i(s.alsoResize):c.each(s.alsoResize,function(t,e){i(t,e)})},stop:function(t,e){c(this).removeData("resizable-alsoresize")}}),c.ui.plugin.add("resizable","animate",{stop:function(e,t){var i=c(this).data("resizable"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&c.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,o=o?0:i.sizeDiff.width,o={width:i.size.width-o,height:i.size.height-a},a=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,r=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(c.extend(o,r&&a?{top:r,left:a}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var t={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&c(n[0]).css({width:t.width,height:t.height}),i._updateCache(t),i._propagate("resize",e)}})}}),c.ui.plugin.add("resizable","containment",{start:function(t,e){var i,s,n,o,a=c(this).data("resizable"),r=a.options,l=a.element,r=r.containment,l=r instanceof c?r.get(0):/parent/.test(r)?l.parent().get(0):r;l&&(a.containerElement=c(l),/document/.test(r)||r==document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}):(i=c(l),s=[],c(["Top","Right","Left","Bottom"]).each(function(t,e){s[t]=h(i.css("padding"+e))}),a.containerOffset=i.offset(),a.containerPosition=i.position(),a.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},r=a.containerOffset,o=a.containerSize.height,n=a.containerSize.width,n=c.ui.hasScroll(l,"left")?l.scrollWidth:n,o=c.ui.hasScroll(l)?l.scrollHeight:o,a.parentData={element:l,left:r.left,top:r.top,width:n,height:o}))},resize:function(t,e){var i=c(this).data("resizable"),s=i.options,n=(i.containerSize,i.containerOffset),o=(i.size,i.position),t=i._aspectRatio||t.shiftKey,a={top:0,left:0},r=i.containerElement,r=(r[0]!=document&&/static/.test(r.css("position"))&&(a=n),o.left<(i._helper?n.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-n.left:i.position.left-a.left),t&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=s.helper?n.left:0),o.top<(i._helper?n.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-n.top:i.position.top),t&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?n.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top,Math.abs((i._helper,i.offset.left-a.left+i.sizeDiff.width))),s=Math.abs((i._helper?i.offset.top-a.top:i.offset.top-n.top)+i.sizeDiff.height),o=i.containerElement.get(0)==i.element.parent().get(0),a=/relative|absolute/.test(i.containerElement.css("position"));o&&a&&(r-=i.parentData.left),r+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-r,t)&&(i.size.height=i.size.width/i.aspectRatio),s+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-s,t)&&(i.size.width=i.size.height*i.aspectRatio)},stop:function(t,e){var i=c(this).data("resizable"),s=i.options,n=(i.position,i.containerOffset),o=i.containerPosition,a=i.containerElement,r=c(i.helper),l=r.offset(),h=r.outerWidth()-i.sizeDiff.width,r=r.outerHeight()-i.sizeDiff.height;i._helper&&!s.animate&&/relative/.test(a.css("position"))&&c(this).css({left:l.left-o.left-n.left,width:h,height:r}),i._helper&&!s.animate&&/static/.test(a.css("position"))&&c(this).css({left:l.left-o.left-n.left,width:h,height:r})}}),c.ui.plugin.add("resizable","ghost",{start:function(t,e){var i=c(this).data("resizable"),s=i.options,n=i.size;i.ghost=i.originalElement.clone(),i.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof s.ghost?s.ghost:""),i.ghost.appendTo(i.helper)},resize:function(t,e){var i=c(this).data("resizable");i.options;i.ghost&&i.ghost.css({position:"relative",height:i.size.height,width:i.size.width})},stop:function(t,e){var i=c(this).data("resizable");i.options;i.ghost&&i.helper&&i.helper.get(0).removeChild(i.ghost.get(0))}}),c.ui.plugin.add("resizable","grid",{resize:function(t,e){var i=c(this).data("resizable"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,t=(s._aspectRatio||t.shiftKey,s.grid="number"==typeof s.grid?[s.grid,s.grid]:s.grid,Math.round((n.width-o.width)/(s.grid[0]||1))*(s.grid[0]||1)),n=Math.round((n.height-o.height)/(s.grid[1]||1))*(s.grid[1]||1);/^(se|s|e)$/.test(r)?(i.size.width=o.width+t,i.size.height=o.height+n):/^(ne)$/.test(r)?(i.size.width=o.width+t,i.size.height=o.height+n,i.position.top=a.top-n):(/^(sw)$/.test(r)?(i.size.width=o.width+t,i.size.height=o.height+n):(i.size.width=o.width+t,i.size.height=o.height+n,i.position.top=a.top-n),i.position.left=a.left-t)}});var h=function(t){return parseInt(t,10)||0},d=function(t){return!isNaN(parseInt(t,10))}}(jQuery),function(h){h.widget("ui.selectable",h.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t,e=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=h(e.options.filter,e.element[0])).addClass("ui-selectee"),t.each(function(){var t=h(this),e=t.offset();h.data(this,"selectable-item",{element:this,$element:t,left:e.left,top:e.top,right:e.left+t.outerWidth(),bottom:e.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=h("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(i){var t,s=this;this.opos=[i.pageX,i.pageY],this.options.disabled||(t=this.options,this.selectees=h(t.filter,this.element[0]),this._trigger("start",i),h(t.appendTo).append(this.helper),this.helper.css({left:i.clientX,top:i.clientY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=h.data(this,"selectable-item");t.startselected=!0,i.metaKey||i.ctrlKey||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,s._trigger("unselecting",i,{unselecting:t.element}))}),h(i.target).parents().andSelf().each(function(){var t,e=h.data(this,"selectable-item");if(e)return t=!i.metaKey&&!i.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(t?"ui-unselecting":"ui-selected").addClass(t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?s._trigger("selecting",i,{selecting:e.element}):s._trigger("unselecting",i,{unselecting:e.element}),!1}))},_mouseDrag:function(i){var s,n,o,t,a,r,l=this;if(this.dragged=!0,!this.options.disabled)return s=this.options,o=this.opos[0],r=this.opos[1],n=i.pageX,a=i.pageY,n<o&&(t=n,n=o,o=t),a<r&&(t=a,a=r,r=t),this.helper.css({left:o,top:r,width:n-o,height:a-r}),this.selectees.each(function(){var t,e=h.data(this,"selectable-item");e&&e.element!=l.element[0]&&(t=!1,"touch"==s.tolerance?t=!(e.left>n||e.right<o||e.top>a||e.bottom<r):"fit"==s.tolerance&&(t=e.left>o&&e.right<n&&e.top>r&&e.bottom<a),t?(e.selected&&(e.$element.removeClass("ui-selected"),e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,l._trigger("selecting",i,{selecting:e.element}))):(e.selecting&&((i.metaKey||i.ctrlKey)&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),l._trigger("unselecting",i,{unselecting:e.element}))),!e.selected||i.metaKey||i.ctrlKey||e.startselected||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,l._trigger("unselecting",i,{unselecting:e.element}))))}),!1},_mouseStop:function(e){var i=this;this.dragged=!1,this.options;return h(".ui-unselecting",this.element[0]).each(function(){var t=h.data(this,"selectable-item");t.$element.removeClass("ui-unselecting"),t.unselecting=!1,t.startselected=!1,i._trigger("unselected",e,{unselected:t.element})}),h(".ui-selecting",this.element[0]).each(function(){var t=h.data(this,"selectable-item");t.$element.removeClass("ui-selecting").addClass("ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,i._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),h.extend(h.ui.selectable,{version:"1.8.24"})}(jQuery),function(u){u.widget("ui.sortable",u.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){u.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,e){"disabled"===t?(this.options[t]=e,this.widget()[e?"addClass":"removeClass"]("ui-sortable-disabled")):u.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,e){var i=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var s=null,n=this;u(t.target).parents().each(function(){if(u.data(this,i.widgetName+"-item")==n)return s=u(this),!1});if(!(s=u.data(t.target,i.widgetName+"-item")==n?u(t.target):s))return!1;if(this.options.handle&&!e){var o=!1;if(u(this.options.handle,s).find("*").andSelf().each(function(){this==t.target&&(o=!0)}),!o)return!1}return this.currentItem=s,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,e,i){var s=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},u.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(u("body").css("cursor")&&(this._storedCursor=u("body").css("cursor")),u("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var n=this.containers.length-1;0<=n;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return u.ui.ddmanager&&(u.ui.ddmanager.current=this),u.ui.ddmanager&&!s.dropBehaviour&&u.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,i;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(e=this.options,i=!1,this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<e.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+e.scrollSpeed:t.pageY-this.overflowOffset.top<e.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-e.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<e.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+e.scrollSpeed:t.pageX-this.overflowOffset.left<e.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-e.scrollSpeed)):(t.pageY-u(document).scrollTop()<e.scrollSensitivity?i=u(document).scrollTop(u(document).scrollTop()-e.scrollSpeed):u(window).height()-(t.pageY-u(document).scrollTop())<e.scrollSensitivity&&(i=u(document).scrollTop(u(document).scrollTop()+e.scrollSpeed)),t.pageX-u(document).scrollLeft()<e.scrollSensitivity?i=u(document).scrollLeft(u(document).scrollLeft()-e.scrollSpeed):u(window).width()-(t.pageX-u(document).scrollLeft())<e.scrollSensitivity&&(i=u(document).scrollLeft(u(document).scrollLeft()+e.scrollSpeed))),!1!==i)&&u.ui.ddmanager&&!e.dropBehaviour&&u.ui.ddmanager.prepareOffsets(this,t),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var s=this.items.length-1;0<=s;s--){var n=this.items[s],o=n.item[0],a=this._intersectsWithPointer(n);if(a&&(n.instance===this.currentContainer&&!(o==this.currentItem[0]||this.placeholder[1==a?"next":"prev"]()[0]==o||u.ui.contains(this.placeholder[0],o)||"semi-dynamic"==this.options.type&&u.ui.contains(this.element[0],o)))){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),u.ui.ddmanager&&u.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){var i,s;if(t)return u.ui.ddmanager&&!this.options.dropBehaviour&&u.ui.ddmanager.drop(this,t),this.options.revert?(s=(i=this).placeholder.offset(),i.reverting=!0,u(this.helper).animate({left:s.left-this.offset.parent.left-i.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:s.top-this.offset.parent.top-i.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(t)})):this._clear(t,e),!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),u.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?u(this.domPosition.prev).after(this.currentItem):u(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},u(t).each(function(){var t=(u(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);t&&i.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e.each(function(){i.push(u(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,l=r+t.height,h=this.offset.click.top,c=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?r<s+h&&s+h<l&&o<e+c&&e+c<a:o<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<a&&r<s+this.helperProportions.height/2&&n-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||u.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),t="y"===this.options.axis||u.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),e=e&&t,t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return!!e&&(this.floating?i&&"right"==i||"down"==t?2:1:t&&("down"==t?2:1))},_intersectsWithSides:function(t){var e=u.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),t=u.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"==s&&t||"left"==s&&!t:i&&("down"==i&&e||"up"==i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var e=[],i=[],s=this._connectWith();if(s&&t)for(var n=s.length-1;0<=n;n--)for(var o=u(s[n]),a=o.length-1;0<=a;a--){var r=u.data(o[a],this.widgetName);r&&r!=this&&!r.options.disabled&&i.push([u.isFunction(r.options.items)?r.options.items.call(r.element):u(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r])}i.push([u.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):u(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=i.length-1;0<=n;n--)i[n][0].each(function(){e.push(this)});return u(e)},_removeCurrentsFromItems:function(){for(var t=this.currentItem.find(":data("+this.widgetName+"-item)"),e=0;e<this.items.length;e++)for(var i=0;i<t.length;i++)t[i]==this.items[e].item[0]&&this.items.splice(e,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var e=this.items,i=[[u.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):u(this.options.items,this.element),this]],s=this._connectWith();if(s&&this.ready)for(var n=s.length-1;0<=n;n--)for(var o=u(s[n]),a=o.length-1;0<=a;a--){var r=u.data(o[a],this.widgetName);r&&r!=this&&!r.options.disabled&&(i.push([u.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):u(r.options.items,r.element),r]),this.containers.push(r))}for(n=i.length-1;0<=n;n--)for(var l=i[n][1],h=i[n][0],a=0,c=h.length;a<c;a++){var d=u(h[a]);d.data(this.widgetName+"-item",l),e.push({item:d,instance:l,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var e=this.items.length-1;0<=e;e--){var i,s=this.items[e];s.instance!=this.currentContainer&&this.currentContainer&&s.item[0]!=this.currentItem[0]||(i=this.options.toleranceElement?u(this.options.toleranceElement,s.item):s.item,t||(s.width=i.outerWidth(),s.height=i.outerHeight()),n=i.offset(),s.left=n.left,s.top=n.top)}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--){var n=this.containers[e].element.offset();this.containers[e].containerCache.left=n.left,this.containers[e].containerCache.top=n.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight()}return this},_createPlaceholder:function(t){var i,s=t||this,n=s.options;n.placeholder&&n.placeholder.constructor!=String||(i=n.placeholder,n.placeholder={element:function(){var t=u(document.createElement(s.currentItem[0].nodeName)).addClass(i||s.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(t.style.visibility="hidden"),t},update:function(t,e){i&&!n.forcePlaceholderSize||(e.height()||e.height(s.currentItem.innerHeight()-parseInt(s.currentItem.css("paddingTop")||0,10)-parseInt(s.currentItem.css("paddingBottom")||0,10)),e.width())||e.width(s.currentItem.innerWidth()-parseInt(s.currentItem.css("paddingLeft")||0,10)-parseInt(s.currentItem.css("paddingRight")||0,10))}}),s.placeholder=u(n.placeholder.element.call(s.element,s.currentItem)),s.currentItem.after(s.placeholder),n.placeholder.update(s,s.placeholder)},_contactContainers:function(t){for(var e=null,i=null,s=this.containers.length-1;0<=s;s--)u.ui.contains(this.currentItem[0],this.containers[s].element[0])||(this._intersectsWith(this.containers[s].containerCache)?e&&u.ui.contains(this.containers[s].element[0],e.element[0])||(e=this.containers[s],i=s):this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",t,this._uiHash(this)),this.containers[s].containerCache.over=0));if(e)if(1===this.containers.length)this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1;else if(this.currentContainer!=this.containers[i]){for(var n,o=1e4,a=null,r=this.positionAbs[this.containers[i].floating?"left":"top"],l=this.items.length-1;0<=l;l--)u.ui.contains(this.containers[i].element[0],this.items[l].item[0])&&(n=this.containers[i].floating?this.items[l].item.offset().left:this.items[l].item.offset().top,Math.abs(n-r)<o)&&(o=Math.abs(n-r),a=this.items[l],this.direction=0<n-r?"down":"up");(a||this.options.dropOnEmpty)&&(this.currentContainer=this.containers[i],a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[i].element,!0),this._trigger("change",t,this._uiHash()),this.containers[i]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1)}},_createHelper:function(t){var e=this.options,t=u.isFunction(e.helper)?u(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"==e.helper?this.currentItem.clone():this.currentItem;return t.parents("body").length||u("parent"!=e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(t[0]),t[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),""!=t[0].style.width&&!e.forceHelperSize||t.width(this.currentItem.width()),""!=t[0].style.height&&!e.forceHelperSize||t.height(this.currentItem.height()),t},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),"left"in(t=u.isArray(t)?{left:+t[0],top:+t[1]||0}:t)&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&u.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),{top:(t=this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&u.browser.msie?{top:0,left:0}:t).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){var t;return"relative"==this.cssPosition?{top:(t=this.currentItem.position()).top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}:{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i=this.options;"parent"==i.containment&&(i.containment=this.helper[0].parentNode),"document"!=i.containment&&"window"!=i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,u("document"==i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(u("document"==i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=u(i.containment)[0],i=u(i.containment).offset(),e="hidden"!=u(t).css("overflow"),this.containment=[i.left+(parseInt(u(t).css("borderLeftWidth"),10)||0)+(parseInt(u(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(u(t).css("borderTopWidth"),10)||0)+(parseInt(u(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(e?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(u(t).css("borderLeftWidth"),10)||0)-(parseInt(u(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(e?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(u(t).css("borderTopWidth"),10)||0)-(parseInt(u(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e=e||this.position;var t="absolute"==t?1:-1,i=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&u.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*t+this.offset.parent.top*t-(u.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*t),left:e.left+this.offset.relative.left*t+this.offset.parent.left*t-(u.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*t)}},_generatePosition:function(t){var e=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&u.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName),n=("relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),t.pageX),o=t.pageY;return this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3])&&(o=this.containment[3]+this.offset.click.top),e.grid)&&(t=this.originalPageY+Math.round((o-this.originalPageY)/e.grid[1])*e.grid[1],o=this.containment&&(t-this.offset.click.top<this.containment[1]||t-this.offset.click.top>this.containment[3])?t-this.offset.click.top<this.containment[1]?t+e.grid[1]:t-e.grid[1]:t,t=this.originalPageX+Math.round((n-this.originalPageX)/e.grid[0])*e.grid[0],n=this.containment&&(t-this.offset.click.left<this.containment[0]||t-this.offset.click.left>this.containment[2])?t-this.offset.click.left<this.containment[0]?t+e.grid[0]:t-e.grid[0]:t),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(u.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(u.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this,o=this.counter;window.setTimeout(function(){o==n.counter&&n.refreshPositions(!s)},0)},_clear:function(t,e){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)"auto"!=this._storedCSS[s]&&"static"!=this._storedCSS[s]||(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!e&&i.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||e||i.push(function(t){this._trigger("update",t,this._uiHash())}),this===this.currentContainer||e||(i.push(function(t){this._trigger("remove",t,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)));for(s=this.containers.length-1;0<=s;s--)e||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);if(this._storedCursor&&u("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",t,this._uiHash());for(s=0;s<i.length;s++)i[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(s=0;s<i.length;s++)i[s].call(this,t);this._trigger("stop",t,this._uiHash())}return!(this.fromOutside=!1)},_trigger:function(){!1===u.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||u([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}}),u.extend(u.ui.sortable,{version:"1.8.24"})}(jQuery),jQuery.effects||function(h){function s(t){var e;return t&&t.constructor==Array&&3==t.length?t:(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]:(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(e[1]),2.55*parseFloat(e[2]),2.55*parseFloat(e[3])]:(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(t)?n.transparent:n[h.trim(t).toLowerCase()]}function c(){var t,e=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,i={};if(e&&e.length&&e[0]&&e[e[0]])for(var s=e.length;s--;)"string"==typeof e[t=e[s]]&&(i[t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})]=e[t]);else for(t in e)"string"==typeof e[t]&&(i[t]=e[t]);return i}function d(t){var e,i;for(e in t)i=t[e],(null==i||h.isFunction(i)||e in o||/scrollbar/.test(e)||!/color/i.test(e)&&isNaN(parseFloat(i)))&&delete t[e];return t}function r(t,e,i,s){return"object"==typeof t&&(s=e,i=null,t=(e=t).effect),h.isFunction(e)&&(s=e,i=null,e={}),"number"!=typeof e&&!h.fx.speeds[e]||(s=i,i=e,e={}),h.isFunction(i)&&(s=i,i=null),e=e||{},i=i||e.duration,[t,e,i=h.fx.off?0:"number"==typeof i?i:i in h.fx.speeds?h.fx.speeds[i]:h.fx.speeds._default,s=s||e.complete]}function i(t){return!t||"number"==typeof t||h.fx.speeds[t]||"string"==typeof t&&!h.effects[t]}h.effects={},h.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,e){h.fx.step[e]=function(t){t.colorInit||(t.start=function(t,e){for(var i;!(""!=(i=(h.curCSS||h.css)(t,e))&&"transparent"!=i||h.nodeName(t,"body"))&&(e="backgroundColor",t=t.parentNode););return s(i)}(t.elem,e),t.end=s(t.end),t.colorInit=!0),t.elem.style[e]="rgb("+Math.max(Math.min(parseInt(t.pos*(t.end[0]-t.start[0])+t.start[0],10),255),0)+","+Math.max(Math.min(parseInt(t.pos*(t.end[1]-t.start[1])+t.start[1],10),255),0)+","+Math.max(Math.min(parseInt(t.pos*(t.end[2]-t.start[2])+t.start[2],10),255),0)+")"}});var n={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},u=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},a=(h.effects.animateClass=function(o,a,r,l){return h.isFunction(r)&&(l=r,r=null),this.queue(function(){var t,i=h(this),e=i.attr("style")||" ",s=d(c.call(this)),n=i.attr("class")||"";h.each(u,function(t,e){o[e]&&i[e+"Class"](o[e])}),t=d(c.call(this)),i.attr("class",n),i.animate(function(t,e){var i,s={_:0};for(i in e)t[i]!=e[i]&&(s[i]=e[i]);return s}(s,t),{queue:!1,duration:a,easing:r,complete:function(){h.each(u,function(t,e){o[e]&&i[e+"Class"](o[e])}),"object"==typeof i.attr("style")?(i.attr("style").cssText="",i.attr("style").cssText=e):i.attr("style",e),l&&l.apply(this,arguments),h.dequeue(this)}})})},h.fn.extend({_addClass:h.fn.addClass,addClass:function(t,e,i,s){return e?h.effects.animateClass.apply(this,[{add:t},e,i,s]):this._addClass(t)},_removeClass:h.fn.removeClass,removeClass:function(t,e,i,s){return e?h.effects.animateClass.apply(this,[{remove:t},e,i,s]):this._removeClass(t)},_toggleClass:h.fn.toggleClass,toggleClass:function(t,e,i,s,n){return"boolean"==typeof e||void 0===e?i?h.effects.animateClass.apply(this,[e?{add:t}:{remove:t},i,s,n]):this._toggleClass(t,e):h.effects.animateClass.apply(this,[{toggle:t},e,i,s])},switchClass:function(t,e,i,s,n){return h.effects.animateClass.apply(this,[{add:e,remove:t},i,s,n])}}),h.extend(h.effects,{version:"1.8.24",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data("ec.storage."+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.css(e[i],t.data("ec.storage."+e[i]))},setMode:function(t,e){return e="toggle"==e?t.is(":hidden")?"show":"hide":e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(i){if(i.parent().is(".ui-effects-wrapper"))return i.parent();var s={width:i.outerWidth(!0),height:i.outerHeight(!0),float:i.css("float")},t=h("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(t){e=document.body}return i.wrap(t),i[0]!==e&&!h.contains(i[0],e)||h(e).focus(),t=i.parent(),"static"==i.css("position")?(t.css({position:"relative"}),i.css({position:"relative"})):(h.extend(s,{position:i.css("position"),zIndex:i.css("z-index")}),h.each(["top","left","bottom","right"],function(t,e){s[e]=i.css(e),isNaN(parseInt(s[e],10))&&(s[e]="auto")}),i.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(s).show()},removeWrapper:function(t){var e,i=document.activeElement;return t.parent().is(".ui-effects-wrapper")?(e=t.parent().replaceWith(t),t[0]!==i&&!h.contains(t[0],i)||h(i).focus(),e):t},setTransition:function(s,t,n,o){return o=o||{},h.each(t,function(t,e){var i=s.cssUnit(e);0<i[0]&&(o[e]=i[0]*n+i[1])}),o}}),h.fn.extend({effect:function(t,e,i,s){var n=r.apply(this,arguments),o={options:n[1],duration:n[2],callback:n[3]},n=o.options.mode,a=h.effects[t];return h.fx.off||!a?n?this[n](o.duration,o.callback):this.each(function(){o.callback&&o.callback.call(this)}):a.call(this,o)},_show:h.fn.show,show:function(t){var e;return i(t)?this._show.apply(this,arguments):((e=r.apply(this,arguments))[1].mode="show",this.effect.apply(this,e))},_hide:h.fn.hide,hide:function(t){var e;return i(t)?this._hide.apply(this,arguments):((e=r.apply(this,arguments))[1].mode="hide",this.effect.apply(this,e))},__toggle:h.fn.toggle,toggle:function(t){var e;return i(t)||"boolean"==typeof t||h.isFunction(t)?this.__toggle.apply(this,arguments):((e=r.apply(this,arguments))[1].mode="toggle",this.effect.apply(this,e))},cssUnit:function(t){var i=this.css(t),s=[];return h.each(["em","px","%","pt"],function(t,e){0<i.indexOf(e)&&(s=[parseFloat(i),e])}),s}}),{});h.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){a[t]=function(t){return Math.pow(t,e+2)}}),h.extend(a,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),h.each(a,function(t,e){h.easing["easeIn"+t]=e,h.easing["easeOut"+t]=function(t){return 1-e(1-t)},h.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:e(-2*t+2)/-2+1}})}(jQuery),function(l){l.effects.blind=function(r){return this.queue(function(){var t=l(this),e=["position","top","bottom","left","right"],i=l.effects.setMode(t,r.options.mode||"hide"),s=r.options.direction||"vertical",n=(l.effects.save(t,e),t.show(),l.effects.createWrapper(t).css({overflow:"hidden"})),o="vertical"==s?"height":"width",s="vertical"==s?n.height():n.width(),a=("show"==i&&n.css(o,0),{});a[o]="show"==i?s:0,n.animate(a,r.duration,r.options.easing,function(){"hide"==i&&t.hide(),l.effects.restore(t,e),l.effects.removeWrapper(t),r.callback&&r.callback.apply(t[0],arguments),t.dequeue()})})}}(jQuery),function(f){f.effects.bounce=function(p){return this.queue(function(){var t=f(this),e=["position","top","bottom","left","right"],i=f.effects.setMode(t,p.options.mode||"effect"),s=p.options.direction||"up",n=p.options.distance||20,o=p.options.times||5,a=p.duration||250,r=(/show|hide/.test(i)&&e.push("opacity"),f.effects.save(t,e),t.show(),f.effects.createWrapper(t),"up"==s||"down"==s?"top":"left"),l="up"==s||"left"==s?"pos":"neg",n=p.options.distance||("top"==r?t.outerHeight(!0)/3:t.outerWidth(!0)/3);"show"==i&&t.css("opacity",0).css(r,"pos"==l?-n:n),"hide"==i&&(n/=2*o),"hide"!=i&&o--,"show"==i&&((h={opacity:1})[r]=("pos"==l?"+=":"-=")+n,t.animate(h,a/2,p.options.easing),n/=2,o--);for(var h,c=0;c<o;c++){var d,u={};(d={})[r]=("pos"==l?"-=":"+=")+n,u[r]=("pos"==l?"+=":"-=")+n,t.animate(d,a/2,p.options.easing).animate(u,a/2,p.options.easing),n="hide"==i?2*n:n/2}"hide"==i?((h={opacity:0})[r]=("pos"==l?"-=":"+=")+n,t.animate(h,a/2,p.options.easing,function(){t.hide(),f.effects.restore(t,e),f.effects.removeWrapper(t),p.callback&&p.callback.apply(this,arguments)})):(u={},(d={})[r]=("pos"==l?"-=":"+=")+n,u[r]=("pos"==l?"+=":"-=")+n,t.animate(d,a/2,p.options.easing).animate(u,a/2,p.options.easing,function(){f.effects.restore(t,e),f.effects.removeWrapper(t),p.callback&&p.callback.apply(this,arguments)})),t.queue("fx",function(){t.dequeue()}),t.dequeue()})}}(jQuery),function(l){l.effects.clip=function(r){return this.queue(function(){var t=l(this),e=["position","top","bottom","left","right","height","width"],i=l.effects.setMode(t,r.options.mode||"hide"),s=r.options.direction||"vertical",n=(l.effects.save(t,e),t.show(),l.effects.createWrapper(t).css({overflow:"hidden"})),n="IMG"==t[0].tagName?n:t,o={size:"vertical"==s?"height":"width",position:"vertical"==s?"top":"left"},s="vertical"==s?n.height():n.width(),a=("show"==i&&(n.css(o.size,0),n.css(o.position,s/2)),{});a[o.size]="show"==i?s:0,a[o.position]="show"==i?0:s/2,n.animate(a,{queue:!1,duration:r.duration,easing:r.options.easing,complete:function(){"hide"==i&&t.hide(),l.effects.restore(t,e),l.effects.removeWrapper(t),r.callback&&r.callback.apply(t[0],arguments),t.dequeue()}})})}}(jQuery),function(l){l.effects.drop=function(r){return this.queue(function(){var t=l(this),e=["position","top","bottom","left","right","opacity"],i=l.effects.setMode(t,r.options.mode||"hide"),s=r.options.direction||"left",n=(l.effects.save(t,e),t.show(),l.effects.createWrapper(t),"up"==s||"down"==s?"top":"left"),s="up"==s||"left"==s?"pos":"neg",o=r.options.distance||("top"==n?t.outerHeight(!0)/2:t.outerWidth(!0)/2),a=("show"==i&&t.css("opacity",0).css(n,"pos"==s?-o:o),{opacity:"show"==i?1:0});a[n]=("show"==i?"pos"==s?"+=":"-=":"pos"==s?"-=":"+=")+o,t.animate(a,{queue:!1,duration:r.duration,easing:r.options.easing,complete:function(){"hide"==i&&t.hide(),l.effects.restore(t,e),l.effects.removeWrapper(t),r.callback&&r.callback.apply(this,arguments),t.dequeue()}})})}}(jQuery),function(h){h.effects.explode=function(l){return this.queue(function(){for(var t=l.options.pieces?Math.round(Math.sqrt(l.options.pieces)):3,e=l.options.pieces?Math.round(Math.sqrt(l.options.pieces)):3,i=(l.options.mode="toggle"==l.options.mode?h(this).is(":visible")?"hide":"show":l.options.mode,h(this).show().css("visibility","hidden")),s=i.offset(),n=(s.top-=parseInt(i.css("marginTop"),10)||0,s.left-=parseInt(i.css("marginLeft"),10)||0,i.outerWidth(!0)),o=i.outerHeight(!0),a=0;a<t;a++)for(var r=0;r<e;r++)i.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:n/e*-r,top:o/t*-a}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:n/e,height:o/t,left:s.left+r*(n/e)+("show"==l.options.mode?(r-Math.floor(e/2))*(n/e):0),top:s.top+a*(o/t)+("show"==l.options.mode?(a-Math.floor(t/2))*(o/t):0),opacity:"show"==l.options.mode?0:1}).animate({left:s.left+r*(n/e)+("show"==l.options.mode?0:(r-Math.floor(e/2))*(n/e)),top:s.top+a*(o/t)+("show"==l.options.mode?0:(a-Math.floor(t/2))*(o/t)),opacity:"show"==l.options.mode?1:0},l.duration||500);setTimeout(function(){"show"==l.options.mode?i.css({visibility:"visible"}):i.css({visibility:"visible"}).hide(),l.callback&&l.callback.apply(i[0]),i.dequeue(),h("div.ui-effects-explode").remove()},l.duration||500)})}}(jQuery),function(s){s.effects.fade=function(i){return this.queue(function(){var t=s(this),e=s.effects.setMode(t,i.options.mode||"hide");t.animate({opacity:e},{queue:!1,duration:i.duration,easing:i.options.easing,complete:function(){i.callback&&i.callback.apply(this,arguments),t.dequeue()}})})}}(jQuery),function(d){d.effects.fold=function(c){return this.queue(function(){var t=d(this),e=["position","top","bottom","left","right"],i=d.effects.setMode(t,c.options.mode||"hide"),s=c.options.size||15,n=!!c.options.horizFirst,o=c.duration?c.duration/2:d.fx.speeds._default/2,a=(d.effects.save(t,e),t.show(),d.effects.createWrapper(t).css({overflow:"hidden"})),r="show"==i!=n,l=r?["width","height"]:["height","width"],r=r?[a.width(),a.height()]:[a.height(),a.width()],h=/([0-9]+)%/.exec(s),h=(h&&(s=parseInt(h[1],10)/100*r["hide"==i?0:1]),"show"==i&&a.css(n?{height:0,width:s}:{height:s,width:0}),{}),n={};h[l[0]]="show"==i?r[0]:s,n[l[1]]="show"==i?r[1]:0,a.animate(h,o,c.options.easing).animate(n,o,c.options.easing,function(){"hide"==i&&t.hide(),d.effects.restore(t,e),d.effects.removeWrapper(t),c.callback&&c.callback.apply(t[0],arguments),t.dequeue()})})}}(jQuery),function(o){o.effects.highlight=function(n){return this.queue(function(){var t=o(this),e=["backgroundImage","backgroundColor","opacity"],i=o.effects.setMode(t,n.options.mode||"show"),s={backgroundColor:t.css("backgroundColor")};"hide"==i&&(s.opacity=0),o.effects.save(t,e),t.show().css({backgroundImage:"none",backgroundColor:n.options.color||"#ffff99"}).animate(s,{queue:!1,duration:n.duration,easing:n.options.easing,complete:function(){"hide"==i&&t.hide(),o.effects.restore(t,e),"show"!=i||o.support.opacity||this.style.removeAttribute("filter"),n.callback&&n.callback.apply(this,arguments),t.dequeue()}})})}}(jQuery),function(l){l.effects.pulsate=function(r){return this.queue(function(){var t=l(this),e=l.effects.setMode(t,r.options.mode||"show"),i=2*(r.options.times||5)-1,s=r.duration?r.duration/2:l.fx.speeds._default/2,n=t.is(":visible"),o=0;n||(t.css("opacity",0).show(),o=1),("hide"==e&&n||"show"==e&&!n)&&i--;for(var a=0;a<i;a++)t.animate({opacity:o},s,r.options.easing),o=(o+1)%2;t.animate({opacity:o},s,r.options.easing,function(){0==o&&t.hide(),r.callback&&r.callback.apply(this,arguments)}),t.queue("fx",function(){t.dequeue()}).dequeue()})}}(jQuery),function(f){f.effects.puff=function(o){return this.queue(function(){var t=f(this),e=f.effects.setMode(t,o.options.mode||"hide"),i=parseInt(o.options.percent,10)||150,s=i/100,n={height:t.height(),width:t.width()};f.extend(o.options,{fade:!0,mode:e,percent:"hide"==e?i:100,from:"hide"==e?n:{height:n.height*s,width:n.width*s}}),t.effect("scale",o.options,o.duration,o.callback),t.dequeue()})},f.effects.scale=function(r){return this.queue(function(){var t=f(this),e=f.extend(!0,{},r.options),i=f.effects.setMode(t,r.options.mode||"effect"),s=parseInt(r.options.percent,10)||(0==parseInt(r.options.percent,10)||"hide"==i?0:100),n=r.options.direction||"both",o=r.options.origin,o=("effect"!=i&&(e.origin=o||["middle","center"],e.restore=!0),{height:t.height(),width:t.width()});t.from=r.options.from||("show"==i?{height:0,width:0}:o);var a="horizontal"!=n?s/100:1,n="vertical"!=n?s/100:1;t.to={height:o.height*a,width:o.width*n},r.options.fade&&("show"==i&&(t.from.opacity=0,t.to.opacity=1),"hide"==i)&&(t.from.opacity=1,t.to.opacity=0),e.from=t.from,e.to=t.to,e.mode=i,t.effect("size",e,r.duration,r.callback),t.dequeue()})},f.effects.size=function(p){return this.queue(function(){var s,t=f(this),e=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],n=["fontSize"],o=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],a=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],r=f.effects.setMode(t,p.options.mode||"effect"),l=p.options.restore||!1,h=p.options.scale||"both",c=p.options.origin,d={height:t.height(),width:t.width()},u=(t.from=p.options.from||d,t.to=p.options.to||d,c&&(c=f.effects.getBaseline(c,d),t.from.top=(d.height-t.from.height)*c.y,t.from.left=(d.width-t.from.width)*c.x,t.to.top=(d.height-t.to.height)*c.y,t.to.left=(d.width-t.to.width)*c.x),{from:{y:t.from.height/d.height,x:t.from.width/d.width},to:{y:t.to.height/d.height,x:t.to.width/d.width}});"box"!=h&&"both"!=h||(u.from.y!=u.to.y&&(e=e.concat(o),t.from=f.effects.setTransition(t,o,u.from.y,t.from),t.to=f.effects.setTransition(t,o,u.to.y,t.to)),u.from.x!=u.to.x&&(e=e.concat(a),t.from=f.effects.setTransition(t,a,u.from.x,t.from),t.to=f.effects.setTransition(t,a,u.to.x,t.to))),"content"!=h&&"both"!=h||u.from.y==u.to.y||(e=e.concat(n),t.from=f.effects.setTransition(t,n,u.from.y,t.from),t.to=f.effects.setTransition(t,n,u.to.y,t.to)),f.effects.save(t,l?e:i),t.show(),f.effects.createWrapper(t),t.css("overflow","hidden").css(t.from),"content"!=h&&"both"!=h||(o=o.concat(["marginTop","marginBottom"]).concat(n),a=a.concat(["marginLeft","marginRight"]),s=e.concat(o).concat(a),t.find("*[width]").each(function(){var t=f(this);l&&f.effects.save(t,s);var e=t.height(),i=t.width();t.from={height:e*u.from.y,width:i*u.from.x},t.to={height:e*u.to.y,width:i*u.to.x},u.from.y!=u.to.y&&(t.from=f.effects.setTransition(t,o,u.from.y,t.from),t.to=f.effects.setTransition(t,o,u.to.y,t.to)),u.from.x!=u.to.x&&(t.from=f.effects.setTransition(t,a,u.from.x,t.from),t.to=f.effects.setTransition(t,a,u.to.x,t.to)),t.css(t.from),t.animate(t.to,p.duration,p.options.easing,function(){l&&f.effects.restore(t,s)})})),t.animate(t.to,{queue:!1,duration:p.duration,easing:p.options.easing,complete:function(){0===t.to.opacity&&t.css("opacity",t.from.opacity),"hide"==r&&t.hide(),f.effects.restore(t,l?e:i),f.effects.removeWrapper(t),p.callback&&p.callback.apply(this,arguments),t.dequeue()}})})}}(jQuery),function(u){u.effects.shake=function(d){return this.queue(function(){var t=u(this),e=["position","top","bottom","left","right"],i=(u.effects.setMode(t,d.options.mode||"effect"),d.options.direction||"left"),s=d.options.distance||20,n=d.options.times||3,o=d.duration||d.options.duration||140,a=(u.effects.save(t,e),t.show(),u.effects.createWrapper(t),"up"==i||"down"==i?"top":"left"),i="up"==i||"left"==i?"pos":"neg",r={},l={},h={};r[a]=("pos"==i?"-=":"+=")+s,l[a]=("pos"==i?"+=":"-=")+2*s,h[a]=("pos"==i?"-=":"+=")+2*s,t.animate(r,o,d.options.easing);for(var c=1;c<n;c++)t.animate(l,o,d.options.easing).animate(h,o,d.options.easing);t.animate(l,o,d.options.easing).animate(r,o/2,d.options.easing,function(){u.effects.restore(t,e),u.effects.removeWrapper(t),d.callback&&d.callback.apply(this,arguments)}),t.queue("fx",function(){t.dequeue()}),t.dequeue()})}}(jQuery),function(l){l.effects.slide=function(r){return this.queue(function(){var t=l(this),e=["position","top","bottom","left","right"],i=l.effects.setMode(t,r.options.mode||"show"),s=r.options.direction||"left",n=(l.effects.save(t,e),t.show(),l.effects.createWrapper(t).css({overflow:"hidden"}),"up"==s||"down"==s?"top":"left"),s="up"==s||"left"==s?"pos":"neg",o=r.options.distance||("top"==n?t.outerHeight(!0):t.outerWidth(!0)),a=("show"==i&&t.css(n,"pos"==s?isNaN(o)?"-"+o:-o:o),{});a[n]=("show"==i?"pos"==s?"+=":"-=":"pos"==s?"-=":"+=")+o,t.animate(a,{queue:!1,duration:r.duration,easing:r.options.easing,complete:function(){"hide"==i&&t.hide(),l.effects.restore(t,e),l.effects.removeWrapper(t),r.callback&&r.callback.apply(this,arguments),t.dequeue()}})})}}(jQuery),function(o){o.effects.transfer=function(n){return this.queue(function(){var t=o(this),e=o(n.options.to),i=e.offset(),i={top:i.top,left:i.left,height:e.innerHeight(),width:e.innerWidth()},e=t.offset(),s=o('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(n.options.className).css({top:e.top,left:e.left,height:t.innerHeight(),width:t.innerWidth(),position:"absolute"}).animate(i,n.duration,n.options.easing,function(){s.remove(),n.callback&&n.callback.apply(t[0],arguments),t.dequeue()})})}}(jQuery),function(c){c.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t,e,i=this,s=i.options;i.running=0,i.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),i.headers=i.element.find(s.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){s.disabled||c(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){s.disabled||c(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){s.disabled||c(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){s.disabled||c(this).removeClass("ui-state-focus")}),i.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),s.navigation&&(t=i.element.find("a").filter(s.navigationFilter).eq(0)).length&&((e=t.closest(".ui-accordion-header")).length?i.active=e:i.active=t.closest(".ui-accordion-content").prev()),i.active=i._findActive(i.active||s.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),i.active.next().addClass("ui-accordion-content-active"),i._createIcons(),i.resize(),i.element.attr("role","tablist"),i.headers.attr("role","tab").bind("keydown.accordion",function(t){return i._keydown(t)}).next().attr("role","tabpanel"),i.headers.not(i.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),i.active.length?i.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):i.headers.eq(0).attr("tabIndex",0),c.browser.safari||i.headers.find("a").attr("tabIndex",-1),s.event&&i.headers.bind(s.event.split(" ").join(".accordion ")+".accordion",function(t){i._clickHandler.call(i,t,this),t.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(c("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options,e=(this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons(),this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled"));return(t.autoHeight||t.fillHeight)&&e.css("height",""),c.Widget.prototype.destroy.call(this)},_setOption:function(t,e){c.Widget.prototype._setOption.apply(this,arguments),"active"==t&&this.activate(e),"icons"==t&&(this._destroyIcons(),e)&&this._createIcons(),"disabled"==t&&this.headers.add(this.headers.next())[e?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(!(this.options.disabled||t.altKey||t.ctrlKey)){var e=c.ui.keyCode,i=this.headers.length,s=this.headers.index(t.target),n=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:n=this.headers[(s+1)%i];break;case e.LEFT:case e.UP:n=this.headers[(s-1+i)%i];break;case e.SPACE:case e.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return!n||(c(t.target).attr("tabIndex",-1),c(n).attr("tabIndex",0),n.focus(),!1)}},resize:function(){var t,e,i=this.options;return i.fillSpace?(c.browser.msie&&(e=this.element.parent().css("overflow"),this.element.parent().css("overflow","hidden")),t=this.element.parent().height(),c.browser.msie&&this.element.parent().css("overflow",e),this.headers.each(function(){t-=c(this).outerHeight(!0)}),this.headers.next().each(function(){c(this).height(Math.max(0,t-c(this).innerHeight()+c(this).height()))}).css("overflow","auto")):i.autoHeight&&(t=0,this.headers.next().each(function(){t=Math.max(t,c(this).height("").height())}).height(t)),this},activate:function(t){this.options.active=t;t=this._findActive(t)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?"number"==typeof t?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):!1===t?c([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,e){var i,s,n,o,a,r=this.options;r.disabled||(t.target?(e=(t=c(t.currentTarget||e))[0]===this.active[0],r.active=(!r.collapsible||!e)&&this.headers.index(t),this.running||!r.collapsible&&e||(i=this.active,a=t.next(),n=this.active.next(),o={options:r,newHeader:e&&r.collapsible?c([]):t,oldHeader:this.active,newContent:e&&r.collapsible?c([]):a,oldContent:n},s=this.headers.index(this.active[0])>this.headers.index(t[0]),this.active=e?c([]):t,this._toggle(a,n,o,e,s),i.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),e)||(t.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(r.icons.header).addClass(r.icons.headerSelected),t.next().addClass("ui-accordion-content-active"))):r.collapsible&&(this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active"),n=this.active.next(),o={options:r,newHeader:c([]),oldHeader:r.active,newContent:c([]),oldContent:n},a=this.active=c([]),this._toggle(a,n,o)))},_toggle:function(t,e,i,s,n){function o(){if(l)return l._completed.apply(l,arguments)}var a,r,l=this,h=l.options;l.toShow=t,l.toHide=e,l.data=i;l._trigger("changestart",null,l.data),l.running=(0===e.size()?t:e).size(),h.animated?(i={},i=h.collapsible&&s?{toShow:c([]),toHide:e,complete:o,down:n,autoHeight:h.autoHeight||h.fillSpace}:{toShow:t,toHide:e,complete:o,down:n,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=c.isFunction(h.proxied)?h.proxied(i):h.proxied,h.duration=c.isFunction(h.proxiedDuration)?h.proxiedDuration(i):h.proxiedDuration,n=c.ui.accordion.animations,a=h.duration,n[r=!(r=h.animated)||n[r]||c.easing[r]?r:"slide"]||(n[r]=function(t){this.slide(t,{easing:r,duration:a||700})}),n[r](i)):(h.collapsible&&s?t.toggle():(e.hide(),t.show()),o(!0)),e.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(t){this.running=t?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),c.extend(c.ui.accordion,{version:"1.8.24",animations:{slide:function(s,t){var e,i,n,o,a;(s=c.extend({easing:"swing",duration:300},s,t)).toHide.size()?s.toShow.size()?(e=s.toShow.css("overflow"),i=0,n={},o={},t=s.toShow,a=t[0].style.width,t.width(t.parent().width()-parseFloat(t.css("paddingLeft"))-parseFloat(t.css("paddingRight"))-(parseFloat(t.css("borderLeftWidth"))||0)-(parseFloat(t.css("borderRightWidth"))||0)),c.each(["height","paddingTop","paddingBottom"],function(t,e){o[e]="hide";var i=(""+c.css(s.toShow[0],e)).match(/^([\d+-.]+)(.*)$/);n[e]={value:i[1],unit:i[2]||"px"}}),s.toShow.css({height:0,overflow:"hidden"}).show(),s.toHide.filter(":hidden").each(s.complete).end().filter(":visible").animate(o,{step:function(t,e){"height"==e.prop&&(i=e.end-e.start==0?0:(e.now-e.start)/(e.end-e.start)),s.toShow[0].style[e.prop]=i*n[e.prop].value+n[e.prop].unit},duration:s.duration,easing:s.easing,complete:function(){s.autoHeight||s.toShow.css("height",""),s.toShow.css({width:a,overflow:e}),s.complete()}})):s.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},s):s.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},s)},bounceslide:function(t){this.slide(t,{easing:t.down?"easeOutBounce":"swing",duration:t.down?1e3:200})}}})}(jQuery),function(a){var s=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var i,n=this,o=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(t){if(!n.options.disabled&&!n.element.propAttr("readOnly")){i=!1;var e=a.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:n._move("previousPage",t);break;case e.PAGE_DOWN:n._move("nextPage",t);break;case e.UP:n._keyEvent("previous",t);break;case e.DOWN:n._keyEvent("next",t);break;case e.ENTER:case e.NUMPAD_ENTER:n.menu.active&&(i=!0,t.preventDefault());case e.TAB:n.menu.active&&n.menu.select(t);break;case e.ESCAPE:n.element.val(n.term),n.close(t);break;default:clearTimeout(n.searching),n.searching=setTimeout(function(){n.term!=n.element.val()&&(n.selectedItem=null,n.search(null,t))},n.options.delay)}}}).bind("keypress.autocomplete",function(t){i&&(i=!1,t.preventDefault())}).bind("focus.autocomplete",function(){n.options.disabled||(n.selectedItem=null,n.previous=n.element.val())}).bind("blur.autocomplete",function(t){n.options.disabled||(clearTimeout(n.searching),n.closing=setTimeout(function(){n.close(t),n._change(t)},150))}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",o)[0]).mousedown(function(t){var e=n.menu.element[0];a(t.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(t){t.target===n.element[0]||t.target===e||a.ui.contains(e,t.target)||n.close()})},1),setTimeout(function(){clearTimeout(n.closing)},13)}).menu({focus:function(t,e){e=e.item.data("item.autocomplete");!1!==n._trigger("focus",t,{item:e})&&/^key/.test(t.originalEvent.type)&&n.element.val(e.value)},selected:function(t,e){var i=e.item.data("item.autocomplete"),s=n.previous;n.element[0]!==o.activeElement&&(n.element.focus(),n.previous=s,setTimeout(function(){n.previous=s,n.selectedItem=i},1)),!1!==n._trigger("select",t,{item:i})&&n.element.val(i.value),n.term=n.element.val(),n.close(t),n.selectedItem=i},blur:function(t,e){n.menu.element.is(":visible")&&n.element.val()!==n.term&&n.element.val(n.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),n.beforeunloadHandler=function(){n.element.removeAttr("autocomplete")},a(window).bind("beforeunload",n.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(t,e){a.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(a(e||"body",this.element[0].ownerDocument)[0]),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_initSource:function(){var i,e,s=this;a.isArray(this.options.source)?(i=this.options.source,this.source=function(t,e){e(a.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(e=this.options.source,this.source=function(t,i){s.xhr&&s.xhr.abort(),s.xhr=a.ajax({url:e,data:t,dataType:"json",success:function(t,e){i(t)},error:function(){i([])}})}):this.source=this.options.source},search:function(t,e){return t=null!=t?t:this.element.val(),this.term=this.element.val(),t.length<this.options.minLength?this.close(e):(clearTimeout(this.closing),!1!==this._trigger("search",e)?this._search(t):void 0)},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:t},this._response())},_response:function(){var e=this,i=++s;return function(t){i===s&&e.__response(t),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(t){!this.options.disabled&&t&&t.length?(t=this._normalize(t),this._suggest(t),this._trigger("open")):this.close()},close:function(t){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",t))},_change:function(t){this.previous!==this.element.val()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:a.map(t,function(t){return"string"==typeof t?{label:t,value:t}:a.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var e=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(e,t),this.menu.deactivate(),this.menu.refresh(),e.show(),this._resizeMenu(),e.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(i,t){var s=this;a.each(t,function(t,e){s._renderItem(i,e)})},_renderItem:function(t,e){return a("<li></li>").data("item.autocomplete",e).append(a("<a></a>").text(e.label)).appendTo(t)},_move:function(t,e){this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(t)||this.menu.last()&&/^next/.test(t)?(this.element.val(this.term),this.menu.deactivate()):this.menu[t](e):this.search(null,e)},widget:function(){return this.menu.element},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,e){var i=new RegExp(a.ui.autocomplete.escapeRegex(e),"i");return a.grep(t,function(t){return i.test(t.label||t.value||t)})}})}(jQuery),function(n){n.widget("ui.menu",{_create:function(){var e=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(t){n(t.target).closest(".ui-menu-item a").length&&(t.preventDefault(),e.select(t))}),this.refresh()},refresh:function(){var e=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(t){e.activate(t,n(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(t,e){var i,s,n;this.deactivate(),this.hasScroll()&&(i=e.offset().top-this.element.offset().top,s=this.element.scrollTop(),n=this.element.height(),i<0?this.element.scrollTop(s+i):n<=i&&this.element.scrollTop(s+i-n+e.height())),this.active=e.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",t,{item:e})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(t){this.move("next",".ui-menu-item:first",t)},previous:function(t){this.move("prev",".ui-menu-item:last",t)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(t,e,i){this.active&&(t=this.active[t+"All"](".ui-menu-item").eq(0)).length?this.activate(i,t):this.activate(i,this.element.children(e))},nextPage:function(t){var e,i,s;this.hasScroll()?!this.active||this.last()?this.activate(t,this.element.children(".ui-menu-item:first")):(e=this.active.offset().top,i=this.element.height(),(s=this.element.children(".ui-menu-item").filter(function(){var t=n(this).offset().top-e-i+n(this).height();return t<10&&-10<t})).length||(s=this.element.children(".ui-menu-item:last")),this.activate(t,s)):this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){var e,i,s;this.hasScroll()?!this.active||this.first()?this.activate(t,this.element.children(".ui-menu-item:last")):(e=this.active.offset().top,i=this.element.height(),(s=this.element.children(".ui-menu-item").filter(function(){var t=n(this).offset().top-e+i-n(this).height();return t<10&&-10<t})).length||(s=this.element.children(".ui-menu-item:first")),this.activate(t,s)):this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[n.fn.prop?"prop":"attr"]("scrollHeight")},select:function(t){this._trigger("selected",t,{item:this.active})}})}(jQuery),function(o){function a(){var t=o(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)}function r(t){var e=t.name,i=t.form,s=o([]);return s=e?i?o(i).find("[name='"+e+"']"):o("[name='"+e+"']",t.ownerDocument).filter(function(){return!this.form}):s}var l,h,c,d,u="ui-button ui-widget ui-state-default ui-corner-all",p="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only";o.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",a),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,i=this.options,t="checkbox"===this.type||"radio"===this.type,s="ui-state-hover"+(t?"":" ui-state-active"),n="ui-state-focus";null===i.label&&(i.label=this.buttonElement.html()),this.buttonElement.addClass(u).attr("role","button").bind("mouseenter.button",function(){i.disabled||(o(this).addClass("ui-state-hover"),this===l&&o(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){i.disabled||o(this).removeClass(s)}).bind("click.button",function(t){i.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus.button",function(){e.buttonElement.addClass(n)}).bind("blur.button",function(){e.buttonElement.removeClass(n)}),t&&(this.element.bind("change.button",function(){d||e.refresh()}),this.buttonElement.bind("mousedown.button",function(t){i.disabled||(d=!1,h=t.pageX,c=t.pageY)}).bind("mouseup.button",function(t){i.disabled||h===t.pageX&&c===t.pageY||(d=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){if(i.disabled||d)return!1;o(this).toggleClass("ui-state-active"),e.buttonElement.attr("aria-pressed",e.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(i.disabled||d)return!1;o(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var t=e.element[0];r(t).not(t).map(function(){return o(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(i.disabled)return!1;o(this).addClass("ui-state-active"),l=this,o(document).one("mouseup",function(){l=null})}).bind("mouseup.button",function(){if(i.disabled)return!1;o(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){if(i.disabled)return!1;t.keyCode!=o.ui.keyCode.SPACE&&t.keyCode!=o.ui.keyCode.ENTER||o(this).addClass("ui-state-active")}).bind("keyup.button",function(){o(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===o.ui.keyCode.SPACE&&o(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var t,e;this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().filter(":last"),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=(e.length?e:this.element).siblings(),this.buttonElement=e.filter(t),this.buttonElement.length)||(this.buttonElement=e.find(t)),this.element.addClass("ui-helper-hidden-accessible"),(e=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",e)):this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(u+" ui-state-hover ui-state-active  "+p).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),o.Widget.prototype.destroy.call(this)},_setOption:function(t,e){o.Widget.prototype._setOption.apply(this,arguments),"disabled"===t?e?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1):this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?r(this.element[0]).each(function(){o(this).is(":checked")?o(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):o(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){var t,e,i,s,n;"input"===this.type?this.options.label&&this.element.val(this.options.label):(t=this.buttonElement.removeClass(p),e=o("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=(i=this.options.icons).primary&&i.secondary,n=[],i.primary||i.secondary?(this.options.text&&n.push("ui-button-text-icon"+(s?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(n.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle)||t.attr("title",e)):n.push("ui-button-text-only"),t.addClass(n.join(" ")))}}),o.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),o.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return o(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return o(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),o.Widget.prototype.destroy.call(this)}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.bind("mouseout",function(t){t=$(t.target).closest(i);t.length&&t.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(t){t=$(t.target).closest(i);!$.datepicker._isDisabledDatepicker((instActive.inline?e.parent():instActive.input)[0])&&t.length&&(t.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t.addClass("ui-state-hover"),t.hasClass("ui-datepicker-prev")&&t.addClass("ui-datepicker-prev-hover"),t.hasClass("ui-datepicker-next"))&&t.addClass("ui-datepicker-next-hover")})}function extendRemove(t,e){for(var i in $.extend(t,e),e)null!=e[i]&&e[i]!=undefined||(t[i]=e[i])}function isArray(t){!t||$.browser.safari&&"object"==typeof t&&t.length||t.constructor&&t.constructor.toString().match(/\Array\(\)/)}$.extend($.ui,{datepicker:{version:"1.8.24"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return extendRemove(this._defaults,t||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null,attrName;for(attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName,inst=(target.id||(this.uuid+=1,target.id="dp"+this.uuid),this._newInst($(target),inline));inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(t,s){var e=$(t);s.append=$([]),s.trigger=$([]),e.hasClass(this.markerClassName)||(this._attachments(e,s),e.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(t,e,i){s.settings[e]=i}).bind("getData.datepicker",function(t,e){return this._get(s,e)}),this._autoSize(s),$.data(t,PROP_NAME,s),s.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i,s=this._get(e,"appendText"),n=this._get(e,"isRTL"),s=(e.append&&e.append.remove(),s&&(e.append=$('<span class="'+this._appendClass+'">'+s+"</span>"),t[n?"before":"after"](e.append)),t.unbind("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),this._get(e,"showOn"));"focus"!=s&&"both"!=s||t.focus(this._showDatepicker),"button"!=s&&"both"!=s||(s=this._get(e,"buttonText"),i=this._get(e,"buttonImage"),e.trigger=$(this._get(e,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:i,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==i?s:$("<img/>").attr({src:i,alt:s,title:s}))),t[n?"before":"after"](e.trigger),e.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==t[0]?$.datepicker._hideDatepicker():($.datepicker._datepickerShowing&&$.datepicker._lastInput!=t[0]&&$.datepicker._hideDatepicker(),$.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){var e,i,s;this._get(t,"autoSize")&&!t.inline&&(e=new Date(2009,11,20),(i=this._get(t,"dateFormat")).match(/[DM]/)&&(e.setMonth((s=function(t){for(var e=0,i=0,s=0;s<t.length;s++)t[s].length>e&&(e=t[s].length,i=s);return i})(this._get(t,i.match(/MM/)?"monthNames":"monthNamesShort"))),e.setDate(s(this._get(t,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-e.getDay())),t.input.attr("size",this._formatDate(t,e).length))},_inlineDatepicker:function(t,s){var e=$(t);e.hasClass(this.markerClassName)||(e.addClass(this.markerClassName).append(s.dpDiv).bind("setData.datepicker",function(t,e,i){s.settings[e]=i}).bind("getData.datepicker",function(t,e){return this._get(s,e)}),$.data(t,PROP_NAME,s),this._setDate(s,this._getDefaultDate(s),!0),this._updateDatepicker(s),this._updateAlternate(s),s.settings.disabled&&this._disableDatepicker(t),s.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,s,n){var o,a=this._dialogInst;return a||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),(a=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},$.data(this._dialogInput[0],PROP_NAME,a)),extendRemove(a.settings,s||{}),e=e&&e.constructor==Date?this._formatDate(a,e):e,this._dialogInput.val(e),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,this._pos||(o=document.documentElement.clientWidth,s=document.documentElement.clientHeight,e=document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[o/2-100+e,s/2-150+n]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,a),this},_destroyDatepicker:function(t){var e,i=$(t),s=$.data(t,PROP_NAME);i.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),$.removeData(t,PROP_NAME),"input"==e?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=e&&"span"!=e||i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var t,i=$(e),s=$.data(e,PROP_NAME);i.hasClass(this.markerClassName)&&("input"==(t=e.nodeName.toLowerCase())?(e.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!=t&&"span"!=t||((s=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")),this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}))},_disableDatepicker:function(e){var t,i=$(e),s=$.data(e,PROP_NAME);i.hasClass(this.markerClassName)&&("input"==(t=e.nodeName.toLowerCase())?(e.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!=t&&"span"!=t||((s=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")),this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(t)for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]==t)return!0;return!1},_getInst:function(t){try{return $.data(t,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var s=this._getInst(t);if(2==arguments.length&&"string"==typeof e)return"defaults"==e?$.extend({},$.datepicker._defaults):s?"all"==e?$.extend({},s.settings):this._get(s,e):null;var n,o,a,r=e||{};"string"==typeof e&&((r={})[e]=i),s&&(this._curInst==s&&this._hideDatepicker(),n=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(s,"min"),a=this._getMinMaxDate(s,"max"),extendRemove(s.settings,r),null!==o&&r.dateFormat!==undefined&&r.minDate===undefined&&(s.settings.minDate=this._formatDate(s,o)),null!==a&&r.dateFormat!==undefined&&r.maxDate===undefined&&(s.settings.maxDate=this._formatDate(s,a)),this._attachments($(t),s),this._autoSize(s),this._setDate(s,n),this._updateAlternate(s),this._updateDatepicker(s))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){t=this._getInst(t);t&&this._updateDatepicker(t)},_setDateDatepicker:function(t,e){t=this._getInst(t);t&&(this._setDate(t,e),this._updateDatepicker(t),this._updateAlternate(t))},_getDateDatepicker:function(t,e){t=this._getInst(t);return t&&!t.inline&&this._setDateFromField(t,e),t?this._getDate(t):null},_doKeyDown:function(t){var e=$.datepicker._getInst(t.target),i=!0,s=e.dpDiv.is(".ui-datepicker-rtl");if(e._keyEvent=!0,$.datepicker._datepickerShowing)switch(t.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var n,o=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",e.dpDiv),o=(o[0]&&$.datepicker._selectDay(t.target,e.selectedMonth,e.selectedYear,o[0]),$.datepicker._get(e,"onSelect"));return o?(n=$.datepicker._formatDate(e),o.apply(e.input?e.input[0]:null,[n,e])):$.datepicker._hideDatepicker(),!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&$.datepicker._clearDate(t.target),i=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&$.datepicker._gotoToday(t.target),i=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,s?1:-1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,-7,"D"),i=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,s?-1:1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,7,"D"),i=t.ctrlKey||t.metaKey;break;default:i=!1}else 36==t.keyCode&&t.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,i=$.datepicker._getInst(t.target);if($.datepicker._get(i,"constrainInput"))return i=$.datepicker._possibleChars($.datepicker._get(i,"dateFormat")),e=String.fromCharCode(t.charCode==undefined?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||e<" "||!i||-1<i.indexOf(e)},_doKeyUp:function(t){t=$.datepicker._getInst(t.target);if(t.input.val()!=t.lastVal)try{$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t))&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(t){$.datepicker.log(t)}return!0},_showDatepicker:function(t){var i,e,s,n,o;"input"!=(t=t.target||t).nodeName.toLowerCase()&&(t=$("input",t.parentNode)[0]),$.datepicker._isDisabledDatepicker(t)||$.datepicker._lastInput==t||(i=$.datepicker._getInst(t),$.datepicker._curInst&&$.datepicker._curInst!=i&&($.datepicker._curInst.dpDiv.stop(!0,!0),i)&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]),!1===(s=(s=$.datepicker._get(i,"beforeShow"))?s.apply(t,[t,i]):{}))||(extendRemove(i.settings,s),i.lastVal=null,$.datepicker._lastInput=t,$.datepicker._setDateFromField(i),$.datepicker._inDialog&&(t.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(t),$.datepicker._pos[1]+=t.offsetHeight),e=!1,$(t).parents().each(function(){return!(e|="fixed"==$(this).css("position"))}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop),s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]},$.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(i),s=$.datepicker._checkOffset(i,s,e),i.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),i.inline)||(s=$.datepicker._get(i,"showAnim"),n=$.datepicker._get(i,"duration"),o=function(){var t,e=i.dpDiv.find("iframe.ui-datepicker-cover");e.length&&(t=$.datepicker._getBorders(i.dpDiv),e.css({left:-t[0],top:-t[1],width:i.dpDiv.outerWidth(),height:i.dpDiv.outerHeight()}))},i.dpDiv.zIndex($(t).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[s]?i.dpDiv.show(s,$.datepicker._get(i,"showOptions"),n,o):i.dpDiv[s||"show"](s?n:null,o),s&&n||o(),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),$.datepicker._curInst=i)},_updateDatepicker:function(t){this.maxRows=4;var e,i=$.datepicker._getBorders(t.dpDiv),s=((instActive=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("iframe.ui-datepicker-cover")),s=(s.length&&s.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()}),t.dpDiv.find("."+this._dayOverClass+" a").mouseover(),this._getNumberOfMonths(t)),i=s[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<i&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",17*i+"em"),t.dpDiv[(1!=s[0]||1!=s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t==$.datepicker._curInst&&$.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!=document.activeElement&&t.input.focus(),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_getBorders:function(t){function e(t){return{thin:1,medium:2,thick:3}[t]||t}return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(t,e,i){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,r=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return e.left-=this._get(t,"isRTL")?s-o:0,e.left-=i&&e.left==t.input.offset().left?$(document).scrollLeft():0,e.top-=i&&e.top==t.input.offset().top+a?$(document).scrollTop():0,e.left-=Math.min(e.left,e.left+s>r&&s<r?Math.abs(e.left+s-r):0),e.top-=Math.min(e.top,e.top+n>l&&n<l?Math.abs(n+a):0),e},_findPos:function(t){for(var e=this._getInst(t),i=this._get(e,"isRTL");t&&("hidden"==t.type||1!=t.nodeType||$.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];e=$(t).offset();return[e.left,e.top]},_hideDatepicker:function(t){var e,i,s=this._curInst;!s||t&&s!=$.data(t,PROP_NAME)||this._datepickerShowing&&(t=this._get(s,"showAnim"),i=this._get(s,"duration"),e=function(){$.datepicker._tidyDialog(s)},$.effects&&$.effects[t]?s.dpDiv.hide(t,$.datepicker._get(s,"showOptions"),i,e):s.dpDiv["slideDown"==t?"slideUp":"fadeIn"==t?"fadeOut":"hide"](t?i:null,e),t||e(),this._datepickerShowing=!1,(i=this._get(s,"onClose"))&&i.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI)&&($.unblockUI(),$("body").append(this.dpDiv)),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){var e;$.datepicker._curInst&&(t=$(t.target),e=$.datepicker._getInst(t[0]),!(t[0].id==$.datepicker._mainDivId||0!=t.parents("#"+$.datepicker._mainDivId).length||t.hasClass($.datepicker.markerClassName)||t.closest("."+$.datepicker._triggerClass).length||!$.datepicker._datepickerShowing||$.datepicker._inDialog&&$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=e)&&$.datepicker._hideDatepicker()},_adjustDate:function(t,e,i){var t=$(t),s=this._getInst(t[0]);this._isDisabledDatepicker(t[0])||(this._adjustInstDate(s,e+("M"==i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(t){var e,t=$(t),i=this._getInst(t[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(e=new Date,i.selectedDay=e.getDate(),i.drawMonth=i.selectedMonth=e.getMonth(),i.drawYear=i.selectedYear=e.getFullYear()),this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(t,e,i){var t=$(t),s=this._getInst(t[0]);s["selected"+("M"==i?"Month":"Year")]=s["draw"+("M"==i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(t)},_selectDay:function(t,e,i,s){var n=$(t);$(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(n[0])||((n=this._getInst(n[0])).selectedDay=n.currentDay=$("a",s).html(),n.selectedMonth=n.currentMonth=e,n.selectedYear=n.currentYear=i,this._selectDate(t,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(t){t=$(t);this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(t,e){var t=$(t),t=this._getInst(t[0]),i=(e=null!=e?e:this._formatDate(t),t.input&&t.input.val(e),this._updateAlternate(t),this._get(t,"onSelect"));i?i.apply(t.input?t.input[0]:null,[e,t]):t.input&&t.input.trigger("change"),t.inline?this._updateDatepicker(t):(this._hideDatepicker(),this._lastInput=t.input[0],"object"!=typeof t.input[0]&&t.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var e,i,s,n=this._get(t,"altField");n&&(e=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),s=this.formatDate(e,i,this._getFormatConfig(t)),$(n).each(function(){$(this).val(s)}))},noWeekends:function(t){t=t.getDay();return[0<t&&t<6,""]},iso8601Week:function(t){var t=new Date(t.getTime()),e=(t.setDate(t.getDate()+4-(t.getDay()||7)),t.getTime());return t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1},parseDate:function(e,n,t){if(null==e||null==n)throw"Invalid arguments";if(""==(n="object"==typeof n?n.toString():n+""))return null;function i(t){var e=m(t),e=new RegExp("^\\d{1,"+("@"==t?14:"!"==t?20:"y"==t&&e?4:"o"==t?3:2)+"}");if(t=n.substring(v).match(e))return v+=t[0].length,parseInt(t[0],10);throw"Missing number at position "+v}function s(t,e,i){var t=$.map(m(t)?i:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)}),s=-1;if($.each(t,function(t,e){var i=e[1];if(n.substr(v,i.length).toLowerCase()==i.toLowerCase())return s=e[0],v+=i.length,!1}),-1!=s)return s+1;throw"Unknown name at position "+v}function o(){if(n.charAt(v)!=e.charAt(b))throw"Unexpected literal at position "+v;v++}for(var a="string"!=typeof(a=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff)?a:(new Date).getFullYear()%100+parseInt(a,10),r=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,l=(t?t.dayNames:null)||this._defaults.dayNames,h=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,c=(t?t.monthNames:null)||this._defaults.monthNames,d=-1,u=-1,p=-1,f=-1,g=!1,m=function(t){t=b+1<e.length&&e.charAt(b+1)==t;return t&&b++,t},v=0,b=0;b<e.length;b++)if(g)"'"!=e.charAt(b)||m("'")?o():g=!1;else switch(e.charAt(b)){case"d":p=i("d");break;case"D":s("D",r,l);break;case"o":f=i("o");break;case"m":u=i("m");break;case"M":u=s("M",h,c);break;case"y":d=i("y");break;case"@":var _,d=(_=new Date(i("@"))).getFullYear(),u=_.getMonth()+1,p=_.getDate();break;case"!":d=(_=new Date((i("!")-this._ticksTo1970)/1e4)).getFullYear(),u=_.getMonth()+1,p=_.getDate();break;case"'":m("'")?o():g=!0;break;default:o()}if(v<n.length)throw"Extra/unparsed characters found in date: "+n.substring(v);if(-1==d?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=a?0:-100)),-1<f)for(u=1,p=f;;){var y=this._getDaysInMonth(d,u-1);if(p<=y)break;u++,p-=y}if((_=this._daylightSavingAdjust(new Date(d,u-1,p))).getFullYear()!=d||_.getMonth()+1!=u||_.getDate()!=p)throw"Invalid date";return _},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";function s(t,e,i){var s=""+e;if(h(t))for(;s.length<i;)s="0"+s;return s}function n(t,e,i,s){return(h(t)?s:i)[e]}var o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,l=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){t=u+1<e.length&&e.charAt(u+1)==t;return t&&u++,t},c="",d=!1;if(t)for(var u=0;u<e.length;u++)if(d)"'"!=e.charAt(u)||h("'")?c+=e.charAt(u):d=!1;else switch(e.charAt(u)){case"d":c+=s("d",t.getDate(),2);break;case"D":c+=n("D",t.getDay(),o,a);break;case"o":c+=s("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=s("m",t.getMonth()+1,2);break;case"M":c+=n("M",t.getMonth(),r,l);break;case"y":c+=h("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?c+="'":d=!0;break;default:c+=e.charAt(u)}return c},_possibleChars:function(e){function t(t){return(t=n+1<e.length&&e.charAt(n+1)==t)&&n++,t}for(var i="",s=!1,n=0;n<e.length;n++)if(s)"'"!=e.charAt(n)||t("'")?i+=e.charAt(n):s=!1;else switch(e.charAt(n)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":t("'")?i+="'":s=!0;break;default:i+=e.charAt(n)}return i},_get:function(t,e){return(t.settings[e]!==undefined?t.settings:this._defaults)[e]},_setDateFromField:function(t,e){if(t.input.val()!=t.lastVal){var i,s=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,o=i=this._getDefaultDate(t),a=this._getFormatConfig(t);try{o=this.parseDate(s,n,a)||i}catch(t){this.log(t),n=e?"":n}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=n?o.getDate():0,t.currentMonth=n?o.getMonth():0,t.currentYear=n?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(r,t,e){var i,s=null==t||""===t?e:"string"==typeof t?function(t){try{return $.datepicker.parseDate($.datepicker._get(r,"dateFormat"),t,$.datepicker._getFormatConfig(r))}catch(t){}for(var e=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(r):null)||new Date,i=e.getFullYear(),s=e.getMonth(),n=e.getDate(),o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=o.exec(t);a;){switch(a[2]||"d"){case"d":case"D":n+=parseInt(a[1],10);break;case"w":case"W":n+=7*parseInt(a[1],10);break;case"m":case"M":s+=parseInt(a[1],10),n=Math.min(n,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),n=Math.min(n,$.datepicker._getDaysInMonth(i,s))}a=o.exec(t)}return new Date(i,s,n)}(t):"number"==typeof t?isNaN(t)?e:(s=t,(i=new Date).setDate(i.getDate()+s),i):new Date(t.getTime());return(s=s&&"Invalid Date"==s.toString()?e:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,e=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=e.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=e.getMonth(),t.drawYear=t.selectedYear=t.currentYear=e.getFullYear(),n==t.selectedMonth&&o==t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""==t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-e,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+e,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e=new Date,e=this._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate())),i=this._get(t,"isRTL"),q=this._get(t,"showButtonPanel"),s=this._get(t,"hideIfNoPrevNext"),n=this._get(t,"navigationAsDateFormat"),o=this._getNumberOfMonths(t),a=this._get(t,"showCurrentAtPos"),r=this._get(t,"stepMonths"),l=1!=o[0]||1!=o[1],h=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(t,"min"),d=this._getMinMaxDate(t,"max"),u=t.drawMonth-a,p=t.drawYear;if(u<0&&(u+=12,p--),d)for(var f=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth()-o[0]*o[1]+1,d.getDate())),f=c&&f<c?c:f;this._daylightSavingAdjust(new Date(p,u,1))>f;)--u<0&&(u=11,p--);t.drawMonth=u,t.drawYear=p;for(var a=this._get(t,"prevText"),a=n?this.formatDate(a,this._daylightSavingAdjust(new Date(p,u-r,1)),this._getFormatConfig(t)):a,g=this._canAdjustMonth(t,-1,p,u)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+a+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+a+"</span></a>":s?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+a+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+a+"</span></a>",a=this._get(t,"nextText"),a=n?this.formatDate(a,this._daylightSavingAdjust(new Date(p,u+r,1)),this._getFormatConfig(t)):a,m=this._canAdjustMonth(t,1,p,u)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+a+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+a+"</span></a>":s?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+a+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+a+"</span></a>",r=this._get(t,"currentText"),s=this._get(t,"gotoCurrent")&&t.currentDay?h:e,r=n?this.formatDate(r,s,this._getFormatConfig(t)):r,a=t.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(t,"closeText")+"</button>",n=q?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?a:"")+(this._isInRange(t,s)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+r+"</button>":"")+(i?"":a)+"</div>":"",v=parseInt(this._get(t,"firstDay"),10),v=isNaN(v)?0:v,b=this._get(t,"showWeek"),L=this._get(t,"dayNames"),O=(this._get(t,"dayNamesShort"),this._get(t,"dayNamesMin")),j=this._get(t,"monthNames"),W=this._get(t,"monthNamesShort"),_=this._get(t,"beforeShowDay"),y=this._get(t,"showOtherMonths"),F=this._get(t,"selectOtherMonths"),w=(this._get(t,"calculateWeek")||this.iso8601Week,this._getDefaultDate(t)),x="",k=0;k<o[0];k++){var C="";this.maxRows=4;for(var D=0;D<o[1];D++){var S=this._daylightSavingAdjust(new Date(p,u,t.selectedDay)),I=" ui-corner-all",M="";if(l){if(M+='<div class="ui-datepicker-group',1<o[1])switch(D){case 0:M+=" ui-datepicker-group-first",I=" ui-corner-"+(i?"right":"left");break;case o[1]-1:M+=" ui-datepicker-group-last",I=" ui-corner-"+(i?"left":"right");break;default:M+=" ui-datepicker-group-middle",I=""}M+='">'}M+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+I+'">'+(/all|left/.test(I)&&0==k?i?m:g:"")+(/all|right/.test(I)&&0==k?i?g:m:"")+this._generateMonthYearHeader(t,u,p,c,d,0<k||0<D,j,W)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var T=b?'<th class="ui-datepicker-week-col">'+this._get(t,"weekHeader")+"</th>":"",P=0;P<7;P++){var R=(P+v)%7;T+="<th"+(5<=(P+v+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+L[R]+'">'+O[R]+"</span></th>"}M+=T+"</tr></thead><tbody>";for(var A=this._getDaysInMonth(p,u),B=(p==t.selectedYear&&u==t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,A)),(this._getFirstDayOfMonth(p,u)-v+7)%7),A=Math.ceil((B+A)/7),Y=l&&this.maxRows>A?this.maxRows:A,z=(this.maxRows=Y,this._daylightSavingAdjust(new Date(p,u,1-B))),V=0;V<Y;V++){M+="<tr>";for(var U=b?'<td class="ui-datepicker-week-col">'+this._get(t,"calculateWeek")(z)+"</td>":"",P=0;P<7;P++){var H=_?_.apply(t.input?t.input[0]:null,[z]):[!0,""],E=z.getMonth()!=u,N=E&&!F||!H[0]||c&&z<c||d&&d<z;U+='<td class="'+(5<=(P+v+6)%7?" ui-datepicker-week-end":"")+(E?" ui-datepicker-other-month":"")+(z.getTime()==S.getTime()&&u==t.selectedMonth&&t._keyEvent||w.getTime()==z.getTime()&&w.getTime()==S.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(E&&!y?"":" "+H[1]+(z.getTime()==h.getTime()?" "+this._currentClass:"")+(z.getTime()==e.getTime()?" ui-datepicker-today":""))+'"'+(E&&!y||!H[2]?"":' title="'+H[2]+'"')+(N?"":' data-handler="selectDay" data-event="click" data-month="'+z.getMonth()+'" data-year="'+z.getFullYear()+'"')+">"+(E&&!y?"&#xa0;":N?'<span class="ui-state-default">'+z.getDate()+"</span>":'<a class="ui-state-default'+(z.getTime()==e.getTime()?" ui-state-highlight":"")+(z.getTime()==h.getTime()?" ui-state-active":"")+(E?" ui-priority-secondary":"")+'" href="#">'+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z)}M+=U+"</tr>"}11<++u&&(u=0,p++),C+=M+="</tbody></table>"+(l?"</div>"+(0<o[0]&&D==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"")}x+=C}return x+=n+($.browser.msie&&parseInt($.browser.version,10)<7&&!t.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),t._keyEvent=!1,x},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var l=this._get(t,"changeMonth"),h=this._get(t,"changeYear"),c=this._get(t,"showMonthAfterYear"),d='<div class="ui-datepicker-title">',u="";if(o||!l)u+='<span class="ui-datepicker-month">'+a[e]+"</span>";else{var p=s&&s.getFullYear()==i,f=n&&n.getFullYear()==i;u+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var g=0;g<12;g++)(!p||g>=s.getMonth())&&(!f||g<=n.getMonth())&&(u+='<option value="'+g+'"'+(g==e?' selected="selected"':"")+">"+r[g]+"</option>");u+="</select>"}if(c||(d+=u+(!o&&l&&h?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!h)d+='<span class="ui-datepicker-year">'+i+"</span>";else{function m(t){t=t.match(/c[+-].*/)?i+parseInt(t.substring(1),10):t.match(/[+-].*/)?v+parseInt(t,10):parseInt(t,10);return isNaN(t)?v:t}var a=this._get(t,"yearRange").split(":"),v=(new Date).getFullYear(),b=m(a[0]),_=Math.max(b,m(a[1]||"")),b=s?Math.max(b,s.getFullYear()):b,_=n?Math.min(_,n.getFullYear()):_;for(t.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=_;b++)t.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':"")+">"+b+"</option>";t.yearshtml+="</select>",d+=t.yearshtml,t.yearshtml=null}return d+=this._get(t,"yearSuffix"),c&&(d+=(!o&&l&&h?"":"&#xa0;")+u),d+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"==i?e:0),n=t.drawMonth+("M"==i?e:0),e=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"==i?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,e)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),"M"!=i&&"Y"!=i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),t=this._getMinMaxDate(t,"max"),i=i&&e<i?i:e;return t&&t<i?t:i},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){t=this._get(t,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),i=this._daylightSavingAdjust(new Date(i,s+(e<0?e:n[0]*n[1]),1));return e<0&&i.setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())),this._isInRange(t,i)},_isInRange:function(t,e){var i=this._getMinMaxDate(t,"min"),t=this._getMinMaxDate(t,"max");return(!i||e.getTime()>=i.getTime())&&(!t||e.getTime()<=t.getTime())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:"string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);s=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}}),$.fn.datepicker=function(t){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var e=Array.prototype.slice.call(arguments,1);return"string"==typeof t&&("isDisabled"==t||"getDate"==t||"widget"==t)||"option"==t&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this].concat(e)):$.datepicker._attachDatepicker(this,t)})},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.24",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(r){var l="ui-dialog ui-widget ui-widget-content ui-corner-all ",o={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},a={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};r.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var e=r(this).css(t).offset().top;e<0&&r(this).css("top",t.top-e)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var e=this,i=e.options,t=i.title||"&#160;",s=r.ui.dialog.getTitleId(e.element),n=(e.uiDialog=r("<div></div>")).appendTo(document.body).hide().addClass(l+i.dialogClass).css({zIndex:i.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(t){i.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===r.ui.keyCode.ESCAPE&&(e.close(t),t.preventDefault())}).attr({role:"dialog","aria-labelledby":s}).mousedown(function(t){e.moveToTop(!1,t)}),o=(e.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(n),(e.uiDialogTitlebar=r("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(n)),a=r('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){a.addClass("ui-state-hover")},function(){a.removeClass("ui-state-hover")}).focus(function(){a.addClass("ui-state-focus")}).blur(function(){a.removeClass("ui-state-focus")}).click(function(t){return e.close(t),!1}).appendTo(o);(e.uiDialogTitlebarCloseText=r("<span></span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(a),r("<span></span>").addClass("ui-dialog-title").attr("id",s).html(t).prependTo(o);r.isFunction(i.beforeclose)&&!r.isFunction(i.beforeClose)&&(i.beforeClose=i.beforeclose),o.find("*").add(o).disableSelection(),i.draggable&&r.fn.draggable&&e._makeDraggable(),i.resizable&&r.fn.resizable&&e._makeResizable(),e._createButtons(i.buttons),e._isOpen=!1,r.fn.bgiframe&&n.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var t=this;return t.overlay&&t.overlay.destroy(),t.uiDialog.hide(),t.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),t.uiDialog.remove(),t.originalTitle&&t.element.attr("title",t.originalTitle),t},widget:function(){return this.uiDialog},close:function(t){var e,i,s=this;if(!1!==s._trigger("beforeClose",t))return s.overlay&&s.overlay.destroy(),s.uiDialog.unbind("keypress.ui-dialog"),s._isOpen=!1,s.options.hide?s.uiDialog.hide(s.options.hide,function(){s._trigger("close",t)}):(s.uiDialog.hide(),s._trigger("close",t)),r.ui.dialog.overlay.resize(),s.options.modal&&(e=0,r(".ui-dialog").each(function(){this!==s.uiDialog[0]&&(i=r(this).css("z-index"),isNaN(i)||(e=Math.max(e,i)))}),r.ui.dialog.maxZ=e),s},isOpen:function(){return this._isOpen},moveToTop:function(t,e){var i=this,s=i.options;return s.modal&&!t||!s.stack&&!s.modal?i._trigger("focus",e):(s.zIndex>r.ui.dialog.maxZ&&(r.ui.dialog.maxZ=s.zIndex),i.overlay&&(r.ui.dialog.maxZ+=1,i.overlay.$el.css("z-index",r.ui.dialog.overlay.maxZ=r.ui.dialog.maxZ)),t={scrollTop:i.element.scrollTop(),scrollLeft:i.element.scrollLeft()},r.ui.dialog.maxZ+=1,i.uiDialog.css("z-index",r.ui.dialog.maxZ),i.element.attr(t),i._trigger("focus",e),i)},open:function(){var t,e,i;if(!this._isOpen)return e=(t=this).options,i=t.uiDialog,t.overlay=e.modal?new r.ui.dialog.overlay(t):null,t._size(),t._position(e.position),i.show(e.show),t.moveToTop(!0),e.modal&&i.bind("keydown.ui-dialog",function(t){var e,i;if(t.keyCode===r.ui.keyCode.TAB)return e=(i=r(":tabbable",this)).filter(":first"),i=i.filter(":last"),t.target!==i[0]||t.shiftKey?t.target===e[0]&&t.shiftKey?(i.focus(1),!1):void 0:(e.focus(1),!1)}),r(t.element.find(":tabbable").get().concat(i.find(".ui-dialog-buttonpane :tabbable").get().concat(i.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t},_createButtons:function(t){var s=this,e=!1,i=r("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),n=r("<div></div>").addClass("ui-dialog-buttonset").appendTo(i);s.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof t&&null!==t&&r.each(t,function(){return!(e=!0)}),e&&(r.each(t,function(t,e){e=r.isFunction(e)?{click:e,text:t}:e;var i=r('<button type="button"></button>').click(function(){e.click.apply(s.element[0],arguments)}).appendTo(n);r.each(e,function(t,e){"click"!==t&&(t in i?i[t](e):i.attr(t,e))}),r.fn.button&&i.button()}),i.appendTo(s.uiDialog))},_makeDraggable:function(){function i(t){return{position:t.position,offset:t.offset}}var s,n=this,o=n.options,a=r(document);n.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){s="auto"===o.height?"auto":r(this).height(),r(this).height(r(this).height()).addClass("ui-dialog-dragging"),n._trigger("dragStart",t,i(e))},drag:function(t,e){n._trigger("drag",t,i(e))},stop:function(t,e){o.position=[e.position.left-a.scrollLeft(),e.position.top-a.scrollTop()],r(this).removeClass("ui-dialog-dragging").height(s),n._trigger("dragStop",t,i(e)),r.ui.dialog.overlay.resize()}})},_makeResizable:function(t){function i(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}t=void 0===t?this.options.resizable:t;var s=this,n=s.options,e=s.uiDialog.css("position"),t="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";s.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:s.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:s._minHeight(),handles:t,start:function(t,e){r(this).addClass("ui-dialog-resizing"),s._trigger("resizeStart",t,i(e))},resize:function(t,e){s._trigger("resize",t,i(e))},stop:function(t,e){r(this).removeClass("ui-dialog-resizing"),n.height=r(this).height(),n.width=r(this).width(),s._trigger("resizeStop",t,i(e)),r.ui.dialog.overlay.resize()}}).css("position",e).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(t){var e,i=[],s=[0,0];t=t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(1===(i=t.split?t.split(" "):[t[0],t[1]]).length&&(i[1]=i[0]),r.each(["left","top"],function(t,e){+i[t]===i[t]&&(s[t]=i[t],i[t]=e)}),t={my:i.join(" "),at:i.join(" "),offset:s.join(" ")}),r.extend({},r.ui.dialog.prototype.options.position,t)):r.ui.dialog.prototype.options.position,(e=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(r.extend({of:window},t)),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s={},n=!1;r.each(t,function(t,e){i._setOption(t,e),t in o&&(n=!0),t in a&&(s[t]=e)}),n&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,e){var i=this,s=i.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":i._createButtons(e);break;case"closeText":i.uiDialogTitlebarCloseText.text(""+e);break;case"dialogClass":s.removeClass(i.options.dialogClass).addClass(l+e);break;case"disabled":e?s.addClass("ui-dialog-disabled"):s.removeClass("ui-dialog-disabled");break;case"draggable":var n=s.is(":data(draggable)");n&&!e&&s.draggable("destroy"),!n&&e&&i._makeDraggable();break;case"position":i._position(e);break;case"resizable":n=s.is(":data(resizable)");n&&!e&&s.resizable("destroy"),n&&"string"==typeof e&&s.resizable("option","handles",e),n||!1===e||i._makeResizable(e);break;case"title":r(".ui-dialog-title",i.uiDialogTitlebar).html(""+(e||"&#160;"))}r.Widget.prototype._setOption.apply(i,arguments)},_size:function(){var t,e,i,s=this.options,n=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).height(),e=Math.max(0,s.minHeight-t),"auto"===s.height?r.support.minHeight?this.element.css({minHeight:e,height:"auto"}):(this.uiDialog.show(),i=this.element.css("height","auto").height(),n||this.uiDialog.hide(),this.element.height(Math.max(i,e))):this.element.height(Math.max(s.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),r.extend(r.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(t){t=t.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=r.ui.dialog.overlay.create(t)}}),r.extend(r.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:r.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),create:function(e){0===this.instances.length&&(setTimeout(function(){r.ui.dialog.overlay.instances.length&&r(document).bind(r.ui.dialog.overlay.events,function(t){if(r(t.target).zIndex()<r.ui.dialog.overlay.maxZ)return!1})},1),r(document).bind("keydown.dialog-overlay",function(t){e.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===r.ui.keyCode.ESCAPE&&(e.close(t),t.preventDefault())}),r(window).bind("resize.dialog-overlay",r.ui.dialog.overlay.resize));var t=(this.oldInstances.pop()||r("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return r.fn.bgiframe&&t.bgiframe(),this.instances.push(t),t},destroy:function(t){var e=r.inArray(t,this.instances),i=(-1!=e&&this.oldInstances.push(this.instances.splice(e,1)[0]),0===this.instances.length&&r([document,window]).unbind(".dialog-overlay"),t.remove(),0);r.each(this.instances,function(){i=Math.max(i,this.css("z-index"))}),this.maxZ=i},height:function(){var t;return r.browser.msie&&r.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))<Math.max(document.documentElement.offsetHeight,document.body.offsetHeight)?r(window).height()+"px":t+"px":r(document).height()+"px"},width:function(){var t;return r.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth))<Math.max(document.documentElement.offsetWidth,document.body.offsetWidth)?r(window).width()+"px":t+"px":r(document).width()+"px"},resize:function(){var t=r([]);r.each(r.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:r.ui.dialog.overlay.width(),height:r.ui.dialog.overlay.height()})}}),r.extend(r.ui.dialog.overlay.prototype,{destroy:function(){r.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(g){g.ui=g.ui||{};var i=/left|center|right/,s=/top|center|bottom/,m="center",v={},n=g.fn.position,o=g.fn.offset;g.fn.position=function(h){if(!h||!h.of)return n.apply(this,arguments);h=g.extend({},h);var c,d,t=g(h.of),e=t[0],u=(h.collision||"flip").split(" "),p=h.offset?h.offset.split(" "):[0,0],f=9===e.nodeType?(c=t.width(),d=t.height(),{top:0,left:0}):e.setTimeout?(c=t.width(),d=t.height(),{top:t.scrollTop(),left:t.scrollLeft()}):e.preventDefault?(h.at="left top",c=d=0,{top:h.of.pageY,left:h.of.pageX}):(c=t.outerWidth(),d=t.outerHeight(),t.offset());return g.each(["my","at"],function(){var t=(h[this]||"").split(" ");(t=1===t.length?i.test(t[0])?t.concat([m]):s.test(t[0])?[m].concat(t):[m,m]:t)[0]=i.test(t[0])?t[0]:m,t[1]=s.test(t[1])?t[1]:m,h[this]=t}),1===u.length&&(u[1]=u[0]),p[0]=parseInt(p[0],10)||0,1===p.length&&(p[1]=p[0]),p[1]=parseInt(p[1],10)||0,"right"===h.at[0]?f.left+=c:h.at[0]===m&&(f.left+=c/2),"bottom"===h.at[1]?f.top+=d:h.at[1]===m&&(f.top+=d/2),f.left+=p[0],f.top+=p[1],this.each(function(){var i,t=g(this),s=t.outerWidth(),n=t.outerHeight(),e=parseInt(g.curCSS(this,"marginLeft",!0))||0,o=parseInt(g.curCSS(this,"marginTop",!0))||0,a=s+e+(parseInt(g.curCSS(this,"marginRight",!0))||0),r=n+o+(parseInt(g.curCSS(this,"marginBottom",!0))||0),l=g.extend({},f);"right"===h.my[0]?l.left-=s:h.my[0]===m&&(l.left-=s/2),"bottom"===h.my[1]?l.top-=n:h.my[1]===m&&(l.top-=n/2),v.fractions||(l.left=Math.round(l.left),l.top=Math.round(l.top)),i={left:l.left-e,top:l.top-o},g.each(["left","top"],function(t,e){g.ui.position[u[t]]&&g.ui.position[u[t]][e](l,{targetWidth:c,targetHeight:d,elemWidth:s,elemHeight:n,collisionPosition:i,collisionWidth:a,collisionHeight:r,offset:p,my:h.my,at:h.at})}),g.fn.bgiframe&&t.bgiframe(),t.offset(g.extend(l,{using:h.using}))})},g.ui.position={fit:{left:function(t,e){var i=g(window),i=e.collisionPosition.left+e.collisionWidth-i.width()-i.scrollLeft();t.left=0<i?t.left-i:Math.max(t.left-e.collisionPosition.left,t.left)},top:function(t,e){var i=g(window),i=e.collisionPosition.top+e.collisionHeight-i.height()-i.scrollTop();t.top=0<i?t.top-i:Math.max(t.top-e.collisionPosition.top,t.top)}},flip:{left:function(t,e){var i,s,n,o;e.at[0]!==m&&(i=g(window),i=e.collisionPosition.left+e.collisionWidth-i.width()-i.scrollLeft(),s="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,n="left"===e.at[0]?e.targetWidth:-e.targetWidth,o=-2*e.offset[0],t.left+=e.collisionPosition.left<0||0<i?s+n+o:0)},top:function(t,e){var i,s,n,o;e.at[1]!==m&&(i=g(window),i=e.collisionPosition.top+e.collisionHeight-i.height()-i.scrollTop(),s="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,n="top"===e.at[1]?e.targetHeight:-e.targetHeight,o=-2*e.offset[1],t.top+=e.collisionPosition.top<0||0<i?s+n+o:0)}}},g.offset.setOffset||(g.offset.setOffset=function(t,e){/static/.test(g.curCSS(t,"position"))&&(t.style.position="relative");var i=g(t),s=i.offset(),n=parseInt(g.curCSS(t,"top",!0),10)||0,o=parseInt(g.curCSS(t,"left",!0),10)||0,n={top:e.top-s.top+n,left:e.left-s.left+o};"using"in e?e.using.call(t,n):i.css(n)},g.fn.offset=function(e){var t=this[0];return t&&t.ownerDocument?e?g.isFunction(e)?this.each(function(t){g(this).offset(e.call(this,t,g(this).offset()))}):this.each(function(){g.offset.setOffset(this,e)}):o.call(this):null}),g.curCSS||(g.curCSS=g.css);var t,e,a=document.getElementsByTagName("body")[0],r=document.createElement("div"),l=document.createElement(a?"div":"body"),h={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};for(e in a&&g.extend(h,{position:"absolute",left:"-1000px",top:"-1000px"}),h)l.style[e]=h[e];l.appendChild(r),(t=a||document.documentElement).insertBefore(l,t.firstChild),r.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",r=g(r).offset(function(t,e){return e}).offset(),l.innerHTML="",t.removeChild(l),t=r.top+r.left+(a?2e3:0),v.fractions=21<t&&t<22}(jQuery),function(i){i.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=i("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),i.Widget.prototype.destroy.apply(this,arguments)},value:function(t){return void 0===t?this._value():(this._setOption("value",t),this)},_setOption:function(t,e){"value"===t&&(this.options.value=e,this._refreshValue(),this._value()===this.options.max)&&this._trigger("complete"),i.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var t=this.options.value;return"number"!=typeof t&&(t=0),Math.min(this.options.max,Math.max(this.min,t))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var t=this.value(),e=this._percentage();this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),this.valueDiv.toggle(t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(e.toFixed(0)+"%"),this.element.attr("aria-valuenow",t)}}),i.extend(i.ui.progressbar,{version:"1.8.24"})}(jQuery),function(c){c.widget("ui.slider",c.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var o=this,t=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),i=t.values&&t.values.length||1,s=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(t.disabled?" ui-slider-disabled ui-disabled":"")),this.range=c([]),t.range&&(!0===t.range&&(t.values||(t.values=[this._valueMin(),this._valueMin()]),t.values.length)&&2!==t.values.length&&(t.values=[t.values[0],t.values[0]]),this.range=c("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:"")));for(var n=e.length;n<i;n+=1)s.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=e.add(c(s.join("")).appendTo(o.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(t){t.preventDefault()}).hover(function(){t.disabled||c(this).addClass("ui-state-hover")},function(){c(this).removeClass("ui-state-hover")}).focus(function(){t.disabled?c(this).blur():(c(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),c(this).addClass("ui-state-focus"))}).blur(function(){c(this).removeClass("ui-state-focus")}),this.handles.each(function(t){c(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(t){var e,i,s,n=c(this).data("index.ui-slider-handle");if(!o.options.disabled){switch(t.keyCode){case c.ui.keyCode.HOME:case c.ui.keyCode.END:case c.ui.keyCode.PAGE_UP:case c.ui.keyCode.PAGE_DOWN:case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(t.preventDefault(),!o._keySliding&&(o._keySliding=!0,c(this).addClass("ui-state-active"),!1===o._start(t,n)))return}switch(s=o.options.step,e=i=o.options.values&&o.options.values.length?o.values(n):o.value(),t.keyCode){case c.ui.keyCode.HOME:i=o._valueMin();break;case c.ui.keyCode.END:i=o._valueMax();break;case c.ui.keyCode.PAGE_UP:i=o._trimAlignValue(e+(o._valueMax()-o._valueMin())/5);break;case c.ui.keyCode.PAGE_DOWN:i=o._trimAlignValue(e-(o._valueMax()-o._valueMin())/5);break;case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:if(e===o._valueMax())return;i=o._trimAlignValue(e+s);break;case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(e===o._valueMin())return;i=o._trimAlignValue(e-s)}o._slide(t,n,i)}}).keyup(function(t){var e=c(this).data("index.ui-slider-handle");o._keySliding&&(o._keySliding=!1,o._stop(t,e),o._change(t,e),c(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var i,s,n,o,a,e,r=this.options;return!r.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e),s=this._valueMax()-this._valueMin()+1,(o=this).handles.each(function(t){var e=Math.abs(i-o.values(t));e<s&&(s=e,n=c(this),a=t)}),!0===r.range&&this.values(1)===r.min&&(a+=1,n=c(this.handles[a])),!1!==this._start(t,a))&&(this._mouseSliding=!0,o._handleIndex=a,n.addClass("ui-state-active").focus(),e=n.offset(),r=!c(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=r?{left:0,top:0}:{left:t.pageX-e.left-n.width()/2,top:t.pageY-e.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0)},_mouseStart:function(t){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},e=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,e),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,t="horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=t/e;return(t=1<t?1:t)<0&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),t=this._valueMin()+t*e,this._trimAlignValue(t)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n;this.options.values&&this.options.values.length?(s=this.values(e?0:1),(i=2===this.options.values.length&&!0===this.options.range&&(0===e&&s<i||1===e&&i<s)?s:i)!==this.values(e)&&((s=this.values())[e]=i,n=this._trigger("slide",t,{handle:this.handles[e],value:i,values:s}),this.values(e?0:1),!1!==n)&&this.values(e,i,!0)):i!==this.value()&&!1!==(n=this._trigger("slide",t,{handle:this.handles[e],value:i}))&&this.value(i)},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){var i;this._keySliding||this._mouseSliding||(i={handle:this.handles[e],value:this.value()},this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("change",t,i))},value:function(t){if(!arguments.length)return this._value();this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0)},values:function(t,e){var i,s,n;if(1<arguments.length)this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),this._change(null,t);else{if(!arguments.length)return this._values();if(!c.isArray(t))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,s=t,n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(s[n]),this._change(null,n);this._refreshValue()}},_setOption:function(t,e){var i,s=0;switch(c.isArray(this.options.values)&&(s=this.options.values.length),c.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":e?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;i<s;i+=1)this._change(null,i);this._animateOff=!1}},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i},_trimAlignValue:function(t){var e,i;return t<=this._valueMin()?this._valueMin():t>=this._valueMax()?this._valueMax():(e=0<this.options.step?this.options.step:1,i=t-(t=(t-this._valueMin())%e),2*Math.abs(t)>=e&&(i+=0<t?e:-e),parseFloat(i.toFixed(5)))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var i,s,t,e,n,o=this.options.range,a=this.options,r=this,l=!this._animateOff&&a.animate,h={};this.options.values&&this.options.values.length?this.handles.each(function(t,e){i=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,h["horizontal"===r.orientation?"left":"bottom"]=i+"%",c(this).stop(1,1)[l?"animate":"css"](h,a.animate),!0===r.options.range&&("horizontal"===r.orientation?(0===t&&r.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},a.animate),1===t&&r.range[l?"animate":"css"]({width:i-s+"%"},{queue:!1,duration:a.animate})):(0===t&&r.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},a.animate),1===t&&r.range[l?"animate":"css"]({height:i-s+"%"},{queue:!1,duration:a.animate}))),s=i}):(t=this.value(),e=this._valueMin(),n=this._valueMax(),i=n!==e?(t-e)/(n-e)*100:0,h["horizontal"===r.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](h,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))}}),c.extend(c.ui.slider,{version:"1.8.24"})}(jQuery),function(p){var e=0,i=0;p.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(t,e){"selected"==t?this.options.collapsible&&e==this.options.selected||this.select(e):(this.options[t]=e,this._tabify())},_tabId:function(t){return t.title&&t.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++e},_sanitizeSelector:function(t){return t.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++i);return p.cookie.apply(null,[t].concat(p.makeArray(arguments)))},_ui:function(t,e){return{tab:t,panel:e,index:this.anchors.index(t)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=p(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(t){function i(t,e){t.css("display",""),!p.support.opacity&&e.opacity&&t[0].style.removeAttribute("filter")}var o=this,a=this.options,r=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=p(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return p("a",this)[0]}),this.panels=p([]),this.anchors.each(function(t,e){var i,s=p(e).attr("href"),n=s.split("#")[0];n&&(n===location.toString().split("#")[0]||(i=p("base")[0])&&n===i.href)&&(s=e.hash,e.href=s),r.test(s)?o.panels=o.panels.add(o.element.find(o._sanitizeSelector(s))):s&&"#"!==s?(p.data(e,"href.tabs",s),p.data(e,"load.tabs",s.replace(/#.*$/,"")),n=o._tabId(e),e.href="#"+n,(i=o.element.find("#"+n)).length||(i=p(a.panelTemplate).attr("id",n).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(o.panels[t-1]||o.list)).data("destroy.tabs",!0),o.panels=o.panels.add(i)):a.disabled.push(t)}),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),void 0===a.selected?(location.hash&&this.anchors.each(function(t,e){if(e.hash==location.hash)return a.selected=t,!1}),"number"!=typeof a.selected&&a.cookie&&(a.selected=parseInt(o._cookie(),10)),"number"!=typeof a.selected&&this.lis.filter(".ui-tabs-selected").length&&(a.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),a.selected=a.selected||(this.lis.length?0:-1)):null===a.selected&&(a.selected=-1),a.selected=0<=a.selected&&this.anchors[a.selected]||a.selected<0?a.selected:0,a.disabled=p.unique(a.disabled.concat(p.map(this.lis.filter(".ui-state-disabled"),function(t,e){return o.lis.index(t)}))).sort(),-1!=p.inArray(a.selected,a.disabled)&&a.disabled.splice(p.inArray(a.selected,a.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),0<=a.selected&&this.anchors.length&&(o.element.find(o._sanitizeSelector(o.anchors[a.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(a.selected).addClass("ui-tabs-selected ui-state-active"),o.element.queue("tabs",function(){o._trigger("show",null,o._ui(o.anchors[a.selected],o.element.find(o._sanitizeSelector(o.anchors[a.selected].hash))[0]))}),this.load(a.selected)),p(window).bind("unload",function(){o.lis.add(o.anchors).unbind(".tabs"),o.lis=o.anchors=o.panels=null})):a.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[a.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),a.cookie&&this._cookie(a.selected,a.cookie);for(var e,s,n,l,h,c=0;e=this.lis[c];c++)p(e)[-1==p.inArray(c,a.disabled)||p(e).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");!1===a.cache&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==a.event&&(s=function(t,e){e.is(":not(.ui-state-disabled)")&&e.addClass("ui-state-"+t)},n=function(t,e){e.removeClass("ui-state-"+t)},this.lis.bind("mouseover.tabs",function(){s("hover",p(this))}),this.lis.bind("mouseout.tabs",function(){n("hover",p(this))}),this.anchors.bind("focus.tabs",function(){s("focus",p(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){n("focus",p(this).closest("li"))})),a.fx&&(p.isArray(a.fx)?(l=a.fx[0],h=a.fx[1]):l=h=a.fx);var d=h?function(t,e){p(t).closest("li").addClass("ui-tabs-selected ui-state-active"),e.hide().removeClass("ui-tabs-hide").animate(h,h.duration||"normal",function(){i(e,h),o._trigger("show",null,o._ui(t,e[0]))})}:function(t,e){p(t).closest("li").addClass("ui-tabs-selected ui-state-active"),e.removeClass("ui-tabs-hide"),o._trigger("show",null,o._ui(t,e[0]))},u=l?function(t,e){e.animate(l,l.duration||"normal",function(){o.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),i(e,l),o.element.dequeue("tabs")})}:function(t,e,i){o.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),o.element.dequeue("tabs")};this.anchors.bind(a.event+".tabs",function(){var t=this,e=p(t).closest("li"),i=o.panels.filter(":not(.ui-tabs-hide)"),s=o.element.find(o._sanitizeSelector(t.hash));if(e.hasClass("ui-tabs-selected")&&!a.collapsible||e.hasClass("ui-state-disabled")||e.hasClass("ui-state-processing")||o.panels.filter(":animated").length||!1===o._trigger("select",null,o._ui(this,s[0])))return this.blur(),!1;if(a.selected=o.anchors.index(this),o.abort(),a.collapsible){if(e.hasClass("ui-tabs-selected"))return a.selected=-1,a.cookie&&o._cookie(a.selected,a.cookie),o.element.queue("tabs",function(){u(t,i)}).dequeue("tabs"),this.blur(),!1;if(!i.length)return a.cookie&&o._cookie(a.selected,a.cookie),o.element.queue("tabs",function(){d(t,s)}),o.load(o.anchors.index(this)),this.blur(),!1}if(a.cookie&&o._cookie(a.selected,a.cookie),!s.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";i.length&&o.element.queue("tabs",function(){u(t,i)}),o.element.queue("tabs",function(){d(t,s)}),o.load(o.anchors.index(this)),p.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(t){return t="string"==typeof t?this.anchors.index(this.anchors.filter("[href$='"+t+"']")):t},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=p.data(this,"href.tabs"),i=(t&&(this.href=t),p(this).unbind(".tabs"));p.each(["href","load","cache"],function(t,e){i.removeData(e+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){p.data(this,"destroy.tabs")?p(this).remove():p(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(t,e,i){void 0===i&&(i=this.anchors.length);var s=this,n=this.options,e=p(n.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,e)),t=t.indexOf("#")?this._tabId(p("a",e)[0]):t.replace("#",""),o=(e.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0),s.element.find("#"+t));return(o=o.length?o:p(n.panelTemplate).attr("id",t).data("destroy.tabs",!0)).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),i>=this.lis.length?(e.appendTo(this.list),o.appendTo(this.list[0].parentNode)):(e.insertBefore(this.lis[i]),o.insertBefore(this.panels[i])),n.disabled=p.map(n.disabled,function(t,e){return i<=t?++t:t}),this._tabify(),1==this.anchors.length&&(n.selected=0,e.addClass("ui-tabs-selected ui-state-active"),o.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){s._trigger("show",null,s._ui(s.anchors[0],s.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(i){i=this._getIndex(i);var t=this.options,e=this.lis.eq(i).remove(),s=this.panels.eq(i).remove();return e.hasClass("ui-tabs-selected")&&1<this.anchors.length&&this.select(i+(i+1<this.anchors.length?1:-1)),t.disabled=p.map(p.grep(t.disabled,function(t,e){return t!=i}),function(t,e){return i<=t?--t:t}),this._tabify(),this._trigger("remove",null,this._ui(e.find("a")[0],s[0])),this},enable:function(i){i=this._getIndex(i);var t=this.options;if(-1!=p.inArray(i,t.disabled))return this.lis.eq(i).removeClass("ui-state-disabled"),t.disabled=p.grep(t.disabled,function(t,e){return t!=i}),this._trigger("enable",null,this._ui(this.anchors[i],this.panels[i])),this},disable:function(t){t=this._getIndex(t);var e=this.options;return t!=e.selected&&(this.lis.eq(t).addClass("ui-state-disabled"),e.disabled.push(t),e.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))),this},select:function(t){if(-1==(t=this._getIndex(t))){if(!this.options.collapsible||-1==this.options.selected)return this;t=this.options.selected}return this.anchors.eq(t).trigger(this.options.event+".tabs"),this},load:function(s){s=this._getIndex(s);var t,n=this,o=this.options,a=this.anchors.eq(s)[0],e=p.data(a,"load.tabs");if(this.abort(),e&&(0===this.element.queue("tabs").length||!p.data(a,"cache.tabs")))return this.lis.eq(s).addClass("ui-state-processing"),o.spinner&&(t=p("span",a)).data("label.tabs",t.html()).html(o.spinner),this.xhr=p.ajax(p.extend({},o.ajaxOptions,{url:e,success:function(t,e){n.element.find(n._sanitizeSelector(a.hash)).html(t),n._cleanup(),o.cache&&p.data(a,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[s],n.panels[s]));try{o.ajaxOptions.success(t,e)}catch(t){}},error:function(t,e,i){n._cleanup(),n._trigger("load",null,n._ui(n.anchors[s],n.panels[s]));try{o.ajaxOptions.error(t,e,s,a)}catch(i){}}})),n.element.dequeue("tabs"),this;this.element.dequeue("tabs")},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(t,e){return this.anchors.eq(t).removeData("cache.tabs").data("load.tabs",e),this},length:function(){return this.anchors.length}}),p.extend(p.ui.tabs,{version:"1.8.24"}),p.extend(p.ui.tabs.prototype,{rotation:null,rotate:function(e,t){var i=this,s=this.options,n=i._rotate||(i._rotate=function(t){clearTimeout(i.rotation),i.rotation=setTimeout(function(){var t=s.selected;i.select(++t<i.anchors.length?t:0)},e),t&&t.stopPropagation()}),t=i._unrotate||(i._unrotate=t?function(t){n()}:function(t){t.clientX&&i.rotate(null)});return e?(this.element.bind("tabsshow",n),this.anchors.bind(s.event+".tabs",t),n()):(clearTimeout(i.rotation),this.element.unbind("tabsshow",n),this.anchors.unbind(s.event+".tabs",t),delete this._rotate,delete this._unrotate),this}})}(jQuery),!function(n){n.widget("ui.autocomplete",{options:{minLength:1,delay:300},_create:function(){var i=this,s=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(t){var e=n.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:i._move("previousPage",t);break;case e.PAGE_DOWN:i._move("nextPage",t);break;case e.UP:i._move("previous",t),t.preventDefault();break;case e.DOWN:i._move("next",t),t.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:i.menu.active&&t.preventDefault();case e.TAB:i.menu.active&&i.menu.select(t);break;case e.ESCAPE:i.element.val(i.term),i.close(t);break;case e.LEFT:case e.RIGHT:case e.SHIFT:case e.CONTROL:case e.ALT:case e.COMMAND:case e.COMMAND_RIGHT:case e.INSERT:case e.CAPS_LOCK:case e.END:case e.HOME:break;default:clearTimeout(i.searching),i.searching=setTimeout(function(){i.search(null,t)},i.options.delay)}}).bind("focus.autocomplete",function(){i.selectedItem=null,i.previous=i.element.val()}).bind("blur.autocomplete",function(t){clearTimeout(i.searching),i.closing=setTimeout(function(){i.close(t),i._change(t)},150)}),this._initSource(),this.response=function(){return i._response.apply(i,arguments)},this.menu=n("<ul></ul>").addClass("ui-autocomplete").appendTo("body",s).mousedown(function(){setTimeout(function(){clearTimeout(i.closing)},13)}).menu({focus:function(t,e){e=e.item.data("item.autocomplete"),!1!==i._trigger("focus",null,{item:e})&&/^key/.test(t.originalEvent.type)&&i.element.val(e.value)},selected:function(t,e){e=e.item.data("item.autocomplete"),!1!==i._trigger("select",t,{item:e})&&i.element.val(e.value),i.close(t),t=i.previous,i.element[0]!==s.activeElement&&(i.element.focus(),i.previous=t),i.selectedItem=e},blur:function(){i.menu.element.is(":visible")&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),n.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),n.Widget.prototype.destroy.call(this)},_setOption:function(t){n.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource()},_initSource:function(){var i,s;n.isArray(this.options.source)?(i=this.options.source,this.source=function(t,e){e(n.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(s=this.options.source,this.source=function(t,e){n.getJSON(s,t,e)}):this.source=this.options.source},search:function(t,e){return(t=null!=t?t:this.element.val()).length<this.options.minLength?this.close(e):(clearTimeout(this.closing),!1!==this._trigger("search")?this._search(t):void 0)},_search:function(t){this.term=this.element.addClass("ui-autocomplete-loading").val(),this.source({term:t},this.response)},_response:function(t){t.length?(t=this._normalize(t),this._suggest(t),this._trigger("open")):this.close(),this.element.removeClass("ui-autocomplete-loading")},close:function(t){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this._trigger("close",t),this.menu.element.hide(),this.menu.deactivate())},_change:function(t){this.previous!==this.element.val()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:n.map(t,function(t){return"string"==typeof t?{label:t,value:t}:n.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var e,i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.deactivate(),this.menu.refresh(),this.menu.element.show().position({my:"left top",at:"left bottom",of:this.element,collision:"none"}),t=i.width("").width(),e=this.element.width(),i.width(Math.max(t,e))},_renderMenu:function(i,t){var s=this;n.each(t,function(t,e){s._renderItem(i,e)})},_renderItem:function(t,e){return n("<li></li>").data("item.autocomplete",e).append("<a>"+e.label+"</a>").appendTo(t)},_move:function(t,e){this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(t)||this.menu.last()&&/^next/.test(t)?(this.element.val(this.term),this.menu.deactivate()):this.menu[t](e):this.search(null,e)},widget:function(){return this.menu.element}}),n.extend(n.ui.autocomplete,{escapeRegex:function(t){return t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},filter:function(t,e){var i=new RegExp(n.ui.autocomplete.escapeRegex(e),"i");return n.grep(t,function(t){return i.test(t.label||t.value||t)})}})}(jQuery),!function(n){n.widget("ui.menu",{_create:function(){var e=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(t){n(t.target).closest(".ui-menu-item a").length&&(t.preventDefault(),e.select(t))}),this.refresh()},refresh:function(){var e=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(t){e.activate(t,n(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(t,e){var i,s,n;this.deactivate(),this.hasScroll()&&(i=e.offset().top-this.element.offset().top,s=this.element.attr("scrollTop"),n=this.element.height(),i<0?this.element.attr("scrollTop",s+i):n<i&&this.element.attr("scrollTop",s+i-n+e.height())),this.active=e.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",t,{item:e})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(t){this.move("next",".ui-menu-item:first",t)},previous:function(t){this.move("prev",".ui-menu-item:last",t)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(t,e,i){this.active&&(t=this.active[t+"All"](".ui-menu-item").eq(0)).length?this.activate(i,t):this.activate(i,this.element.children(e))},nextPage:function(t){var e,i,s;this.hasScroll()?!this.active||this.last()?this.activate(t,this.element.children(":first")):(e=this.active.offset().top,i=this.element.height(),(s=this.element.children("li").filter(function(){var t=n(this).offset().top-e-i+n(this).height();return t<10&&-10<t})).length||(s=this.element.children(":last")),this.activate(t,s)):this.activate(t,this.element.children(!this.active||this.last()?":first":":last"))},previousPage:function(t){var e,i;this.hasScroll()?!this.active||this.first()?this.activate(t,this.element.children(":last")):(e=this.active.offset().top,i=this.element.height(),(result=this.element.children("li").filter(function(){var t=n(this).offset().top-e+i-n(this).height();return t<10&&-10<t})).length||(result=this.element.children(":first")),this.activate(t,result)):this.activate(t,this.element.children(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(t){this._trigger("selected",t,{item:this.active})}})}(jQuery),function(t){function a(){}function p(t,e){return t-e}function f(t,e){t+="";var i,s=m,n=Array.prototype.slice.call(arguments,2),o=f.listeners(t),a=0,r=[],l={},h=[],c=g;g=t;for(var d=m=0,u=o.length;d<u;d++)"zIndex"in o[d]&&(r.push(o[d].zIndex),o[d].zIndex<0)&&(l[o[d].zIndex]=o[d]);for(r.sort(p);r[a]<0;)if(i=l[r[a++]],h.push(i.apply(e,n)),m)return m=s,h;for(d=0;d<u;d++)if("zIndex"in(i=o[d]))if(i.zIndex==r[a]){if(h.push(i.apply(e,n)),m)break;do{if((i=l[r[++a]])&&h.push(i.apply(e,n)),m)break}while(i)}else l[i.zIndex]=i;else if(h.push(i.apply(e,n)),m)break;return m=s,g=c,h.length?h:null}var g,m,u="hasOwnProperty",v=/[\.\/]/,b={n:{}};f._events=b,f.listeners=function(t){for(var e,i,s,n,o,a,r,l=t.split(v),h=[b],c=[],d=0,u=l.length;d<u;d++){for(a=[],n=0,o=h.length;n<o;n++)for(i=[(r=h[n].n)[l[d]],r["*"]],s=2;s--;)(e=i[s])&&(a.push(e),c=c.concat(e.f||[]));h=a}return c},f.on=function(t,e){if("function"!=typeof e)return function(){};for(var i=(t+="").split(v),s=b,n=0,o=i.length;n<o;n++)s=(s=s.n).hasOwnProperty(i[n])&&s[i[n]]||(s[i[n]]={n:{}});for(s.f=s.f||[],n=0,o=s.f.length;n<o;n++)if(s.f[n]==e)return a;return s.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},f.f=function(t){var e=[].slice.call(arguments,1);return function(){f.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},f.stop=function(){m=1},f.nt=function(t){return t?RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(g):g},f.nts=function(){return g.split(v)},f.off=f.unbind=function(t,e){if(t){for(var i,s,n,o=t.split(v),a=[b],r=0,l=o.length;r<l;r++)for(c=0;a.length>c;c+=n.length-2){if(n=[c,1],i=a[c].n,"*"!=o[r])i[o[r]]&&n.push(i[o[r]]);else for(s in i)i[u](s)&&n.push(i[s]);a.splice.apply(a,n)}for(r=0,l=a.length;r<l;r++)for(i=a[r];i.n;){if(e){if(i.f){for(c=0,d=i.f.length;c<d;c++)if(i.f[c]==e){i.f.splice(c,1);break}i.f.length||delete i.f}for(s in i.n)if(i.n[u](s)&&i.n[s].f){for(var h=i.n[s].f,c=0,d=h.length;c<d;c++)if(h[c]==e){h.splice(c,1);break}h.length||delete i.n[s].f}}else for(s in delete i.f,i.n)i.n[u](s)&&i.n[s].f&&delete i.n[s].f;i=i.n}}else f._events=b={n:{}}},f.once=function(t,e){function i(){return f.unbind(t,i),e.apply(this,arguments)}return f.on(t,i)},f.version="0.4.2",f.toString=function(){return"You are running Eve 0.4.2"},"undefined"!=typeof module&&module.exports?module.exports=f:"undefined"!=typeof define?define("eve",[],function(){return f}):t.eve=f}(this),function(e,i){"function"==typeof define&&define.amd?define(["eve"],function(t){return i(e,t)}):i(e,e.eve)}(this,function(r,$){function P(t){var e,i;return P.is(t,"function")?tt?t():$.on("raphael.DOMload",t):P.is(t,b)?P._engine.create[m](P,t.splice(0,3+P.is(t[0],E))).add(t):(e=Array.prototype.slice.call(arguments,0),P.is(e[e.length-1],"function")?(i=e.pop(),tt?i.call(P._engine.create[m](P,e)):$.on("raphael.DOMload",function(){i.call(P._engine.create[m](P,e))})):P._engine.create[m](P,arguments))}function R(t){if(Object(t)!==t)return t;var e,i=new t.constructor;for(e in t)t[A](e)&&(i[e]=R(t[e]));return i}function C(n,o,a){function r(){var t=Array.prototype.slice.call(arguments,0),e=t.join(""),i=r.cache=r.cache||{},s=r.count=r.count||[];return i[A](e)?function(t,e){for(var i=0,s=t.length;i<s;i++)if(t[i]===e)return t.push(t.splice(i,1)[0])}(s,e):(1e3<=s.length&&delete i[s.shift()],s.push(e),i[e]=n[m](o,t)),a?a(i[e]):i[e]}return r}function l(){return this.hex}function B(t,e){for(var i=[],s=0,n=t.length;s<n-2*!e;s+=2){var o=[{x:+t[s-2],y:+t[s-1]},{x:+t[s],y:+t[s+1]},{x:+t[s+2],y:+t[s+3]},{x:+t[s+4],y:+t[s+5]}];e?s?n-4==s?o[3]={x:+t[0],y:+t[1]}:n-2==s&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[n-2],y:+t[n-1]}:n-4==s?o[3]=o[2]:s||(o[0]={x:+t[s],y:+t[s+1]}),i.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return i}function Y(t,e,i,s,n){return t*(t*(-3*e+9*i-9*s+3*n)+6*e-12*i+6*s)-3*e+3*i}function V(t,e,i,s,n,o,a,r,l){for(var h=(l=1<(l=null==l?1:l)?1:l<0?0:l)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],u=0,p=0;p<12;p++){var f=h*c[p]+h,g=Y(f,t,i,n,a),f=Y(f,e,s,o,r);u+=d[p]*D.sqrt(g*g+f*f)}return h*u}function U(t,e,i){var s=P.bezierBBox(t),n=P.bezierBBox(e);if(!P.isBBoxIntersect(s,n))return i?0:[];for(var o=~~(V.apply(0,t)/5),a=~~(V.apply(0,e)/5),r=[],l=[],h={},c=i?0:[],d=0;d<1+o;d++){var u=P.findDotsAtSegment.apply(P,t.concat(d/o));r.push({x:u.x,y:u.y,t:d/o})}for(d=0;d<1+a;d++)u=P.findDotsAtSegment.apply(P,e.concat(d/a)),l.push({x:u.x,y:u.y,t:d/a});for(d=0;d<o;d++)for(var p=0;p<a;p++){var f=r[d],g=r[d+1],m=l[p],v=l[p+1],b=S(g.x-f.x)<.001?"y":"x",_=S(v.x-m.x)<.001?"y":"x",y=function(t,e,i,s,n,o,a,r){if(!(w(t,i)<x(n,a)||x(t,i)>w(n,a)||w(e,s)<x(o,r)||x(e,s)>w(o,r))){var l=(t-i)*(o-r)-(e-s)*(n-a);if(l){var h=((t*s-e*i)*(n-a)-(t-i)*(n*r-o*a))/l,l=((t*s-e*i)*(o-r)-(e-s)*(n*r-o*a))/l,c=+h.toFixed(2),d=+l.toFixed(2);if(!(+x(t,i).toFixed(2)>c||c>+w(t,i).toFixed(2)||+x(n,a).toFixed(2)>c||c>+w(n,a).toFixed(2)||+x(e,s).toFixed(2)>d||d>+w(e,s).toFixed(2)||+x(o,r).toFixed(2)>d||d>+w(o,r).toFixed(2)))return{x:h,y:l}}}}(f.x,f.y,g.x,g.y,m.x,m.y,v.x,v.y);y&&h[y.x.toFixed(4)]!=y.y.toFixed(4)&&(h[y.x.toFixed(4)]=y.y.toFixed(4),b=f.t+S((y[b]-f[b])/(g[b]-f[b]))*(g.t-f.t),g=m.t+S((y[_]-m[_])/(v[_]-m[_]))*(v.t-m.t),0<=b)&&b<=1&&0<=g&&g<=1&&(i?c++:c.push({x:y.x,y:y.y,t1:b,t2:g}))}return c}function h(t,e,i){t=P._path2curve(t),e=P._path2curve(e);for(var s,n,o,a,r,l,h,c,d=i?0:[],u=0,p=t.length;u<p;u++){var f=t[u];if("M"==f[0])s=o=f[1],g=a=f[2];else for(var g="C"==f[0]?(s=(h=[s,g].concat(f.slice(1)))[6],h[7]):(h=[s,g,s,g,o,a,o,a],s=o,a),m=0,v=e.length;m<v;m++){var b=e[m];if("M"==b[0])n=r=b[1],_=l=b[2];else{var _="C"==b[0]?(n=(c=[n,_].concat(b.slice(1)))[6],c[7]):(c=[n,_,n,_,r,l,r,l],n=r,l),y=U(h,c,i);if(i)d+=y;else{for(var w=0,x=y.length;w<x;w++)y[w].segment1=u,y[w].segment2=m,y[w].bez1=h,y[w].bez2=c;d=d.concat(y)}}}}return d}function X(t,e,i,s,n,o){null!=t?(this.a=+t,this.b=+e,this.c=+i,this.d=+s,this.e=+n,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function c(){return this.x+lt+this.y+lt+this.width+"  "+this.height}function G(t,e,i,s,n,o){function l(t){return((d*t+c)*t+h)*t}var h=3*e,c=3*(s-e)-h,d=1-h-c,s=3*i,e=3*(n-i)-s,n=1-s-e;return i=function(t,e){var i,s,n,o,a,r;for(n=t,r=0;r<8;r++){if(o=l(n)-t,e>S(o))return n;if(S(a=(3*d*n+2*c)*n+h)<1e-6)break;n-=o/a}if(s=1,(i=0)>(n=t))return i;if(s<n)return s;for(;i<s;){if(o=l(n),e>S(o-t))return n;o<t?i=n:s=n,n=(s-i)/2+i}return n}(i=t,1/(200*o)),((n*i+e)*i+s)*i}function d(t,e){var i=[],s={};if(this.ms=e,this.times=1,t){for(var n in t)t[A](n)&&(s[N(n)]=t[n],i.push(N(n)));i.sort(K)}this.anim=s,this.top=i[i.length-1],this.percents=i}function Q(t,e,i,s,n,o){i=N(i);var a,r,l,h,c,d=t.ms,u={},p={},f={};if(s)for(m=0,v=q.length;m<v;m++){var g=q[m];if(g.el.id==e.id&&g.anim==t){g.percent!=i?(q.splice(m,1),l=1):r=g,e.attr(g.totalOrigin);break}}else s=+p;for(var m=0,v=t.percents.length;m<v;m++){if(t.percents[m]==i||t.percents[m]>s*t.top){i=t.percents[m],c=t.percents[m-1]||0,d=d/t.top*(i-c),h=t.percents[m+1],a=t.anim[i];break}s&&e.attr(t.anim[t.percents[m]])}if(a){if(r)r.initstatus=s,r.start=new Date-r.ms*s;else{for(var b in a)if(a[A](b)&&(xt[A](b)||e.paper.customAttributes[A](b)))switch(u[b]=e.attr(b),null==u[b]&&(u[b]=wt[b]),p[b]=a[b],xt[b]){case E:f[b]=(p[b]-u[b])/d;break;case"colour":u[b]=P.getRGB(u[b]);var _=P.getRGB(p[b]);f[b]={r:(_.r-u[b].r)/d,g:(_.g-u[b].g)/d,b:(_.b-u[b].b)/d};break;case"path":var _=Xt(u[b],p[b]),y=_[1];for(u[b]=_[0],f[b]=[],m=0,v=u[b].length;m<v;m++){f[b][m]=[0];for(var w=1,x=u[b][m].length;w<x;w++)f[b][m][w]=(y[m][w]-u[b][m][w])/d}break;case"transform":var k=e._,C=Zt(k[b],p[b]);if(C)for(u[b]=C.from,p[b]=C.to,f[b]=[],f[b].real=!0,m=0,v=u[b].length;m<v;m++)for(f[b][m]=[u[b][m][0]],w=1,x=u[b][m].length;w<x;w++)f[b][m][w]=(p[b][m][w]-u[b][m][w])/d;else{C=e.matrix||new X,k={_:{transform:k.transform},getBBox:function(){return e.getBBox(1)}};u[b]=[C.a,C.b,C.c,C.d,C.e,C.f],Kt(k,p[b]),p[b]=k._.transform,f[b]=[(k.matrix.a-C.a)/d,(k.matrix.b-C.b)/d,(k.matrix.c-C.c)/d,(k.matrix.d-C.d)/d,(k.matrix.e-C.e)/d,(k.matrix.f-C.f)/d]}break;case"csv":var D=H(a[b])[ht](st),S=H(u[b])[ht](st);if("clip-rect"==b)for(u[b]=S,f[b]=[],m=S.length;m--;)f[b][m]=(D[m]-u[b][m])/d;p[b]=D;break;default:for(D=[][z](a[b]),S=[][z](u[b]),f[b]=[],m=e.paper.customAttributes[b].length;m--;)f[b][m]=((D[m]||0)-(S[m]||0))/d}var I,M=a.easing,T=P.easing_formulas[M];if(T=T||((T=H(M).match(vt))&&5==T.length?(I=T,function(t){return G(t,+I[1],+I[2],+I[3],+I[4],d)}):Z),g={anim:t,percent:i,timestamp:M=a.start||t.start||+new Date,start:M+(t.del||0),status:0,initstatus:s||0,stop:!1,ms:d,easing:T,from:u,diff:f,to:p,el:e,callback:a.callback,prev:c,next:h,repeat:o||t.times,origin:e.attr(),totalOrigin:n},q.push(g),s&&!r&&!l&&(g.stop=!0,g.start=new Date-d*s,1==q.length))return Ce();l&&(g.start=new Date-g.ms*s),1==q.length&&ke(Ce)}$("raphael.anim.start."+e.id,e,t)}}function u(t){for(var e=0;q.length>e;e++)q[e].el.paper==t&&q.splice(e--,1)}P.version="2.1.0",P.eve=$;function p(){this.ca=this.customAttributes={}}function K(t,e){return N(t)-N(e)}function Z(t){return t}function J(t,e,i,s){return[["M",t,e],["m",0,-(s=null==s?i:s)],["a",i,s,0,1,1,0,2*s],["a",i,s,0,1,1,0,-2*s],["z"]]}var tt,et,it,st=/[, ]+/,nt={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},ot=/\{(\d+)\}/g,A="hasOwnProperty",f={doc:document,win:r},at={was:Object.prototype[A].call(f.win,"Raphael"),is:f.win.Raphael},m="apply",z="concat",rt="ontouchstart"in f.win||f.win.DocumentTouch&&f.doc instanceof DocumentTouch,lt=" ",H=String,ht="split",ct="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[ht](lt),dt={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},ut=H.prototype.toLowerCase,D=Math,w=D.max,x=D.min,S=D.abs,v=D.pow,I=D.PI,E="number",pt="string",b="array",ft=Object.prototype.toString,gt=(P._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),mt={NaN:1,Infinity:1,"-Infinity":1},vt=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,bt=D.round,N=parseFloat,_t=parseInt,yt=H.prototype.toUpperCase,wt=P._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},xt=P._availableAnimAttrs={blur:E,"clip-rect":"csv",cx:E,cy:E,fill:"colour","fill-opacity":E,"font-size":E,height:E,opacity:E,path:"path",r:E,rx:E,ry:E,stroke:"colour","stroke-opacity":E,"stroke-width":E,transform:"transform",width:E,x:E,y:E},kt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,Ct={hs:1,rg:1},Dt=/,?([achlmqrstvxz]),?/gi,St=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,It=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,Mt=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,Tt=(P._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),$t=P._rectPath=function(t,e,i,s,n){return n?[["M",t+n,e],["l",i-2*n,0],["a",n,n,0,0,1,n,n],["l",0,s-2*n],["a",n,n,0,0,1,-n,n],["l",2*n-i,0],["a",n,n,0,0,1,-n,-n],["l",0,2*n-s],["a",n,n,0,0,1,n,-n],["z"]]:[["M",t,e],["l",i,0],["l",0,s],["l",-i,0],["z"]]},Pt=P._getPath={path:function(t){return t.attr("path")},circle:function(t){t=t.attrs;return J(t.cx,t.cy,t.r)},ellipse:function(t){t=t.attrs;return J(t.cx,t.cy,t.rx,t.ry)},rect:function(t){t=t.attrs;return $t(t.x,t.y,t.width,t.height,t.r)},image:function(t){t=t.attrs;return $t(t.x,t.y,t.width,t.height)},text:function(t){t=t._getBBox();return $t(t.x,t.y,t.width,t.height)},set:function(t){t=t._getBBox();return $t(t.x,t.y,t.width,t.height)}},At=P.mapPath=function(t,e){if(e)for(var i,s,n,o,a,r=0,l=(t=Xt(t)).length;r<l;r++)for(n=1,o=(a=t[r]).length;n<o;n+=2)i=e.x(a[n],a[n+1]),s=e.y(a[n],a[n+1]),a[n]=i,a[n+1]=s;return t};if(P._g=f,P.type=f.win.SVGAngle||f.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==P.type){var t,e=f.doc.createElement("div");if(e.innerHTML='<v:shape adj="1"/>',(t=e.firstChild).style.behavior="url(#default#VML)",!t||"object"!=typeof t.adj)return P.type="";e=null}P.svg=!(P.vml="VML"==P.type),P._Paper=p,P.fn=t=p.prototype=P.prototype,P._id=0,P._oid=0,P.is=function(t,e){return"finite"==(e=ut.call(e))?!mt[A](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||ft.call(t).slice(8,-1).toLowerCase()==e},P.angle=function(t,e,i,s,n,o){var a,r;return null==n?(r=e-s,(a=t-i)||r?(180+180*D.atan2(-r,-a)/I+360)%360:0):P.angle(t,e,n,o)-P.angle(i,s,n,o)},P.rad=function(t){return t%360*I/180},P.deg=function(t){return 180*t/I%360},P.snapTo=function(t,e,i){if(i=P.is(i,"finite")?i:10,P.is(t,b)){for(var s=t.length;s--;)if(i>=S(t[s]-e))return t[s]}else{var n=e%(t=+t);if(n<i)return e-n;if(t-i<n)return e-n+t}return e},P.createUUID=(et=/[xy]/g,it=function(t){var e=0|16*D.random();return("x"==t?e:8|3&e).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(et,it).toUpperCase()}),P.setWindow=function(t){$("raphael.setWindow",P,f.win,t),f.win=t,f.doc=f.win.document,P._engine.initWin&&P._engine.initWin(f.win)};function zt(){return"hsb("+[this.h,this.s,this.b]+")"}function Ht(){return"hsl("+[this.h,this.s,this.l]+")"}function Et(){return this.hex}function Nt(t,e,i){var s;return null==e&&P.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,e=t.g,t=t.r),null==e&&P.is(t,pt)&&(t=(s=P.getRGB(t)).r,e=s.g,i=s.b),(1<t||1<e||1<i)&&(t/=255,e/=255,i/=255),[t,e,i]}function qt(t,e,i,s){return t={r:t*=255,g:e*=255,b:i*=255,hex:P.rgb(t,e,i),toString:Et},P.is(s,"finite")&&(t.opacity=s),t}function Lt(t,e,i,s){return[t,e,i,s,i,s]}function Ot(t,e,i,s,n,o){return[1/3*t+2/3*i,1/3*e+2/3*s,1/3*n+2/3*i,1/3*o+2/3*s,n,o]}function jt(t,e,i,s,n,o,a,r,l){var h=1-l;return{x:v(h,3)*t+3*v(h,2)*l*i+3*h*l*l*n+v(l,3)*a,y:v(h,3)*e+3*v(h,2)*l*s+3*h*l*l*o+v(l,3)*r}}function Wt(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}}var Ft=function(t){if(P.vml){var i,s=/^\s+|\s+$/g;try{var e=new ActiveXObject("htmlfile");e.write("<body>"),e.close(),i=e.body}catch(t){i=createPopup().document.body}var n=i.createTextRange();Ft=C(function(t){try{i.style.color=H(t).replace(s,"");var e=n.queryCommandValue("ForeColor");return"#"+("000000"+(e=(255&e)<<16|65280&e|(16711680&e)>>>16).toString(16)).slice(-6)}catch(t){return"none"}})}else{var o=f.doc.createElement("i");o.title="Raphal Colour Picker",o.style.display="none",f.doc.body.appendChild(o),Ft=C(function(t){return o.style.color=t,f.doc.defaultView.getComputedStyle(o,"").getPropertyValue("color")})}return Ft(t)},Rt=(P.color=function(t){var e;return P.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=P.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):P.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=P.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(P.is(t,"string")&&(t=P.getRGB(t)),P.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=P.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=P.rgb2hsb(t),t.v=e.b):(t={hex:"none"}).r=t.g=t.b=t.h=t.s=t.v=t.l=-1),t.toString=Et,t},P.hsb2rgb=function(t,e,i,s){var n,o,a;return this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(i=t.b,e=t.s,s=(t=t.h).o),a=(e=i*e)*(1-S((t=(t*=360)%360/60)%2-1)),n=o=i=i-e,qt(n+=[e,a,0,0,a,e][t=~~t],o+=[a,e,e,a,0,0][t],i+=[0,0,a,e,e,a][t],s)},P.hsl2rgb=function(t,e,i,s){var n,o,a;return this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(i=t.l,e=t.s,t=t.h),(1<t||1<e||1<i)&&(t/=360,e/=100,i/=100),a=(e=2*e*(i<.5?i:1-i))*(1-S((t=(t*=360)%360/60)%2-1)),n=o=i=i-e/2,qt(n+=[e,a,0,0,a,e][t=~~t],o+=[a,e,e,a,0,0][t],i+=[0,0,a,e,e,a][t],s)},P.rgb2hsb=function(t,e,i){var s,n;return t=(i=Nt(t,e,i))[0],e=i[1],i=i[2],{h:((0==(n=(s=w(t,e,i))-x(t,e,i))?null:s==t?(e-i)/n:s==e?(i-t)/n+2:(t-e)/n+4)+360)%6*60/360,s:0==n?0:n/s,b:s,toString:zt}},P.rgb2hsl=function(t,e,i){var s,n,o;return t=(i=Nt(t,e,i))[0],e=i[1],i=i[2],s=((n=w(t,e,i))+(o=x(t,e,i)))/2,{h:((0==(o=n-o)?null:n==t?(e-i)/o:n==e?(i-t)/o+2:(t-e)/o+4)+360)%6*60/360,s:0==o?0:s<.5?o/(2*s):o/(2-2*s),l:s,toString:Ht}},P._path2string=function(){return this.join(",").replace(Dt,"$1")},P._preload=function(t,e){var i=f.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){e.call(this),this.onload=null,f.doc.body.removeChild(this)},i.onerror=function(){f.doc.body.removeChild(this)},f.doc.body.appendChild(i),i.src=t},P.getRGB=C(function(t){var e,i,s,n,o,a;return!t||(t=H(t)).indexOf("-")+1?{r:-1,g:-1,b:-1,hex:"none",error:1,toString:l}:"none"==t?{r:-1,g:-1,b:-1,hex:"none",toString:l}:(t=(t=Ct[A](t.toLowerCase().substring(0,2))||"#"==t.charAt()?t:Ft(t)).match(gt))?(t[2]&&(s=_t(t[2].substring(5),16),i=_t(t[2].substring(3,5),16),e=_t(t[2].substring(1,3),16)),t[3]&&(s=_t((o=t[3].charAt(3))+o,16),i=_t((o=t[3].charAt(2))+o,16),e=_t((o=t[3].charAt(1))+o,16)),t[4]&&(a=t[4][ht](kt),e=N(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),i=N(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),s=N(a[2]),"%"==a[2].slice(-1)&&(s*=2.55),"rgba"==t[1].toLowerCase().slice(0,4)&&(n=N(a[3])),a[3])&&"%"==a[3].slice(-1)&&(n/=100),t[5]?(a=t[5][ht](kt),e=N(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),i=N(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),s=N(a[2]),"%"==a[2].slice(-1)&&(s*=2.55),"deg"!=a[0].slice(-3)&&""!=a[0].slice(-1)||(e/=360),"hsba"==t[1].toLowerCase().slice(0,4)&&(n=N(a[3])),a[3]&&"%"==a[3].slice(-1)&&(n/=100),P.hsb2rgb(e,i,s,n)):t[6]?(a=t[6][ht](kt),e=N(a[0]),"%"==a[0].slice(-1)&&(e*=2.55),i=N(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),s=N(a[2]),"%"==a[2].slice(-1)&&(s*=2.55),"deg"!=a[0].slice(-3)&&""!=a[0].slice(-1)||(e/=360),"hsla"==t[1].toLowerCase().slice(0,4)&&(n=N(a[3])),a[3]&&"%"==a[3].slice(-1)&&(n/=100),P.hsl2rgb(e,i,s,n)):((t={r:e,g:i,b:s,toString:l}).hex="#"+(16777216|s|i<<8|e<<16).toString(16).slice(1),P.is(n,"finite")&&(t.opacity=n),t)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:l}},P),P.hsb=C(function(t,e,i){return P.hsb2rgb(t,e,i).hex}),P.hsl=C(function(t,e,i){return P.hsl2rgb(t,e,i).hex}),P.rgb=C(function(t,e,i){return"#"+(16777216|i|e<<8|t<<16).toString(16).slice(1)}),P.getColor=function(t){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},e=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,1<t.h&&(t.h=0,t.s-=.2,t.s<=0)&&(this.getColor.start={h:0,s:1,b:t.b}),e.hex},P.getColor.reset=function(){delete this.start},P.parsePathString=function(t){var e,o,a;return t?(e=Rt(t)).arr?_(e.arr):(o={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},a=[],(a=P.is(t,b)&&P.is(t[0],b)?_(t):a).length||H(t).replace(St,function(t,e,i){var s=[],n=e.toLowerCase();if(i.replace(Mt,function(t,e){e&&s.push(+e)}),"m"==n&&2<s.length&&(a.push([e][z](s.splice(0,2))),n="l",e="m"==e?"l":"L"),"r"==n)a.push([e][z](s));else for(;o[n]<=s.length&&(a.push([e][z](s.splice(0,o[n]))),o[n]););}),a.toString=P._path2string,e.arr=_(a),a):null},P.parseTransformString=C(function(t){var n;return t?(n=[],(n=P.is(t,b)&&P.is(t[0],b)?_(t):n).length||H(t).replace(It,function(t,e,i){var s=[];ut.call(e),i.replace(Mt,function(t,e){e&&s.push(+e)}),n.push([e][z](s))}),n.toString=P._path2string,n):null}),function(e){var i=Rt.ps=Rt.ps||{};return i[e]?i[e].sleep=100:i[e]={sleep:100},setTimeout(function(){for(var t in i)i[A](t)&&t!=e&&(i[t].sleep--,!i[t].sleep)&&delete i[t]}),i[e]}),Bt=(P.findDotsAtSegment=function(t,e,i,s,n,o,a,r,l){var h=1-l,c=v(h,3),d=v(h,2),u=l*l,p=u*l,f=c*t+3*d*l*i+3*h*l*l*n+p*a,c=c*e+3*d*l*s+3*h*l*l*o+p*r,d=t+2*l*(i-t)+u*(n-2*i+t),p=e+2*l*(s-e)+u*(o-2*s+e),g=i+2*l*(n-i)+u*(a-2*n+i),u=s+2*l*(o-s)+u*(r-2*o+s),t=h*t+l*i,i=h*e+l*s,e=h*n+l*a,s=h*o+l*r,n=90-180*D.atan2(d-g,p-u)/I;return(g<d||p<u)&&(n+=180),{x:f,y:c,m:{x:d,y:p},n:{x:g,y:u},start:{x:t,y:i},end:{x:e,y:s},alpha:n}},P.bezierBBox=function(t,e,i,s,n,o,a,r){P.is(t,"array")||(t=[t,e,i,s,n,o,a,r]);e=Ut.apply(null,t);return{x:e.min.x,y:e.min.y,x2:e.max.x,y2:e.max.y,width:e.max.x-e.min.x,height:e.max.y-e.min.y}},P.isPointInsideBBox=function(t,e,i){return e>=t.x&&t.x2>=e&&i>=t.y&&t.y2>=i},P.isBBoxIntersect=function(t,e){var i=P.isPointInsideBBox;return i(e,t.x,t.y)||i(e,t.x2,t.y)||i(e,t.x,t.y2)||i(e,t.x2,t.y2)||i(t,e.x,e.y)||i(t,e.x2,e.y)||i(t,e.x,e.y2)||i(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},P.pathIntersection=function(t,e){return h(t,e)},P.pathIntersectionNumber=function(t,e){return h(t,e,1)},P.isPointInsidePath=function(t,e,i){var s=P.pathBBox(t);return P.isPointInsideBBox(s,e,i)&&1==h(t,[["M",e,i],["H",s.x2+10]],1)%2},P._removedFactory=function(t){return function(){$("raphael.log",null,"Raphal: you are calling to method "+t+" of removed object",t)}},P.pathBBox=function(t){var e=Rt(t);if(e.bbox)return R(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var i,s,n=0,o=0,a=[],r=[],l=0,h=(t=Xt(t)).length;l<h;l++)"M"==(i=t[l])[0]?(n=i[1],o=i[2],a.push(n),r.push(o)):(s=Ut(n,o,i[1],i[2],i[3],i[4],i[5],i[6]),a=a[z](s.min.x,s.max.x),r=r[z](s.min.y,s.max.y),n=i[5],o=i[6]);var c=x[m](0,a),d=x[m](0,r),u=w[m](0,a),p=w[m](0,r),f=u-c,g=p-d,u={x:c,y:d,x2:u,y2:p,width:f,height:g,cx:c+f/2,cy:d+g/2};return e.bbox=R(u),u}),_=function(t){t=R(t);return t.toString=P._path2string,t},e=P._pathToRelative=function(t){var e=Rt(t);if(e.rel)return _(e.rel);var i=[],s=0,n=0,o=0,a=0,r=0;"M"==(t=P.is(t,b)&&P.is(t&&t[0],b)?t:P.parsePathString(t))[0][0]&&(o=s=t[0][1],a=n=t[0][2],r++,i.push(["M",s,n]));for(var l=r,h=t.length;l<h;l++){var c=i[l]=[],d=t[l];if(d[0]!=ut.call(d[0]))switch(c[0]=ut.call(d[0]),c[0]){case"a":c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=+(d[6]-s).toFixed(3),c[7]=+(d[7]-n).toFixed(3);break;case"v":c[1]=+(d[1]-n).toFixed(3);break;case"m":o=d[1],a=d[2];default:for(var u=1,p=d.length;u<p;u++)c[u]=+(d[u]-(u%2?s:n)).toFixed(3)}else{c=i[l]=[],"m"==d[0]&&(o=d[1]+s,a=d[2]+n);for(var f=0,g=d.length;f<g;f++)i[l][f]=d[f]}var m=i[l].length;switch(i[l][0]){case"z":s=o,n=a;break;case"h":s+=+i[l][m-1];break;case"v":n+=+i[l][m-1];break;default:s+=+i[l][m-2],n+=+i[l][m-1]}}return i.toString=P._path2string,e.rel=_(i),i},Yt=P._pathToAbsolute=function(t){var e=Rt(t);if(e.abs)return _(e.abs);if(!(t=P.is(t,b)&&P.is(t&&t[0],b)?t:P.parsePathString(t))||!t.length)return[["M",0,0]];var i=[],s=0,n=0,o=0,a=0,r=0;"M"==t[0][0]&&(o=s=+t[0][1],a=n=+t[0][2],r++,i[0]=["M",s,n]);for(var l,h,c=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),d=r,u=t.length;d<u;d++){if(i.push(l=[]),(h=t[d])[0]!=yt.call(h[0]))switch(l[0]=yt.call(h[0]),l[0]){case"A":l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=+(h[6]+s),l[7]=+(h[7]+n);break;case"V":l[1]=+h[1]+n;break;case"H":l[1]=+h[1]+s;break;case"R":for(var p=[s,n][z](h.slice(1)),f=2,g=p.length;f<g;f++)p[f]=+p[f]+s,p[++f]=+p[f]+n;i.pop(),i=i[z](B(p,c));break;case"M":o=+h[1]+s,a=+h[2]+n;default:for(f=1,g=h.length;f<g;f++)l[f]=+h[f]+(f%2?s:n)}else if("R"==h[0])p=[s,n][z](h.slice(1)),i.pop(),i=i[z](B(p,c)),l=["R"][z](h.slice(-2));else for(var m=0,v=h.length;m<v;m++)l[m]=h[m];switch(l[0]){case"Z":s=o,n=a;break;case"H":s=l[1];break;case"V":n=l[1];break;case"M":o=l[l.length-2],a=l[l.length-1];default:s=l[l.length-2],n=l[l.length-1]}}return i.toString=P._path2string,e.abs=_(i),i},Vt=function(t,e,i,s,n,o,a,r,l,h){var c=120*I/180,d=I/180*(+n||0),u=[],p=C(function(t,e,i){return{x:t*D.cos(i)-e*D.sin(i),y:t*D.sin(i)+e*D.cos(i)}}),o=(h?(_=h[0],y=h[1],v=h[2],b=h[3]):(t=(g=p(t,e,-d)).x,e=g.y,r=(g=p(r,l,-d)).x,l=g.y,D.cos(I/180*n),D.sin(I/180*n),1<(f=(g=(t-r)/2)*g/(i*i)+(m=(e-l)/2)*m/(s*s))&&(i*=f=D.sqrt(f),s*=f),v=(f=(o==a?-1:1)*D.sqrt(S(((f=i*i)*(o=s*s)-f*m*m-o*g*g)/(f*m*m+o*g*g))))*i*m/s+(t+r)/2,_=D.asin(((e-(b=f*-s*g/i+(e+l)/2))/s).toFixed(9)),y=D.asin(((l-b)/s).toFixed(9)),(_=t<v?I-_:_)<0&&(_=2*I+_),(y=r<v?I-y:y)<0&&(y=2*I+y),a&&y<_&&(_-=2*I),!a&&_<y&&(y-=2*I)),y-_),c=(S(o)>c&&(m=y,f=r,g=l,r=v+i*D.cos(y=_+c*(a&&_<y?1:-1)),l=b+s*D.sin(y),u=Vt(r,l,i,s,n,0,a,f,g,[y,m,v,b])),o=y-_,D.cos(_)),n=D.sin(_),a=D.cos(y),f=D.sin(y),g=D.tan(o/4),m=4/3*i*g,v=4/3*s*g,b=[t,e],_=[t+m*n,e-v*c],y=[r+m*f,l-v*a],o=[r,l];if(_[0]=2*b[0]-_[0],_[1]=2*b[1]-_[1],h)return[_,y,o][z](u);for(var w=[],x=0,k=(u=[_,y,o][z](u).join()[ht](",")).length;x<k;x++)w[x]=x%2?p(u[x-1],u[x],d).y:p(u[x],u[x+1],d).x;return w},Ut=C(function(t,e,i,s,n,o,a,r){var l,h=n-2*i+t-(a-2*n+i),c=2*(i-t)-2*(n-i),d=t-i,u=(-c+D.sqrt(c*c-4*h*d))/2/h,p=(-c-D.sqrt(c*c-4*h*d))/2/h,f=[e,r],g=[t,a];return"1e12"<S(u)&&(u=.5),"1e12"<S(p)&&(p=.5),0<u&&u<1&&(l=jt(t,e,i,s,n,o,a,r,u),g.push(l.x),f.push(l.y)),0<p&&p<1&&(l=jt(t,e,i,s,n,o,a,r,p),g.push(l.x),f.push(l.y)),u=(-(c=2*(s-e)-2*(o-s))+D.sqrt(c*c-4*(h=o-2*s+e-(r-2*o+s))*(d=e-s)))/2/h,p=(-c-D.sqrt(c*c-4*h*d))/2/h,"1e12"<S(u)&&(u=.5),"1e12"<S(p)&&(p=.5),0<u&&u<1&&(l=jt(t,e,i,s,n,o,a,r,u),g.push(l.x),f.push(l.y)),0<p&&p<1&&(l=jt(t,e,i,s,n,o,a,r,p),g.push(l.x),f.push(l.y)),{min:{x:x[m](0,g),y:x[m](0,f)},max:{x:w[m](0,g),y:w[m](0,f)}}}),Xt=P._path2curve=C(function(t,e){var i=!e&&Rt(t);if(!e&&i.curve)return _(i.curve);function s(t,e){if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][z](Vt[m](0,[e.x,e.y][z](t.slice(1))));break;case"S":t=["C",e.x+(e.x-(e.bx||e.x)),e.y+(e.y-(e.by||e.y))][z](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][z](Ot(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][z](Ot(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][z](Lt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][z](Lt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][z](Lt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][z](Lt(e.x,e.y,e.X,e.Y))}return t}function n(t,e){if(7<t[e].length){t[e].shift();for(var i=t[e];i.length;)t.splice(e++,0,["C"][z](i.splice(0,6)));t.splice(e,1),d=w(a.length,r&&r.length||0)}}function o(t,e,i,s,n){t&&e&&"M"==t[n][0]&&"M"!=e[n][0]&&(e.splice(n,0,["M",s.x,s.y]),i.bx=0,i.by=0,i.x=t[n][1],i.y=t[n][2],d=w(a.length,r&&r.length||0))}for(var a=Yt(t),r=e&&Yt(e),l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=0,d=w(a.length,r&&r.length||0);c<d;c++){a[c]=s(a[c],l),n(a,c),r&&(r[c]=s(r[c],h)),r&&n(r,c),o(a,r,l,h,c),o(r,a,h,l,c);var u=a[c],p=r&&r[c],f=u.length,g=r&&p.length;l.x=u[f-2],l.y=u[f-1],l.bx=N(u[f-4])||l.x,l.by=N(u[f-3])||l.y,h.bx=r&&(N(p[g-4])||h.x),h.by=r&&(N(p[g-3])||h.y),h.x=r&&p[g-2],h.y=r&&p[g-1]}return r||(i.curve=_(a)),r?[a,r]:a},null,_),Gt=(P._parseDots=C(function(t){for(var e=[],i=0,s=t.length;i<s;i++){var n={},o=t[i].match(/^([^:]*):?([\d\.]*)/);if(n.color=P.getRGB(o[1]),n.color.error)return null;n.color=n.color.hex,o[2]&&(n.offset=o[2]+"%"),e.push(n)}for(s=e.length-(i=1);i<s;i++)if(!e[i].offset){for(var a=N(e[i-1].offset||0),r=0,l=i+1;l<s;l++)if(e[l].offset){r=e[l].offset;break}r||(r=100,l=s);for(var h=((r=N(r))-a)/(l-i+1);i<l;i++)a+=h,e[i].offset=a+"%"}return e}),P._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Qt=(P._tofront=function(t,e){e.top!==t&&(Gt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},P._toback=function(t,e){e.bottom!==t&&(Gt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},P._insertafter=function(t,e,i){Gt(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,(t.prev=e).next=t},P._insertbefore=function(t,e,i){Gt(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,(e.prev=t).next=e},P.toMatrix=function(t,e){var i=Bt(t),t={_:{transform:""},getBBox:function(){return i}};return Kt(t,e),t.matrix}),Kt=(P.transformPath=function(t,e){return At(t,Qt(t,e))},P._extractTransform=function(t,e){if(null==e)return t._.transform;e=H(e).replace(/\.{3}|\u2026/g,t._.transform||"");var i,s=P.parseTransformString(e),n=0,o=1,a=1,r=t._,l=new X;if(r.transform=s||[],s)for(var h=0,c=s.length;h<c;h++){var d,u,p,f,g,m=s[h],v=m.length,b=H(m[0]).toLowerCase(),_=m[0]!=b,y=_?l.invert():0;"t"==b&&3==v?_?(d=y.x(0,0),u=y.y(0,0),p=y.x(m[1],m[2]),f=y.y(m[1],m[2]),l.translate(p-d,f-u)):l.translate(m[1],m[2]):"r"==b?2==v?(g=g||t.getBBox(1),l.rotate(m[1],g.x+g.width/2,g.y+g.height/2),n+=m[1]):4==v&&(_?(p=y.x(m[2],m[3]),f=y.y(m[2],m[3]),l.rotate(m[1],p,f)):l.rotate(m[1],m[2],m[3]),n+=m[1]):"s"==b?2==v||3==v?(g=g||t.getBBox(1),l.scale(m[1],m[v-1],g.x+g.width/2,g.y+g.height/2),o*=m[1],a*=m[v-1]):5==v&&(_?(p=y.x(m[3],m[4]),f=y.y(m[3],m[4]),l.scale(m[1],m[2],p,f)):l.scale(m[1],m[2],m[3],m[4]),o*=m[1],a*=m[2]):"m"==b&&7==v&&l.add(m[1],m[2],m[3],m[4],m[5],m[6]),r.dirtyT=1,t.matrix=l}t.matrix=l,r.sx=o,r.sy=a,r.deg=n,r.dx=e=l.e,r.dy=i=l.f,1==o&&1==a&&!n&&r.bbox?(r.bbox.x+=+e,r.bbox.y+=+i):r.dirtyT=1}),Zt=P._equaliseTransform=function(t,e){e=H(e).replace(/\.{3}|\u2026/g,t),t=P.parseTransformString(t)||[],e=P.parseTransformString(e)||[];for(var i,s,n,o,a=w(t.length,e.length),r=[],l=[],h=0;h<a;h++){if(n=t[h]||Wt(e[h]),o=e[h]||Wt(n),n[0]!=o[0]||"r"==n[0].toLowerCase()&&(n[2]!=o[2]||n[3]!=o[3])||"s"==n[0].toLowerCase()&&(n[3]!=o[3]||n[4]!=o[4]))return;for(r[h]=[],l[h]=[],i=0,s=w(n.length,o.length);i<s;i++)i in n&&(r[h][i]=n[i]),i in o&&(l[h][i]=o[i])}return{from:r,to:l}};function Jt(t){return t[0]*t[0]+t[1]*t[1]}function te(t){var e=D.sqrt(Jt(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}P._getContainer=function(t,e,i,s){var n=null!=s||P.is(t,"object")?t:f.doc.getElementById(t);return null!=n?n.tagName?null==e?{container:n,width:n.style.pixelWidth||n.offsetWidth,height:n.style.pixelHeight||n.offsetHeight}:{container:n,width:e,height:i}:{container:1,x:t,y:e,width:i,height:s}:void 0},P.pathToRelative=e,P._engine={},P.path2curve=Xt,P.matrix=function(t,e,i,s,n,o){return new X(t,e,i,s,n,o)},(e=X.prototype).add=function(t,e,i,s,n,o){var a,r,l,h,c=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],u=[[t,i,n],[e,s,o],[0,0,1]];for(t&&t instanceof X&&(u=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),a=0;a<3;a++)for(r=0;r<3;r++){for(l=h=0;l<3;l++)h+=d[a][l]*u[l][r];c[a][r]=h}this.a=c[0][0],this.b=c[1][0],this.c=c[0][1],this.d=c[1][1],this.e=c[0][2],this.f=c[1][2]},e.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new X(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},e.clone=function(){return new X(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(t,e){this.add(1,0,0,1,t,e)},e.scale=function(t,e,i,s){null==e&&(e=t),(i||s)&&this.add(1,0,0,1,i,s),this.add(t,0,0,e,0,0),(i||s)&&this.add(1,0,0,1,-i,-s)},e.rotate=function(t,e,i){t=P.rad(t),e=e||0,i=i||0;var s=+D.cos(t).toFixed(9),t=+D.sin(t).toFixed(9);this.add(s,t,-t,s,e,i),this.add(1,0,0,1,-e,-i)},e.x=function(t,e){return t*this.a+e*this.c+this.e},e.y=function(t,e){return t*this.b+e*this.d+this.f},e.get=function(t){return+this[H.fromCharCode(97+t)].toFixed(4)},e.toString=function(){return P.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var t={},e=(t.dx=this.e,t.dy=this.f,[[this.a,this.c],[this.b,this.d]]),i=(t.scalex=D.sqrt(Jt(e[0])),te(e[0]),t.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1],e[1]=[e[1][0]-e[0][0]*t.shear,e[1][1]-e[0][1]*t.shear],t.scaley=D.sqrt(Jt(e[1])),te(e[1]),t.shear/=t.scaley,-e[0][1]),e=e[1][1];return e<0?(t.rotate=P.deg(D.acos(e)),i<0&&(t.rotate=360-t.rotate)):t.rotate=P.deg(D.asin(i)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},e.toTransformString=function(t){t=t||this[ht]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:"")+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:"")+(t.rotate?"r"+[t.rotate,0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]};var i=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);t.safari="Apple Computer, Inc."==navigator.vendor&&(i&&i[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&i&&i[1]<8?function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:function(){};function ee(){this.returnValue=!1}function ie(){return this.originalEvent.preventDefault()}function se(){this.cancelBubble=!0}function ne(){return this.originalEvent.stopPropagation()}function oe(t){var e=f.doc.documentElement.scrollTop||f.doc.body.scrollTop,i=f.doc.documentElement.scrollLeft||f.doc.body.scrollLeft;return{x:t.clientX+i,y:t.clientY+e}}for(var ae=f.doc.addEventListener?function(o,t,a,r){function e(t){var e=oe(t);return a.call(r,t,e.x,e.y)}return o.addEventListener(t,e,!1),rt&&dt[t]&&o.addEventListener(dt[t],function(t){for(var e=oe(t),i=t,s=0,n=t.targetTouches&&t.targetTouches.length;s<n;s++)if(t.targetTouches[s].target==o){(t=t.targetTouches[s]).originalEvent=i,t.preventDefault=ie,t.stopPropagation=ne;break}return a.call(r,t,e.x,e.y)},!1),function(){return o.removeEventListener(t,e,!1),rt&&dt[t]&&o.removeEventListener(dt[t],e,!1),!0}}:f.doc.attachEvent?function(t,e,s,n){function i(t){t=t||f.win.event;var e=f.doc.documentElement.scrollTop||f.doc.body.scrollTop,i=f.doc.documentElement.scrollLeft||f.doc.body.scrollLeft,i=t.clientX+i,e=t.clientY+e;return t.preventDefault=t.preventDefault||ee,t.stopPropagation=t.stopPropagation||se,s.call(n,t,i,e)}t.attachEvent("on"+e,i);return function(){return t.detachEvent("on"+e,i),!0}}:void 0,re=[],le=function(t){for(var e,i=t.clientX,s=t.clientY,n=f.doc.documentElement.scrollTop||f.doc.body.scrollTop,o=f.doc.documentElement.scrollLeft||f.doc.body.scrollLeft,a=re.length;a--;){if(e=re[a],rt&&t.touches){for(var r,l=t.touches.length;l--;)if((r=t.touches[l]).identifier==e.el._drag.id){i=r.clientX,s=r.clientY,(t.originalEvent||t).preventDefault();break}}else t.preventDefault();var h,c=e.el.node,d=c.nextSibling,u=c.parentNode,p=c.style.display;f.win.opera&&u.removeChild(c),c.style.display="none",h=e.el.paper.getElementByPoint(i,s),c.style.display=p,f.win.opera&&(d?u.insertBefore(c,d):u.appendChild(c)),h&&$("raphael.drag.over."+e.el.id,e.el,h),i+=o,s+=n,$("raphael.drag.move."+e.el.id,e.move_scope||e.el,i-e.el._drag.x,s-e.el._drag.y,i,s,t)}},he=function(t){P.unmousemove(le).unmouseup(he);for(var e,i=re.length;i--;)(e=re[i]).el._drag={},$("raphael.drag.end."+e.el.id,e.end_scope||e.start_scope||e.move_scope||e.el,t);re=[]},n=P.el={},ce=ct.length;ce--;)!function(s){P[s]=n[s]=function(t,e){return P.is(t,"function")&&(this.events=this.events||[],this.events.push({name:s,f:t,unbind:ae(this.shape||this.node||f.doc,s,t,e||this)})),this},P["un"+s]=n["un"+s]=function(t){for(var e=this.events||[],i=e.length;i--;)e[i].name!=s||!P.is(t,"undefined")&&e[i].f!=t||(e[i].unbind(),e.splice(i,1),e.length)||delete this.events;return this}}(ct[ce]);n.data=function(t,e){var i=Tt[this.id]=Tt[this.id]||{};if(0==arguments.length)return i;if(1!=arguments.length)return i[t]=e,$("raphael.data.set."+this.id,this,e,t),this;if(P.is(t,"object")){for(var s in t)t[A](s)&&this.data(s,t[s]);return this}return $("raphael.data.get."+this.id,this,i[t],t),i[t]},n.removeData=function(t){return null==t?Tt[this.id]={}:Tt[this.id]&&delete Tt[this.id][t],this},n.getData=function(){return R(Tt[this.id]||{})},n.hover=function(t,e,i,s){return this.mouseover(t,i).mouseout(e,s||i)},n.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};function de(t,e,i,s,n,o,a,r,l){return null==l?V(t,e,i,s,n,o,a,r):P.findDotsAtSegment(t,e,i,s,n,o,a,r,function(t,e,i,s,n,o,a,r,l){if(!(l<0||l>V(t,e,i,s,n,o,a,r))){for(var h=.5,c=1-h,d=V(t,e,i,s,n,o,a,r,c);.01<S(d-l);)d=V(t,e,i,s,n,o,a,r,c+=(d<l?1:-1)*(h/=2));return c}}(t,e,i,s,n,o,a,r,l))}function ue(p,f){return function(t,e,i){for(var s,n,o,a,r,l="",h={},c=0,d=0,u=(t=Xt(t)).length;d<u;d++){if("M"==(o=t[d])[0])s=+o[1],n=+o[2];else{if(e<c+(a=de(s,n,o[1],o[2],o[3],o[4],o[5],o[6]))){if(f&&!h.start){if(l+=["C"+(r=de(s,n,o[1],o[2],o[3],o[4],o[5],o[6],e-c)).start.x,r.start.y,r.m.x,r.m.y,r.x,r.y],i)return l;h.start=l,l=["M"+r.x,r.y+"C"+r.n.x,r.n.y,r.end.x,r.end.y,o[5],o[6]].join(),c+=a,s=+o[5],n=+o[6];continue}if(!p&&!f)return{x:(r=de(s,n,o[1],o[2],o[3],o[4],o[5],o[6],e-c)).x,y:r.y,alpha:r.alpha}}c+=a,s=+o[5],n=+o[6]}l+=o.shift()+o}return h.end=l,r=(r=p?c:f?h:P.findDotsAtSegment(s,n,o[0],o[1],o[2],o[3],o[4],o[5],1)).alpha?{x:r.x,y:r.y,alpha:r.alpha}:r}}var pe,fe,ge,me,ve,be,_e=[],ye=(n.drag=function(s,n,o,a,r,l){function t(t){(t.originalEvent||t).preventDefault();var e=f.doc.documentElement.scrollTop||f.doc.body.scrollTop,i=f.doc.documentElement.scrollLeft||f.doc.body.scrollLeft;this._drag.x=t.clientX+i,this._drag.y=t.clientY+e,this._drag.id=t.identifier,re.length||P.mousemove(le).mouseup(he),re.push({el:this,move_scope:a,start_scope:r,end_scope:l}),n&&$.on("raphael.drag.start."+this.id,n),s&&$.on("raphael.drag.move."+this.id,s),o&&$.on("raphael.drag.end."+this.id,o),$("raphael.drag.start."+this.id,r||a||this,t.clientX+i,t.clientY+e,t)}return this._drag={},_e.push({el:this,start:t}),this.mousedown(t),this},n.onDragOver=function(t){t?$.on("raphael.drag.over."+this.id,t):$.unbind("raphael.drag.over."+this.id)},n.undrag=function(){for(var t=_e.length;t--;)_e[t].el==this&&(this.unmousedown(_e[t].start),_e.splice(t,1),$.unbind("raphael.drag.*."+this.id));_e.length||P.unmousemove(le).unmouseup(he),re=[]},t.circle=function(t,e,i){t=P._engine.circle(this,t||0,e||0,i||0);return this.__set__&&this.__set__.push(t),t},t.rect=function(t,e,i,s,n){t=P._engine.rect(this,t||0,e||0,i||0,s||0,n||0);return this.__set__&&this.__set__.push(t),t},t.ellipse=function(t,e,i,s){t=P._engine.ellipse(this,t||0,e||0,i||0,s||0);return this.__set__&&this.__set__.push(t),t},t.path=function(t){!t||P.is(t,pt)||P.is(t[0],b)||(t+="");var e=P._engine.path(P.format[m](P,arguments),this);return this.__set__&&this.__set__.push(e),e},t.image=function(t,e,i,s,n){t=P._engine.image(this,t||"about:blank",e||0,i||0,s||0,n||0);return this.__set__&&this.__set__.push(t),t},t.text=function(t,e,i){t=P._engine.text(this,t||0,e||0,H(i));return this.__set__&&this.__set__.push(t),t},t.set=function(t){P.is(t,"array")||(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new Se(t);return this.__set__&&this.__set__.push(e),e.paper=this,e.type="set",e},t.setStart=function(t){this.__set__=t||this.set()},t.setFinish=function(){var t=this.__set__;return delete this.__set__,t},t.setSize=function(t,e){return P._engine.setSize.call(this,t,e)},t.setViewBox=function(t,e,i,s,n){return P._engine.setViewBox.call(this,t,e,i,s,n)},t.top=t.bottom=null,t.raphael=P,t.getElementByPoint=function(t,e){var i,s,n,o,a,r=this.canvas,l=f.doc.elementFromPoint(t,e);if(!(l=f.win.opera&&"svg"==l.tagName&&(s=(i=r).getBoundingClientRect(),i=i.ownerDocument,n=i.body,i=i.documentElement,o=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0,o={y:s.top+(f.win.pageYOffset||i.scrollTop||n.scrollTop)-o,x:s.left+(f.win.pageXOffset||i.scrollLeft||n.scrollLeft)-a},(s=r.createSVGRect()).x=t-o.x,s.y=e-o.y,s.width=s.height=1,(i=r.getIntersectionList(s,null)).length)?i[i.length-1]:l))return null;for(;l.parentNode&&l!=r.parentNode&&!l.raphael;)l=l.parentNode;return(l=l==this.canvas.parentNode?r:l)&&l.raphael?this.getById(l.raphaelid):null},t.getElementsByBBox=function(e){var i=this.set();return this.forEach(function(t){P.isBBoxIntersect(t.getBBox(),e)&&i.push(t)}),i},t.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},t.forEach=function(t,e){for(var i=this.bottom;i;){if(!1===t.call(e,i))return this;i=i.next}return this},t.getElementsByPoint=function(e,i){var s=this.set();return this.forEach(function(t){t.isPointInside(e,i)&&s.push(t)}),s},n.isPointInside=function(t,e){var i=this.realPath=this.realPath||Pt[this.type](this);return P.isPointInsidePath(i,t,e)},n.getBBox=function(t){var e;return this.removed?{}:(e=this._,t?(!e.dirty&&e.bboxwt||(this.realPath=Pt[this.type](this),e.bboxwt=Bt(this.realPath),e.bboxwt.toString=c,e.dirty=0),e.bboxwt):(!e.dirty&&!e.dirtyT&&e.bbox||(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=Pt[this.type](this)),e.bbox=Bt(At(this.realPath,this.matrix)),e.bbox.toString=c,e.dirty=e.dirtyT=0),e.bbox))},n.clone=function(){var t;return this.removed?null:(t=this.paper[this.type]().attr(this.attr()),this.__set__&&this.__set__.push(t),t)},n.glow=function(t){if("text"==this.type)return null;for(var e={width:((t=t||{}).width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},i=e.width/2,s=this.paper,n=s.set(),o=this.realPath||Pt[this.type](this),o=this.matrix?At(o,this.matrix):o,a=1;a<1+i;a++)n.push(s.path(o).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/i*a).toFixed(3),opacity:+(e.opacity/i).toFixed(3)}));return n.insertBefore(this).translate(e.offsetx,e.offsety)},ue(1)),we=ue(),xe=ue(0,1),i=(P.getTotalLength=ye,P.getPointAtLength=we,P.getSubpath=function(t,e,i){return this.getTotalLength(t)-i<1e-6||(t=xe(t,i,1),e)?xe(t,e).end:t},n.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():ye(t)},n.getPointAtLength=function(t){var e=this.getPath();if(e)return we(e,t)},n.getPath=function(){var t,e=P._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return t=e?e(this):t},n.getSubpath=function(t,e){var i=this.getPath();if(i)return P.getSubpath(i,t,e)},P.easing_formulas={linear:function(t){return t},"<":function(t){return v(t,1.7)},">":function(t){return v(t,.48)},"<>":function(t){var t=.48-t/1.04,e=D.sqrt(.1734+t*t),i=e-t,e=-e-t,t=v(S(i),1/3)*(i<0?-1:1)+v(S(e),1/3)*(e<0?-1:1)+.5;return 3*(1-t)*t*t+t*t*t},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},elastic:function(t){return t==!!t?t:v(2,-10*t)*D.sin(2*(t-.075)*I/.3)+1},bounce:function(t){var e=7.5625,i=2.75,e=t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375;return e}}),q=(i.easeIn=i["ease-in"]=i["<"],i.easeOut=i["ease-out"]=i[">"],i.easeInOut=i["ease-in-out"]=i["<>"],i["back-in"]=i.backIn,i["back-out"]=i.backOut,[]),ke=r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame||function(t){setTimeout(t,16)},Ce=function(){for(var t=+new Date,e=0;q.length>e;e++){var i=q[e];if(!i.el.removed&&!i.paused){var s,n=t-i.start,o=i.ms,a=i.easing,r=i.from,l=i.diff,h=i.to,c=(i.t,i.el),d={},u={};if(i.initstatus?(n=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*o,i.status=i.initstatus,delete i.initstatus,i.stop&&q.splice(e--,1)):i.status=(i.prev+(i.percent-i.prev)*(n/o))/i.anim.top,!(n<0))if(n<o){var p,f=a(n/o);for(p in r)if(r[A](p)){switch(xt[p]){case E:g=+r[p]+f*o*l[p];break;case"colour":g="rgb("+[De(bt(r[p].r+f*o*l[p].r)),De(bt(r[p].g+f*o*l[p].g)),De(bt(r[p].b+f*o*l[p].b))].join(",")+")";break;case"path":for(var g=[],m=0,v=r[p].length;m<v;m++){g[m]=[r[p][m][0]];for(var b=1,_=r[p][m].length;b<_;b++)g[m][b]=+r[p][m][b]+f*o*l[p][m][b];g[m]=g[m].join(lt)}g=g.join(lt);break;case"transform":if(l[p].real)for(g=[],m=0,v=r[p].length;m<v;m++)for(g[m]=[r[p][m][0]],b=1,_=r[p][m].length;b<_;b++)g[m][b]=r[p][m][b]+f*o*l[p][m][b];else{function y(t){return+r[p][t]+f*o*l[p][t]}g=[["m",y(0),y(1),y(2),y(3),y(4),y(5)]]}break;case"csv":if("clip-rect"==p)for(g=[],m=4;m--;)g[m]=+r[p][m]+f*o*l[p][m];break;default:var w=[][z](r[p]);for(g=[],m=c.paper.customAttributes[p].length;m--;)g[m]=+w[m]+f*o*l[p][m]}d[p]=g}c.attr(d),function(t,e,i){setTimeout(function(){$("raphael.anim.frame."+t,e,i)})}(c.id,c,i.anim)}else{if(function(t,e,i){setTimeout(function(){$("raphael.anim.frame."+e.id,e,i),$("raphael.anim.finish."+e.id,e,i),P.is(t,"function")&&t.call(e)})}(i.callback,c,i.anim),c.attr(h),q.splice(e--,1),1<i.repeat&&!i.next){for(s in h)h[A](s)&&(u[s]=i.totalOrigin[s]);i.el.attr(u),Q(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&Q(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}P.svg&&c&&c.paper&&c.paper.safari(),q.length&&ke(Ce)},De=function(t){return 255<t?255:t<0?0:t},Se=(n.animateWith=function(t,e,i,s,n,o){var a=this;if(a.removed)o&&o.call(a);else{i=i instanceof d?i:P.animation(i,s,n,o);Q(i,a,i.percents[0],null,a.attr());for(var r=0,l=q.length;r<l;r++)if(q[r].anim==e&&q[r].el==t){q[l-1].start=q[r].start;break}}return a},n.onAnimation=function(t){return t?$.on("raphael.anim.frame."+this.id,t):$.unbind("raphael.anim.frame."+this.id),this},d.prototype.delay=function(t){var e=new d(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},d.prototype.repeat=function(t){var e=new d(this.anim,this.ms);return e.del=this.del,e.times=D.floor(w(t,0))||1,e},P.animation=function(t,e,i,s){if(t instanceof d)return t;!P.is(i,"function")&&i||(s=s||i||null,i=null),e=+e||0;var n,o,a={};for(o in t=Object(t))t[A](o)&&N(o)!=o&&N(o)+"%"!=o&&(n=!0,a[o]=t[o]);return n?(i&&(a.easing=i),s&&(a.callback=s),new d({100:a},e)):new d(t,e)},n.animate=function(t,e,i,s){var n=this;return n.removed?s&&s.call(n):Q(t=t instanceof d?t:P.animation(t,e,i,s),n,t.percents[0],null,n.attr()),n},n.setTime=function(t,e){return t&&null!=e&&this.status(t,x(e,t.ms)/t.ms),this},n.status=function(t,e){var i,s,n=[],o=0;if(null!=e)return Q(t,this,-1,x(e,1)),this;for(i=q.length;o<i;o++)if((s=q[o]).el.id==this.id&&(!t||s.anim==t)){if(t)return s.status;n.push({anim:s.anim,status:s.status})}return t?0:n},n.pause=function(t){for(var e=0;q.length>e;e++)q[e].el.id!=this.id||t&&q[e].anim!=t||!1!==$("raphael.anim.pause."+this.id,this,q[e].anim)&&(q[e].paused=!0);return this},n.resume=function(t){for(var e,i=0;q.length>i;i++)q[i].el.id!=this.id||t&&q[i].anim!=t||(e=q[i],!1!==$("raphael.anim.resume."+this.id,this,e.anim)&&(delete e.paused,this.status(e.anim,e.status)));return this},n.stop=function(t){for(var e=0;q.length>e;e++)q[e].el.id!=this.id||t&&q[e].anim!=t||!1!==$("raphael.anim.stop."+this.id,this,q[e].anim)&&q.splice(e--,1);return this},$.on("raphael.remove",u),$.on("raphael.clear",u),n.toString=function(){return"Raphals object"},function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,i=t.length;e<i;e++)!t[e]||t[e].constructor!=n.constructor&&t[e].constructor!=Se||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)}),s=Se.prototype;for(pe in s.push=function(){for(var t,e,i=0,s=arguments.length;i<s;i++)!(t=arguments[i])||t.constructor!=n.constructor&&t.constructor!=Se||(this[e=this.items.length]=this.items[e]=t,this.length++);return this},s.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},s.forEach=function(t,e){for(var i=0,s=this.items.length;i<s;i++)if(!1===t.call(e,this.items[i],i))return this;return this},n)n[A](pe)&&(s[pe]=function(i){return function(){var e=arguments;return this.forEach(function(t){t[i][m](t,e)})}}(pe));if(s.attr=function(t,e){if(t&&P.is(t,b)&&P.is(t[0],"object"))for(var i=0,s=t.length;i<s;i++)this.items[i].attr(t[i]);else for(var n=0,o=this.items.length;n<o;n++)this.items[n].attr(t,e);return this},s.clear=function(){for(;this.length;)this.pop()},s.splice=function(t,e){t=t<0?w(this.length+t,0):t,e=w(0,x(this.length-t,e));for(var i=[],s=[],n=[],o=2;o<arguments.length;o++)n.push(arguments[o]);for(o=0;o<e;o++)s.push(this[t+o]);for(;this.length-t>o;o++)i.push(this[t+o]);var a=n.length;for(o=0;o<a+i.length;o++)this.items[t+o]=this[t+o]=o<a?n[o]:i[o-a];for(o=this.items.length=this.length-=e-a;this[o];)delete this[o++];return new Se(s)},s.exclude=function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]==t)return this.splice(e,1),!0},s.animate=function(t,e,i,s){!P.is(i,"function")&&i||(s=i||null);var n,o=this.items.length,a=o,r=this;if(o){s&&(n=function(){--o||s.call(r)}),i=P.is(i,pt)?i:n;for(var l=P.animation(t,e,i,n),h=this.items[--a].animate(l);a--;)this.items[a]&&!this.items[a].removed&&this.items[a].animateWith(h,l,l),this.items[a]&&!this.items[a].removed||o--}return this},s.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},s.getBBox=function(){for(var t,e=[],i=[],s=[],n=[],o=this.items.length;o--;)this.items[o].removed||(t=this.items[o].getBBox(),e.push(t.x),i.push(t.y),s.push(t.x+t.width),n.push(t.y+t.height));return{x:e=x[m](0,e),y:i=x[m](0,i),x2:s=w[m](0,s),y2:n=w[m](0,n),width:s-e,height:n-i}},s.clone=function(t){t=this.paper.set();for(var e=0,i=this.items.length;e<i;e++)t.push(this.items[e].clone());return t},s.toString=function(){return"Raphals set"},s.glow=function(e){var i=this.paper.set();return this.forEach(function(t){t=t.glow(e);null!=t&&t.forEach(function(t){i.push(t)})}),i},s.isPointInside=function(e,i){var s=!1;return this.forEach(function(t){return t.isPointInside(e,i)?(console.log("runned"),!(s=!0)):void 0}),s},P.registerFont=function(t){if(t.face){this.fonts=this.fonts||{};var e,i={w:t.w,face:{},glyphs:{}},s=t.face["font-family"];for(e in t.face)t.face[A](e)&&(i.face[e]=t.face[e]);if(this.fonts[s]?this.fonts[s].push(i):this.fonts[s]=[i],!t.svg)for(var n in i.face["units-per-em"]=_t(t.face["units-per-em"],10),t.glyphs)if(t.glyphs[A](n)){var o=t.glyphs[n];if(i.glyphs[n]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},o.k)for(var a in o.k)o[A](a)&&(i.glyphs[n].k[a]=o.k[a])}}return t},t.getFont=function(t,e,i,s){if(s=s||"normal",i=i||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,P.fonts){var n,o=P.fonts[t];if(!o){var a,r=RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i");for(a in P.fonts)if(P.fonts[A](a)&&r.test(a)){o=P.fonts[a];break}}if(o)for(var l=0,h=o.length;l<h&&((n=o[l]).face["font-weight"]!=e||n.face["font-style"]!=i&&n.face["font-style"]||n.face["font-stretch"]!=s);l++);return n}},t.print=function(t,e,i,s,n,o,a,r){o=o||"middle",a=w(x(a||0,1),-1),r=w(x(r||1,3),1);var l=H(i)[ht](""),h=0,c=0,d="";if(s=P.is(s,"string")?this.getFont(s):s)for(var u,p,f=(n||16)/s.face["units-per-em"],i=s.face.bbox[ht](st),g=+i[0],m=i[3]-i[1],v=0,b=+i[1]+("baseline"==o?m+ +s.face.descent:m/2),_=0,y=l.length;_<y;_++)"\n"==l[_]?(c=p=h=0,v+=m*r):(u=c&&s.glyphs[l[_-1]]||{},p=s.glyphs[l[_]],h+=c?(u.w||s.w)+(u.k&&u.k[l[_]]||0)+s.w*a:0,c=1),p&&p.d&&(d+=P.transformPath(p.d,["t",h*f,v*f,"s",f,f,g,b,"t",(t-g)/f,(e-b)/f]));return this.path(d).attr({fill:"#000",stroke:"none"})},t.add=function(t){if(P.is(t,"array"))for(var e,i=this.set(),s=0,n=t.length;s<n;s++)e=t[s]||{},nt[A](e.type)&&i.push(this[e.type]().attr(e));return i},P.format=function(t,e){var i=P.is(e,b)?[0][z](e):arguments;return(t=t&&P.is(t,pt)&&i.length-1?t.replace(ot,function(t,e){return null==i[++e]?"":i[e]}):t)||""},P.fullfill=(ve=/\{([^\}]+)\}/g,be=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(t,s){return(t+"").replace(ve,function(t,e){return t=t,o=i=s,e.replace(be,function(t,e,i,s,n){e=e||s,o&&"function"==typeof(o=e in o?o[e]:o)&&n&&(o=o())}),o=(null==o||o==i?t:o)+"";var i,o})}),P.ninja=function(){return at.was?f.win.Raphael=at.is:delete Raphael,P},P.st=s,fe=document,ge="DOMContentLoaded",null==fe.readyState&&fe.addEventListener&&(fe.addEventListener(ge,me=function(){fe.removeEventListener(ge,me,!1),fe.readyState="complete"},!1),fe.readyState="loading"),function t(){/in/.test(fe.readyState)?setTimeout(t,9):P.eve("raphael.DOMload")}(),$.on("raphael.DOMload",function(){tt=!0}),P.svg){function Ie(t,e){var s="linear",i=t.id+e,n=.5,o=.5,a=t.node,r=t.paper,l=a.style,h=P._g.doc.getElementById(i);if(!h){if(e=(e=T(e).replace(P._radial_gradient,function(t,e,i){return s="radial",e&&i&&(n=g(e),e=2*(.5<(o=g(i)))-1,.25<Le(n-.5,2)+Le(o-.5,2))&&(o=Ee.sqrt(.25-Le(n-.5,2))*e+.5)&&.5!=o&&(o=o.toFixed(5)-1e-5*e),We})).split(/\s*\-\s*/),"linear"==s){var c=e.shift(),c=-g(c);if(isNaN(c))return null;var c=[0,0,Ee.cos(P.rad(c)),Ee.sin(P.rad(c))],d=1/(Ne(qe(c[2]),qe(c[3]))||1);c[2]*=d,c[3]*=d,c[2]<0&&(c[0]=-c[2],c[2]=0),c[3]<0&&(c[1]=-c[3],c[3]=0)}var u=P._parseDots(e);if(!u)return null;if(i=i.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&i!=t.gradient.id&&(r.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){h=L(s+"Gradient",{id:i}),t.gradient=h,L(h,"radial"==s?{fx:n,fy:o}:{x1:c[0],y1:c[1],x2:c[2],y2:c[3],gradientTransform:t.matrix.invert()}),r.defs.appendChild(h);for(var p=0,f=u.length;p<f;p++)h.appendChild(L("stop",{offset:u[p].offset||(p?"100%":"0%"),"stop-color":u[p].color||"#fff"}))}}return L(a,{fill:"url(#"+i+")",opacity:1,"fill-opacity":1}),l.fill=We,l.opacity=1,l.fillOpacity=1}function Me(t){var e=t.getBBox(1);L(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})}function Te(t,e,i){if("path"==t.type){for(var s,n,o,a,r,l,h,c,d,u=T(e).toLowerCase().split("-"),p=t.paper,f=i?"end":"start",g=t.node,m=t.attrs,v=m["stroke-width"],b=u.length,_="classic",y=3,w=3,x=5;b--;)switch(u[b]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=u[b];break;case"wide":w=5;break;case"narrow":w=2;break;case"long":y=5;break;case"short":y=2}for(c in c="open"==_?(y+=2,w+=2,x+=2,n=1,l=i?4:1,{fill:"none",stroke:m.stroke}):(l=n=y/2,{fill:m.stroke,stroke:"none"}),t._.arrows?i?(t._.arrows.endPath&&Be[t._.arrows.endPath]--,t._.arrows.endMarker&&Be[t._.arrows.endMarker]--):(t._.arrows.startPath&&Be[t._.arrows.startPath]--,t._.arrows.startMarker&&Be[t._.arrows.startMarker]--):t._.arrows={},"none"!=_?(a="raphael-marker-"+f+_+y+w+t.id,P._g.doc.getElementById(o="raphael-marker-"+_)?Be[o]++:(p.defs.appendChild(L(L("path"),{"stroke-linecap":"round",d:Re[_],id:o})),Be[o]=1),(h=P._g.doc.getElementById(a))?(Be[a]++,r=h.getElementsByTagName("use")[0]):(h=L(L("marker"),{id:a,markerHeight:w,markerWidth:y,orient:"auto",refX:l,refY:w/2}),r=L(L("use"),{"xlink:href":"#"+o,transform:(i?"rotate(180 "+y/2+" "+w/2+") ":We)+"scale("+y/x+","+w/x+")","stroke-width":(1/((y/x+w/x)/2)).toFixed(4)}),h.appendChild(r),p.defs.appendChild(h),Be[a]=1),L(r,c),l=n*("diamond"!=_&&"oval"!=_),h=i?(s=t._.arrows.startdx*v||0,P.getTotalLength(m.path)-l*v):(s=l*v,P.getTotalLength(m.path)-(t._.arrows.enddx*v||0)),(c={})["marker-"+f]="url(#"+a+")",(h||s)&&(c.d=P.getSubpath(m.path,s,h)),L(g,c),t._.arrows[f+"Path"]=o,t._.arrows[f+"Marker"]=a,t._.arrows[f+"dx"]=l,t._.arrows[f+"Type"]=_,t._.arrows[f+"String"]=e):(h=i?(s=t._.arrows.startdx*v||0,P.getTotalLength(m.path)-s):(s=0,P.getTotalLength(m.path)-(t._.arrows.enddx*v||0)),t._.arrows[f+"Path"]&&L(g,{d:P.getSubpath(m.path,s,h)}),delete t._.arrows[f+"Path"],delete t._.arrows[f+"Marker"],delete t._.arrows[f+"dx"],delete t._.arrows[f+"Type"],delete t._.arrows[f+"String"]),Be)Be[M](c)&&!Be[c]&&(d=P._g.doc.getElementById(c))&&d.parentNode.removeChild(d)}}function $e(t,e,i){if(e=Ye[T(e).toLowerCase()]){for(var s=t.attrs["stroke-width"]||"1",n={round:s,square:s,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,o=[],a=e.length;a--;)o[a]=e[a]*s+(a%2?1:-1)*n;L(t.node,{"stroke-dasharray":o.join(",")})}}function Pe(s,t){var e,i=s.node,n=s.attrs,o=i.style.visibility;for(e in i.style.visibility="hidden",t)if(t[M](e)){if(!P._availableAttrs[M](e))continue;var a=t[e];switch(n[e]=a,e){case"blur":s.blur(a);break;case"href":case"title":case"target":var r=i.parentNode;"a"!=r.tagName.toLowerCase()&&(l=L("a"),r.insertBefore(l,i),l.appendChild(i),r=l),"target"==e?r.setAttributeNS(Fe,"show","blank"==a?"new":a):r.setAttributeNS(Fe,e,a);break;case"cursor":i.style.cursor=a;break;case"transform":s.transform(a);break;case"arrow-start":Te(s,a);break;case"arrow-end":Te(s,a,1);break;case"clip-rect":var l=T(a).split(Oe);4==l.length&&(s.clip&&s.clip.parentNode.parentNode.removeChild(s.clip.parentNode),c=L("clipPath"),r=L("rect"),c.id=P.createUUID(),L(r,{x:l[0],y:l[1],width:l[2],height:l[3]}),c.appendChild(r),s.paper.defs.appendChild(c),L(i,{"clip-path":"url(#"+c.id+")"}),s.clip=r),a||(g=i.getAttribute("clip-path"))&&((g=P._g.doc.getElementById(g.replace(/(^url\(#|\)$)/g,We)))&&g.parentNode.removeChild(g),L(i,{"clip-path":We}),delete s.clip);break;case"path":"path"==s.type&&(L(i,{d:a?n.path=P._pathToAbsolute(a):"M0,0"}),s._.dirty=1,s._.arrows)&&("startString"in s._.arrows&&Te(s,s._.arrows.startString),"endString"in s._.arrows)&&Te(s,s._.arrows.endString,1);break;case"width":if(i.setAttribute(e,a),s._.dirty=1,!n.fx)break;e="x",a=n.x;case"x":n.fx&&(a=-n.x-(n.width||0));case"rx":if("rx"==e&&"rect"==s.type)break;case"cx":i.setAttribute(e,a),s.pattern&&Me(s),s._.dirty=1;break;case"height":if(i.setAttribute(e,a),s._.dirty=1,!n.fy)break;e="y",a=n.y;case"y":n.fy&&(a=-n.y-(n.height||0));case"ry":if("ry"==e&&"rect"==s.type)break;case"cy":i.setAttribute(e,a),s.pattern&&Me(s),s._.dirty=1;break;case"r":"rect"==s.type?L(i,{rx:a,ry:a}):i.setAttribute(e,a),s._.dirty=1;break;case"src":"image"==s.type&&i.setAttributeNS(Fe,"href",a);break;case"stroke-width":1==s._.sx&&1==s._.sy||(a/=Ne(qe(s._.sx),qe(s._.sy))||1),s.paper._vbSize&&(a*=s.paper._vbSize),i.setAttribute(e,a),n["stroke-dasharray"]&&$e(s,n["stroke-dasharray"],t),s._.arrows&&("startString"in s._.arrows&&Te(s,s._.arrows.startString),"endString"in s._.arrows)&&Te(s,s._.arrows.endString,1);break;case"stroke-dasharray":$e(s,a,t);break;case"fill":var h=T(a).match(P._ISURL);if(h){var c=L("pattern"),d=L("image");c.id=P.createUUID(),L(c,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),L(d,{x:0,y:0,"xlink:href":h[1]}),c.appendChild(d),function(i){P._preload(h[1],function(){var t=this.offsetWidth,e=this.offsetHeight;L(i,{width:t,height:e}),L(d,{width:t,height:e}),s.paper.safari()})}(c),s.paper.defs.appendChild(c),L(i,{fill:"url(#"+c.id+")"}),s.pattern=c,s.pattern&&Me(s);break}var u,p,f=P.getRGB(a);if(f.error){if(("circle"==s.type||"ellipse"==s.type||"r"!=T(a).charAt())&&Ie(s,a)){("opacity"in n||"fill-opacity"in n)&&(u=P._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,We)))&&(p=u.getElementsByTagName("stop"),L(p[p.length-1],{"stop-opacity":("opacity"in n?n.opacity:1)*("fill-opacity"in n?n["fill-opacity"]:1)})),n.gradient=a,n.fill="none";break}}else delete t.gradient,delete n.gradient,!P.is(n.opacity,"undefined")&&P.is(t.opacity,"undefined")&&L(i,{opacity:n.opacity}),!P.is(n["fill-opacity"],"undefined")&&P.is(t["fill-opacity"],"undefined")&&L(i,{"fill-opacity":n["fill-opacity"]});f[M]("opacity")&&L(i,{"fill-opacity":1<f.opacity?f.opacity/100:f.opacity});case"stroke":f=P.getRGB(a),i.setAttribute(e,f.hex),"stroke"==e&&f[M]("opacity")&&L(i,{"stroke-opacity":1<f.opacity?f.opacity/100:f.opacity}),"stroke"==e&&s._.arrows&&("startString"in s._.arrows&&Te(s,s._.arrows.startString),"endString"in s._.arrows)&&Te(s,s._.arrows.endString,1);break;case"gradient":"circle"!=s.type&&"ellipse"!=s.type&&"r"==T(a).charAt()||Ie(s,a);break;case"opacity":n.gradient&&!n[M]("stroke-opacity")&&L(i,{"stroke-opacity":1<a?a/100:a});case"fill-opacity":if(n.gradient){(u=P._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,We)))&&(p=u.getElementsByTagName("stop"),L(p[p.length-1],{"stop-opacity":a}));break}default:"font-size"==e&&(a=He(a,10)+"px");var g=e.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});i.style[g]=a,s._.dirty=1,i.setAttribute(e,a)}}var m=s,v=t;if("text"==m.type&&(v[M]("text")||v[M]("font")||v[M]("font-size")||v[M]("x")||v[M]("y"))){var b=m.attrs,_=m.node,y=_.firstChild?He(P._g.doc.defaultView.getComputedStyle(_.firstChild,We).getPropertyValue("font-size"),10):10;if(v[M]("text")){for(b.text=v.text;_.firstChild;)_.removeChild(_.firstChild);for(var w,x=T(v.text).split("\n"),k=[],C=0,D=x.length;C<D;C++)w=L("tspan"),C&&L(w,{dy:y*Ve,x:b.x}),w.appendChild(P._g.doc.createTextNode(x[C])),_.appendChild(w),k[C]=w}else for(k=_.getElementsByTagName("tspan"),C=0,D=k.length;C<D;C++)C?L(k[C],{dy:y*Ve,x:b.x}):L(k[0],{dy:0});L(_,{x:b.x,y:b.y}),m._.dirty=1,v=m._getBBox(),(m=b.y-(v.y+v.height/2))&&P.is(m,"finite")&&L(k[0],{dy:m})}i.style.visibility=o}function Ae(t,e){(this[0]=this.node=t).raphael=!0,this.id=P._oid++,t.raphaelid=this.id,this.matrix=P.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},e.bottom||(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),(e.top=this).next=null}var ze,M="hasOwnProperty",T=String,g=parseFloat,He=parseInt,Ee=Math,Ne=Ee.max,qe=Ee.abs,Le=Ee.pow,Oe=/[, ]+/,je=P.eve,We="",Fe="http://www.w3.org/1999/xlink",Re={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},Be={},L=(P.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version},function(t,e){if(e)for(var i in"string"==typeof t&&(t=L(t)),e)e[M](i)&&("xlink:"==i.substring(0,6)?t.setAttributeNS(Fe,i.substring(6),T(e[i])):t.setAttribute(i,T(e[i])));else(t=P._g.doc.createElementNS("http://www.w3.org/2000/svg",t)).style&&(t.style.webkitTapHighlightColor="rgba(0,0,0,0)");return t}),Ye={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},Ve=1.2,o=P.el,Ue=((Ae.prototype=o).constructor=Ae,P._engine.path=function(t,e){var i=L("path"),i=(e.canvas&&e.canvas.appendChild(i),new Ae(i,e));return i.type="path",Pe(i,{fill:"none",stroke:"#000",path:t}),i},o.rotate=function(t,e,i){var s;return this.removed||((t=T(t).split(Oe)).length-1&&(e=g(t[1]),i=g(t[2])),t=g(t[0]),null!=(e=null==i?i:e)&&null!=i||(e=(s=this.getBBox(1)).x+s.width/2,i=s.y+s.height/2),this.transform(this._.transform.concat([["r",t,e,i]]))),this},o.scale=function(t,e,i,s){var n;return this.removed||((t=T(t).split(Oe)).length-1&&(e=g(t[1]),i=g(t[2]),s=g(t[3])),t=g(t[0]),null==e&&(e=t),null!=(i=null==s?s:i)&&null!=s||(n=this.getBBox(1)),i=null==i?n.x+n.width/2:i,s=null==s?n.y+n.height/2:s,this.transform(this._.transform.concat([["s",t,e,i,s]]))),this},o.translate=function(t,e){return this.removed||((t=T(t).split(Oe)).length-1&&(e=g(t[1])),t=g(t[0])||0,this.transform(this._.transform.concat([["t",t,e=+e||0]]))),this},o.transform=function(t){var e=this._;return null==t?e.transform:(P._extractTransform(this,t),this.clip&&L(this.clip,{transform:this.matrix.invert()}),this.pattern&&Me(this),this.node&&L(this.node,{transform:this.matrix}),1==e.sx&&1==e.sy||(t=this.attrs[M]("stroke-width")?this.attrs["stroke-width"]:1,this.attr({"stroke-width":t})),this)},o.hide=function(){return this.removed||this.paper.safari(this.node.style.display="none"),this},o.show=function(){return this.removed||this.paper.safari(this.node.style.display=""),this},o.remove=function(){if(!this.removed&&this.node.parentNode){var t,e=this.paper;for(t in e.__set__&&e.__set__.exclude(this),je.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),P._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node),this)this[t]="function"==typeof this[t]?P._removedFactory(t):null;this.removed=!0}},o._getBBox=function(){"none"==this.node.style.display&&(this.show(),t=!0);var t,e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}return t&&this.hide(),e},o.attr=function(t,e){if(!this.removed){if(null==t){var i,s={};for(i in this.attrs)this.attrs[M](i)&&(s[i]=this.attrs[i]);return s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform,s}if(null==e&&P.is(t,"string")){if("fill"==t&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==t)return this._.transform;for(var n=t.split(Oe),o={},a=0,r=n.length;a<r;a++)o[t=n[a]]=t in this.attrs?this.attrs[t]:P.is(this.paper.customAttributes[t],"function")?this.paper.customAttributes[t].def:P._availableAttrs[t];return r-1?o:o[n[0]]}if(null==e&&P.is(t,"array")){for(o={},a=0,r=t.length;a<r;a++)o[t[a]]=this.attr(t[a]);return o}var l,h;for(h in null!=e?(l={})[t]=e:null!=t&&P.is(t,"object")&&(l=t),l)je("raphael.attr."+h+"."+this.id,this,l[h]);for(h in this.paper.customAttributes)if(this.paper.customAttributes[M](h)&&l[M](h)&&P.is(this.paper.customAttributes[h],"function")){var c,d=this.paper.customAttributes[h].apply(this,[].concat(l[h]));for(c in this.attrs[h]=l[h],d)d[M](c)&&(l[c]=d[c])}Pe(this,l)}return this},o.toFront=function(){var t;return this.removed||("a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node),(t=this.paper).top!=this&&P._tofront(this,t)),this},o.toBack=function(){var t;return this.removed||("a"==(t=this.node.parentNode).tagName.toLowerCase()?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),P._toback(this,this.paper),this.paper),this},o.insertAfter=function(t){var e;return this.removed||((e=t.node||t[t.length-1].node).nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node),P._insertafter(this,t,this.paper)),this},o.insertBefore=function(t){var e;return this.removed||((e=t.node||t[0].node).parentNode.insertBefore(this.node,e),P._insertbefore(this,t,this.paper)),this},o.blur=function(t){var e,i,s=this;return 0!=+t?(e=L("filter"),i=L("feGaussianBlur"),s.attrs.blur=t,e.id=P.createUUID(),L(i,{stdDeviation:+t||1.5}),e.appendChild(i),s.paper.defs.appendChild(e),s._blur=e,L(s.node,{filter:"url(#"+e.id+")"})):(s._blur&&(s._blur.parentNode.removeChild(s._blur),delete s._blur,delete s.attrs.blur),s.node.removeAttribute("filter")),s},P._engine.circle=function(t,e,i,s){var n=L("circle"),t=(t.canvas&&t.canvas.appendChild(n),new Ae(n,t));return t.attrs={cx:e,cy:i,r:s,fill:"none",stroke:"#000"},t.type="circle",L(n,t.attrs),t},P._engine.rect=function(t,e,i,s,n,o){var a=L("rect"),t=(t.canvas&&t.canvas.appendChild(a),new Ae(a,t));return t.attrs={x:e,y:i,width:s,height:n,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},t.type="rect",L(a,t.attrs),t},P._engine.ellipse=function(t,e,i,s,n){var o=L("ellipse"),t=(t.canvas&&t.canvas.appendChild(o),new Ae(o,t));return t.attrs={cx:e,cy:i,rx:s,ry:n,fill:"none",stroke:"#000"},t.type="ellipse",L(o,t.attrs),t},P._engine.image=function(t,e,i,s,n,o){var a=L("image"),a=(L(a,{x:i,y:s,width:n,height:o,preserveAspectRatio:"none"}),a.setAttributeNS(Fe,"href",e),t.canvas&&t.canvas.appendChild(a),new Ae(a,t));return a.attrs={x:i,y:s,width:n,height:o,src:e},a.type="image",a},P._engine.text=function(t,e,i,s){var n=L("text"),n=(t.canvas&&t.canvas.appendChild(n),new Ae(n,t));return n.attrs={x:e,y:i,"text-anchor":"middle",text:s,font:P._availableAttrs.font,stroke:"none",fill:"#000"},n.type="text",Pe(n,n.attrs),n},P._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},P._engine.create=function(){var t,e,i,s=P._getContainer.apply(0,arguments),n=s&&s.container,o=s.x,a=s.y,r=s.width,s=s.height;if(n)return e=L("svg"),i="overflow:hidden;",o=o||0,a=a||0,L(e,{height:s=s||342,version:1.1,width:r=r||512,xmlns:"http://www.w3.org/2000/svg"}),1==n?(e.style.cssText=i+"position:absolute;left:"+o+"px;top:"+a+"px",P._g.doc.body.appendChild(e),t=1):(e.style.cssText=i+"position:relative",n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e)),(n=new P._Paper).width=r,n.height=s,n.canvas=e,n.clear(),n._left=n._top=0,t&&(n.renderfix=function(){}),n.renderfix(),n;throw Error("SVG container not found.")},P._engine.setViewBox=function(t,e,i,s,n){je("raphael.setViewBox",this,this._viewBox,[t,e,i,s,n]);var o,a=Ne(i/this.width,s/this.height),r=this.top,l=n?"meet":"xMinYMin",h=null==t?(this._vbSize&&(a=1),delete this._vbSize,"0 0 "+this.width+" "+this.height):(this._vbSize=a,t+" "+e+" "+i+" "+s);for(L(this.canvas,{viewBox:h,preserveAspectRatio:l});a&&r;)o="stroke-width"in r.attrs?r.attrs["stroke-width"]:1,r.attr({"stroke-width":o}),r._.dirty=1,r._.dirtyT=1,r=r.prev;return this._viewBox=[t,e,i,s,!!n],this},P.prototype.renderfix=function(){var e=this.canvas,t=e.style;try{i=e.getScreenCTM()||e.createSVGMatrix()}catch(t){i=e.createSVGMatrix()}var e=-i.e%1,i=-i.f%1;(e||i)&&(e&&(this._left=(this._left+e)%1,t.left=this._left+"px"),i)&&(this._top=(this._top+i)%1,t.top=this._top+"px")},P.prototype.clear=function(){P.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=L("desc")).appendChild(P._g.doc.createTextNode("Created with Raphal "+P.version)),t.appendChild(this.desc),t.appendChild(this.defs=L("defs"))},P.prototype.remove=function(){for(var t in je("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?P._removedFactory(t):null},P.st);for(ze in o)o[M](ze)&&!Ue[M](ze)&&(Ue[ze]=function(i){return function(){var e=arguments;return this.forEach(function(t){t[i].apply(t,e)})}}(ze))}if(P.vml){function Xe(t,e,i){var s=P.matrix();return s.rotate(-t,.5,.5),{dx:s.x(e,i),dy:s.y(e,i)}}function Ge(t,e,i,s,n,o){var a,r=t._,l=t.matrix,h=r.fillpos,t=t.node,c=t.style,d=1,u="",p=F/e,f=F/i;c.visibility="hidden",e&&i&&(t.coordsize=oi(p)+j+oi(f),c.rotation=o*(e*i<0?-1:1),o&&(s=(a=Xe(o,s,n)).dx,n=a.dy),e<0&&(u+="x"),i<0&&(u+=" y")&&(d=-1),c.flip=u,t.coordorigin=s*-p+j+n*-f,(h||r.fillsize)&&(u=(u=t.getElementsByTagName(ai))&&u[0],t.removeChild(u),h&&(a=Xe(o,l.x(h[0],h[1]),l.y(h[0],h[1])),u.position=a.dx*d+j+a.dy*d),r.fillsize&&(u.size=r.fillsize[0]*oi(e)+j+r.fillsize[1]*oi(i)),t.appendChild(u)),c.visibility="visible")}function Qe(t,e,i){for(var s=y(e).toLowerCase().split("-"),e=i?"end":"start",n=s.length,o="classic",a="medium",r="medium";n--;)switch(s[n]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":o=s[n];break;case"wide":case"narrow":r=s[n];break;case"long":case"short":a=s[n]}i=t.node.getElementsByTagName("stroke")[0];i[e+"arrow"]=o,i[e+"arrowlength"]=a,i[e+"arrowwidth"]=r}function Ke(t,e){t.attrs=t.attrs||{};var i,s=t.node,n=t.attrs,o=s.style,a=fi[t.type]&&(e.x!=n.x||e.y!=n.y||e.width!=n.width||e.height!=n.height||e.cx!=n.cx||e.cy!=n.cy||e.rx!=n.rx||e.ry!=n.ry||e.r!=n.r),r=gi[t.type]&&(n.cx!=e.cx||n.cy!=e.cy||n.r!=e.r||n.rx!=e.rx||n.ry!=e.ry),l=t;for(i in e)e[ei](i)&&(n[i]=e[i]);if(a&&(n.path=P._getPath[t.type](t),t._.dirty=1),e.href&&(s.href=e.href),e.title&&(s.title=e.title),e.target&&(s.target=e.target),e.cursor&&(o.cursor=e.cursor),"blur"in e&&t.blur(e.blur),(e.path&&"path"==t.type||a)&&(s.path=function(t){var e=/[ahqstv]/gi,i=P._pathToAbsolute;if(y(t).match(e)&&(i=P._path2curve),e=/[clmz]/g,i==P._pathToAbsolute&&!y(t).match(e))return a=y(t).replace(ci,function(t,e,i){var s=[],n="m"==e.toLowerCase(),o=hi[e];return i.replace(ui,function(t){n&&2==s.length&&(o+=s+hi["m"==e?"l":"L"],s=[]),s.push(O(t*F))}),o+s});for(var s,n,o=i(t),a=[],r=0,l=o.length;r<l;r++){s=o[r],"z"==(n=o[r][0].toLowerCase())&&(n="x");for(var h=1,c=s.length;h<c;h++)n+=O(s[h]*F)+(h!=c-1?",":W);a.push(n)}return a.join(j)}(~y(n.path).toLowerCase().indexOf("r")?P._pathToAbsolute(n.path):n.path),"image"==t.type)&&(t._.fillpos=[n.x,n.y],t._.fillsize=[n.width,n.height],Ge(t,1,1,0,0,0)),"transform"in e&&t.transform(e.transform),r&&(a=+n.cx,r=+n.cy,h=+n.rx||+n.r||0,d=+n.ry||+n.r||0,s.path=P.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",O((a-h)*F),O((r-d)*F),O((a+h)*F),O((r+d)*F),O(a*F)),t._.dirty=1),"clip-rect"in e&&(4==(h=y(e["clip-rect"]).split(ri)).length&&(h[2]=+h[2]+ +h[0],h[3]=+h[3]+ +h[1],(d=(r=s.clipRect||P._g.doc.createElement("div")).style).clip=P.format("rect({1}px {2}px {3}px {0}px)",h),s.clipRect||(d.position="absolute",d.top=0,d.left=0,d.width=t.paper.width+"px",d.height=t.paper.height+"px",s.parentNode.insertBefore(r,s),r.appendChild(s),s.clipRect=r)),e["clip-rect"]||s.clipRect&&(s.clipRect.style.clip="auto")),t.textpath&&(a=t.textpath.style,e.font&&(a.font=e.font),e["font-family"]&&(a.fontFamily='"'+e["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,W)+'"'),e["font-size"]&&(a.fontSize=e["font-size"]),e["font-weight"]&&(a.fontWeight=e["font-weight"]),e["font-style"])&&(a.fontStyle=e["font-style"]),"arrow-start"in e&&Qe(l,e["arrow-start"]),"arrow-end"in e&&Qe(l,e["arrow-end"],1),null==e.opacity&&null==e["stroke-width"]&&null==e.fill&&null==e.src&&null==e.stroke&&null==e["stroke-width"]&&null==e["stroke-opacity"]&&null==e["fill-opacity"]&&null==e["stroke-dasharray"]&&null==e["stroke-miterlimit"]&&null==e["stroke-linejoin"]&&null==e["stroke-linecap"]||((h=(h=s.getElementsByTagName(ai))&&h[0])||(h=Je(ai)),"image"==t.type&&e.src&&(h.src=e.src),e.fill&&(h.on=!0),null!=h.on&&"none"!=e.fill&&null!==e.fill||(h.on=!1),h.on&&e.fill&&((d=y(e.fill).match(P._ISURL))?(h.parentNode==s&&s.removeChild(h),h.rotate=!0,h.src=d[1],h.type="tile",r=t.getBBox(1),h.position=r.x+j+r.y,t._.fillpos=[r.x,r.y],P._preload(d[1],function(){t._.fillsize=[this.offsetWidth,this.offsetHeight]})):(h.color=P.getRGB(e.fill).hex,h.src=W,h.type="solid",P.getRGB(e.fill).error&&(l.type in{circle:1,ellipse:1}||"r"!=y(e.fill).charAt())&&function(t,e,i){t.attrs=t.attrs||{};var s=(t.attrs,Math.pow),n="linear",o=".5 .5";if(t.attrs.gradient=e,e=(e=y(e).replace(P._radial_gradient,function(t,e,i){return n="radial",e&&i&&(e=k(e),i=k(i),s(e-.5,2)+s(i-.5,2)>.25&&(i=ii.sqrt(.25-s(e-.5,2))*(2*(i>.5)-1)+.5),o=e+j+i),W})).split(/\s*\-\s*/),"linear"==n){var a=e.shift();if(a=-k(a),isNaN(a))return null}var r=P._parseDots(e);if(!r)return null;if(t=t.shape||t.node,r.length){t.removeChild(i),i.on=!0,i.method="none",i.color=r[0].color,i.color2=r[r.length-1].color;for(var l=[],h=0,c=r.length;c>h;h++)r[h].offset&&l.push(r[h].offset+j+r[h].color);i.colors=l.length?l.join():"0% "+i.color,"radial"==n?(i.type="gradientTitle",i.focus="100%",i.focussize="0 0",i.focusposition=o,i.angle=0):(i.type="gradient",i.angle=(270-a)%360),t.appendChild(i)}return 1}(l,e.fill,h)&&(n.fill="none",n.gradient=e.fill,h.rotate=!1))),("fill-opacity"in e||"opacity"in e)&&(c=((+n["fill-opacity"]+1||2)-1)*((+n.opacity+1||2)-1)*((+P.getRGB(e.fill).o+1||2)-1),c=ni(si(c,0),1),h.opacity=c,h.src)&&(h.color="none"),s.appendChild(h),a=!1,(r=s.getElementsByTagName("stroke")&&s.getElementsByTagName("stroke")[0])||(a=r=Je("stroke")),(e.stroke&&"none"!=e.stroke||e["stroke-width"]||null!=e["stroke-opacity"]||e["stroke-dasharray"]||e["stroke-miterlimit"]||e["stroke-linejoin"]||e["stroke-linecap"])&&(r.on=!0),"none"!=e.stroke&&null!==e.stroke&&null!=r.on&&0!=e.stroke&&0!=e["stroke-width"]||(r.on=!1),d=P.getRGB(e.stroke),r.on&&e.stroke&&(r.color=d.hex),c=((+n["stroke-opacity"]+1||2)-1)*((+n.opacity+1||2)-1)*((+d.o+1||2)-1),h=.75*(k(e["stroke-width"])||1),c=ni(si(c,0),1),null==e["stroke-width"]&&(h=n["stroke-width"]),e["stroke-width"]&&(r.weight=h),h&&h<1&&(c*=h)&&(r.weight=1),r.opacity=c,e["stroke-linejoin"]&&(r.joinstyle=e["stroke-linejoin"]||"miter"),r.miterlimit=e["stroke-miterlimit"]||8,e["stroke-linecap"]&&(r.endcap="butt"==e["stroke-linecap"]?"flat":"square"==e["stroke-linecap"]?"square":"round"),e["stroke-dasharray"]&&(r.dashstyle=(d={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"})[ei](e["stroke-dasharray"])?d[e["stroke-dasharray"]]:W),a&&s.appendChild(r)),"text"==l.type){l.paper.canvas.style.display=W;var h=l.paper.span,c=n.font&&n.font.match(/\d+(?:\.\d*)?(?=px)/),o=h.style,d=(n.font&&(o.font=n.font),n["font-family"]&&(o.fontFamily=n["font-family"]),n["font-weight"]&&(o.fontWeight=n["font-weight"]),n["font-style"]&&(o.fontStyle=n["font-style"]),c=k(n["font-size"]||c&&c[0])||10,o.fontSize=100*c+"px",l.textpath.string&&(h.innerHTML=y(l.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>")),h.getBoundingClientRect());l.W=n.w=(d.right-d.left)/100,l.H=n.h=(d.bottom-d.top)/100,l.X=n.x,l.Y=n.y+l.H/2,("x"in e||"y"in e)&&(l.path.v=P.format("m{0},{1}l{2},{1}",O(n.x*F),O(n.y*F),O(n.x*F)+1));for(var u=["x","y","text","font","font-family","font-weight","font-style","font-size"],p=0,f=u.length;p<f;p++)if(u[p]in e){l._.dirty=1;break}switch(n["text-anchor"]){case"start":l.textpath.style["v-text-align"]="left",l.bbx=l.W/2;break;case"end":l.textpath.style["v-text-align"]="right",l.bbx=-l.W/2;break;default:l.textpath.style["v-text-align"]="center",l.bbx=0}l.textpath.style["v-text-kern"]=!0}}function Ze(t,e){(this[0]=this.node=t).raphael=!0,this.id=P._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=e,this.matrix=P.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},e.bottom||(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),(e.top=this).next=null}var Je,ti,ei="hasOwnProperty",y=String,k=parseFloat,ii=Math,O=ii.round,si=ii.max,ni=ii.min,oi=ii.abs,ai="fill",ri=/[, ]+/,li=P.eve,j=" ",W="",hi={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},ci=/([clmz]),?([^clmz]*)/gi,di=/ progid:\S+Blur\([^\)]+\)/g,ui=/-?[^,\s-]+/g,pi="position:absolute;left:0;top:0;width:1px;height:1px",F=21600,fi={path:1,rect:1,image:1},gi={circle:1,ellipse:1},a=(P.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version},P.el),mi=((Ze.prototype=a).constructor=Ze,a.transform=function(t){if(null==t)return this._.transform;var e,i=this.paper._viewBoxShift,s=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:W;i&&(e=t=y(t).replace(/\.{3}|\u2026/g,this._.transform||W)),P._extractTransform(this,s+t);var n,o,i=this.matrix.clone(),s=this.skew,t=this.node,a=~y(this.attrs.fill).indexOf("-"),r=!y(this.attrs.fill).indexOf("url(");return i.translate(-.5,-.5),r||a||"image"==this.type?(s.matrix="1 0 0 1",s.offset="0 0",r=i.split(),a&&r.noRotation||!r.isSimple?(t.style.filter=i.toFilter(),a=this.getBBox(),n=this.getBBox(1),o=a.x-n.x,a=a.y-n.y,t.coordorigin=o*-F+j+a*-F,Ge(this,1,1,o,a,0)):(t.style.filter=W,Ge(this,r.scalex,r.scaley,r.dx,r.dy,r.rotate))):(t.style.filter=W,s.matrix=y(i),s.offset=i.offset()),e&&(this._.transform=e),this},a.rotate=function(t,e,i){var s;return this.removed?this:null!=t?((t=y(t).split(ri)).length-1&&(e=k(t[1]),i=k(t[2])),t=k(t[0]),null!=(e=null==i?i:e)&&null!=i||(e=(s=this.getBBox(1)).x+s.width/2,i=s.y+s.height/2),this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,i]])),this):void 0},a.translate=function(t,e){return this.removed||((t=y(t).split(ri)).length-1&&(e=k(t[1])),t=k(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]]))),this},a.scale=function(t,e,i,s){var n;return this.removed||((t=y(t).split(ri)).length-1&&(e=k(t[1]),i=k(t[2]),s=k(t[3]),isNaN(i)&&(i=null),isNaN(s))&&(s=null),t=k(t[0]),null==e&&(e=t),null!=(i=null==s?s:i)&&null!=s||(n=this.getBBox(1)),i=null==i?n.x+n.width/2:i,s=null==s?n.y+n.height/2:s,this.transform(this._.transform.concat([["s",t,e,i,s]])),this._.dirtyT=1),this},a.hide=function(){return this.removed||(this.node.style.display="none"),this},a.show=function(){return this.removed||(this.node.style.display=W),this},a._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},a.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),P.eve.unbind("raphael.*.*."+this.id),P._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?P._removedFactory(t):null;this.removed=!0}},a.attr=function(t,e){if(!this.removed){if(null==t){var i,s={};for(i in this.attrs)this.attrs[ei](i)&&(s[i]=this.attrs[i]);return s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform,s}if(null==e&&P.is(t,"string")){if(t==ai&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var n=t.split(ri),o={},a=0,r=n.length;a<r;a++)o[t=n[a]]=t in this.attrs?this.attrs[t]:P.is(this.paper.customAttributes[t],"function")?this.paper.customAttributes[t].def:P._availableAttrs[t];return r-1?o:o[n[0]]}if(this.attrs&&null==e&&P.is(t,"array")){for(o={},a=0,r=t.length;a<r;a++)o[t[a]]=this.attr(t[a]);return o}var l,h;for(h in null!=e&&((l={})[t]=e),l=null==e&&P.is(t,"object")?t:l)li("raphael.attr."+h+"."+this.id,this,l[h]);if(l){for(h in this.paper.customAttributes)if(this.paper.customAttributes[ei](h)&&l[ei](h)&&P.is(this.paper.customAttributes[h],"function")){var c,d=this.paper.customAttributes[h].apply(this,[].concat(l[h]));for(c in this.attrs[h]=l[h],d)d[ei](c)&&(l[c]=d[c])}l.text&&"text"==this.type&&(this.textpath.string=l.text),Ke(this,l)}}return this},a.toFront=function(){return this.removed||this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&P._tofront(this,this.paper),this},a.toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),P._toback(this,this.paper)),this},a.insertAfter=function(t){return this.removed||((t=t.constructor==P.st.constructor?t[t.length-1]:t).node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),P._insertafter(this,t,this.paper)),this},a.insertBefore=function(t){return this.removed||((t=t.constructor==P.st.constructor?t[0]:t).node.parentNode.insertBefore(this.node,t.node),P._insertbefore(this,t,this.paper)),this},a.blur=function(t){var e=this.node.runtimeStyle,i=(i=e.filter).replace(di,W);return 0!=+t?(this.attrs.blur=t,e.filter=i+j+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",e.margin=P.format("-{0}px 0 0 -{0}px",O(+t||1.5))):(e.filter=i,e.margin=0,delete this.attrs.blur),this},P._engine.path=function(t,e){var i=Je("shape"),s=(i.style.cssText=pi,i.coordsize=F+j+F,i.coordorigin=e.coordorigin,new Ze(i,e)),n={fill:"none",stroke:"#000"},t=(t&&(n.path=t),s.type="path",s.path=[],s.Path=W,Ke(s,n),e.canvas.appendChild(i),Je("skew"));return t.on=!0,i.appendChild(t),s.skew=t,s.transform(W),s},P._engine.rect=function(t,e,i,s,n,o){var a=P._rectPath(e,i,s,n,o),t=t.path(a),r=t.attrs;return t.X=r.x=e,t.Y=r.y=i,t.W=r.width=s,t.H=r.height=n,r.r=o,r.path=a,t.type="rect",t},P._engine.ellipse=function(t,e,i,s,n){t=t.path();return t.attrs,t.X=e-s,t.Y=i-n,t.W=2*s,t.H=2*n,t.type="ellipse",Ke(t,{cx:e,cy:i,rx:s,ry:n}),t},P._engine.circle=function(t,e,i,s){t=t.path();return t.attrs,t.X=e-s,t.Y=i-s,t.W=t.H=2*s,t.type="circle",Ke(t,{cx:e,cy:i,r:s}),t},P._engine.image=function(t,e,i,s,n,o){var a=P._rectPath(i,s,n,o),t=t.path(a).attr({stroke:"none"}),r=t.attrs,l=t.node,h=l.getElementsByTagName(ai)[0];return r.src=e,t.X=r.x=i,t.Y=r.y=s,t.W=r.width=n,t.H=r.height=o,r.path=a,t.type="image",h.parentNode==l&&l.removeChild(h),h.rotate=!0,h.src=e,h.type="tile",t._.fillpos=[i,s],t._.fillsize=[n,o],l.appendChild(h),Ge(t,1,1,0,0,0),t},P._engine.text=function(t,e,i,s){var n=Je("shape"),o=Je("path"),a=Je("textpath"),r=(i=i||0,s=s||"",o.v=P.format("m{0},{1}l{2},{1}",O((e=e||0)*F),O(i*F),O(e*F)+1),o.textpathok=!0,a.string=y(s),a.on=!0,n.style.cssText=pi,n.coordsize=F+j+F,n.coordorigin="0 0",new Ze(n,t)),l={fill:"#000",stroke:"none",font:P._availableAttrs.font,text:s},s=(r.shape=n,r.path=o,r.textpath=a,r.type="text",r.attrs.text=y(s),r.attrs.x=e,r.attrs.y=i,r.attrs.w=1,r.attrs.h=1,Ke(r,l),n.appendChild(a),n.appendChild(o),t.canvas.appendChild(n),Je("skew"));return s.on=!0,n.appendChild(s),r.skew=s,r.transform(W),r},P._engine.setSize=function(t,e){var i=this.canvas.style;return(this.width=t)==+t&&(t+="px"),(this.height=e)==+e&&(e+="px"),i.width=t,i.height=e,i.clip="rect(0 "+t+" "+e+" 0)",this._viewBox&&P._engine.setViewBox.apply(this,this._viewBox),this},P._engine.setViewBox=function(t,e,i,s,n){P.eve("raphael.setViewBox",this,this._viewBox,[t,e,i,s,n]);var o,a=this.width,r=this.height,l=1/si(i/a,s/r);return n&&(i*(o=r/s)<a&&(t-=(a-i*o)/2/o),s*(o=a/i)<r)&&(e-=(r-s*o)/2/o),this._viewBox=[t,e,i,s,!!n],this._viewBoxShift={dx:-t,dy:-e,scale:l},this.forEach(function(t){t.transform("...")}),this},P._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{e.namespaces.rvml||e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),Je=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){Je=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},P._engine.initWin(P._g.win),P._engine.create=function(){var t,e,i,s=P._getContainer.apply(0,arguments),n=s.container,o=s.height,a=s.width,r=s.x,s=s.y;if(n)return i=(e=(t=new P._Paper).canvas=P._g.doc.createElement("div")).style,r=r||0,s=s||0,o=o||342,(t.width=a=a||512)==+a&&(a+="px"),(t.height=o)==+o&&(o+="px"),t.coordsize=1e3*F+j+1e3*F,t.coordorigin="0 0",t.span=P._g.doc.createElement("span"),t.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",e.appendChild(t.span),i.cssText=P.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",a,o),1==n?(P._g.doc.body.appendChild(e),i.left=r+"px",i.top=s+"px",i.position="absolute"):n.firstChild?n.insertBefore(e,n.firstChild):n.appendChild(e),t.renderfix=function(){},t;throw Error("VML container not found.")},P.prototype.clear=function(){P.eve("raphael.clear",this),this.canvas.innerHTML=W,this.span=P._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},P.prototype.remove=function(){for(var t in P.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?P._removedFactory(t):null;return!0},P.st);for(ti in a)a[ei](ti)&&!mi[ei](ti)&&(mi[ti]=function(i){return function(){var e=arguments;return this.forEach(function(t){t[i].apply(t,e)})}}(ti))}return at.was?f.win.Raphael=P:Raphael=P,P}),!function(t){"use strict";function n(t,e,i){var s=/[^\w\-\.:]/.test(t)?new Function(n.arg+",tmpl","var _e=tmpl.encode"+n.helper+",_s='"+t.replace(n.regexp,n.func)+"';return _s;"):n.cache[t]=!i&&n.cache[t]||n(n.load(t));return e?s(e,n):function(t){return s(t,n)}}n.cache={},n.load=function(t){var e=document.getElementById(t);if(!e&&console)throw{message:"template with id="+t+" not found"};return e?("textarea"==e.tagName.toLowerCase()?e.value:document.getElementById(t).innerHTML).replace(/<\\\/(\w+)/g,"</$1"):null},n.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,n.func=function(t,e,i,s,n,o){return e?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[t]||"\\"+t:i?"="===i?"'+_e("+s+")+'":"'+("+s+"||'')+'":n?"';":o?"_s+='":void 0},n.encReg=/[<>&"'\x00]/g,n.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},n.encode=function(t){return String(t||"").replace(n.encReg,function(t){return n.encMap[t]||""})},n.arg="o",n.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return n}):t.tmpl=n}(this),RedactorPlugins=RedactorPlugins||{},RedactorPlugins.codeblock=function(){return{init:function(){var t=this.button.add("codeblock",$_("Insert code block"));this.button.addCallback(t,this.codeblock.show),this.button.setAwesome("codeblock","fa-code")},show:function(){var t=this;this.modal.addTemplate("codeblock",this.codeblock.getTemplate()),this.modal.addCallback("codeblock",function(){$("#h-codeblock-button").click(function(){t.codeblock.insertSnippet($("#h-codeblock-textarea").val())})}),this.buffer.set(),this.modal.load("codeblock",$_("Insert code block"),800),this.selection.save(),this.modal.show(),$("#h-codeblock-textarea").focus()},getTemplate:function(){return'<div id="h-codeblock-modal" style="height: 350px; overflow-y: auto;"><section><textarea id="h-codeblock-textarea" style="height: 200px"></textarea><input id="h-codeblock-button" type="button" style="margin-top: 10px;" value="'+$_("Insert")+'"></section></div>'},insertSnippet:function(t){this.modal.close(),this.selection.restore(),this.insert.htmlWithoutClean('<p style="white-space: pre; color: #3c3c3c; font-family: Arial; font-size: 0.9em;">'+$.wa.encodeHTML($.trim(t))+"</p>")}}},RedactorPlugins=RedactorPlugins||{},!function(){let i='<i class="fas fa-spinner wa-animation-spin custom-mx-4"></i>';RedactorPlugins.faq=function(){return{init:function(){i=`<div class="custom-mx-4">${i} ${$_("Loading")}</div>`;var t=this.button.add("faq",$_("Questions & Answers"));this.button.setIcon(t,'<i class="fa fa-question-circle"></i>'),this.button.addCallback(t,this.faq.show)},show:function(){var t=this;this.modal.addTemplate("faq",this.faq.getTemplate()),this.modal.addCallback("faq",function(){function e(){var t=Array.prototype.slice.apply(arguments);t.unshift("?module=faq&action=snippets"),$.get.apply($,t)}e(function(t){$("#h-faq-modal .h-section").html(t)}),$("#h-faq-modal").off("click",".h-faq-snippets .h-category").on("click",".h-faq-snippets .h-category",function(){$("#h-faq-modal .h-faq-list").html(i),e({category_id:$(this).data("id")},function(t){$("#h-faq-modal .h-faq-snippets").html(t),$("#h-faq-modal img").css({maxWidth:500})})}),$("#h-faq-modal").off("click",".h-faq-snippets .h-more").on("click",".h-faq-snippets .h-more",function(){return $(this).closest(".h-faq-item").find(".h-truncated-text").hide().end().find(".h-full-text").show(),!1}),$("#h-faq-modal").off("click",".h-faq-snippets .h-faq-item").on("click",".h-faq-snippets .h-faq-item",function(){t.faq.insertSnippet($(this).find(".h-faq-item-name").text(),$(this).find(".h-full-text").html())}),$("#h-faq-modal").off("submit",".h-faq-search-form").on("submit",".h-faq-search-form",function(){var t=$(this);return $("#h-faq-modal .h-faq-list").html(i),e({query:t.find("input:first").val()||""},function(t){$("#h-faq-modal .h-faq-snippets").html(t),$("#h-faq-modal img").css({maxWidth:500})}),!1})}),this.buffer.set(),this.modal.load("faq",$_("Questions & Answers"),800),this.selection.save(),this.modal.show()},getTemplate:function(){return'<div id="h-faq-modal" style="height: 420px; overflow-y: auto;"><section class="h-section">'+i+'</section></div><footer style="margin-top: 12px;"><button id="redactor-modal-button-cancel">'+$_("Close")+"</button></footer>"},insertSnippet:function(t,e){this.modal.close(),this.selection.restore(),$(".h-faq-question-settings").find(".h-name").val(t),this.insert.html($.trim(e).replace(/<span class=['"]h-faq-highlighted['"]>([\s\S]+?)<\/span>/gm,"$1"))}}}}(),!function(o){"use strict";o.helpdesk_faq={translitInput:function(e,i,s){var n=null;e.val()||i.off("keydown").on("keydown",function(){var t=o(this);!e.data("edited")&&"1"===o('input[name="is_public"]:checked').val()&&t.val()&&(n&&clearTimeout(n),n=setTimeout(function(){e.data("edited")?(n&&clearTimeout(n),loading.remove()):o.get("?action=translit",{str:t.val(),prefix:"url_"},function(t){"ok"===t.status&&(e.data("edited")?n&&clearTimeout(n):(e.val(t.data),"function"==typeof s&&s(e,i)))},"json")},300))})},updateCounters:function(t){var i=o("#h-faq-categories .h-category");o.each(t||[],function(t,e){i.filter('[data-category-id="'+e.id+'"]').find(".count").text(e.count),0==e.id&&0<e.count&&o(".h-faq-none").show()})},getCategoryId:function(){var t=o.wa.helpdesk_controller.getHash().match(/^#\/faq\/category\/(\d+|none)\/$/);return t?"none"===t[1]?0:parseInt(t[1],10)||null:null},initFaqCategoriesDroppable:function(){o("#h-faq-categories li[data-category-id]").not(".selected").droppable("destroy").droppable({tolerance:"touch",over:function(t,e){o(e.draggable).is("[data-category-id]")||(e=o(this),o.helpdesk_faq.getCategoryId()!==e.data("categoryId")&&e.addClass("active"))},out:function(){o(this).removeClass("active")},drop:function(t,e){var i,s,n=o(this);n.hasClass("selected")||(n.removeClass("active"),o(e.draggable).is("[data-category-id]"))||(i=n.data("categoryId"),s=o(e.draggable).data("id"),e.draggable.next().remove(),e.draggable.remove(),o.post("?module=faq&action=move&to_category=1",{id:s,category_id:i},function(t){n.find(".count").text((parseInt(n.find(".count").text(),10)||0)+1);var e=o("#h-faq-categories li[data-category-id].selected"),i=(parseInt(e.find(".count").text(),10)||0)-1;e.find(".count").text(i),i<=0&&e.hasClass("h-faq-none")&&e.show()},"json"))}})}}}(jQuery),!function(v){"use strict";v.wa.helpdesk_controller={options:null,random:null,frontend_url:"/",backend_url:"/webasyst/",ignore_ajax_errors:!1,lastView:null,currentView:null,waLoading:null,headerShadowedDestroy:null,init:function(t){v.storage=new v.store,this.options=t,this.frontend_url=t&&t.url||"/",this.backend_url=t&&t.backend_url||"/webasyst/",this.random=null,this.waLoading=v.waLoading(),v.ajaxSetup({cache:!1}),void 0!==v.History&&v.History.bind(function(t){v.wa.helpdesk_controller.dispatch(t)}),v(window).on("beforeunload",function(){v.wa.helpdesk_controller.ignore_ajax_errors=!0,setTimeout(function(){v.wa.helpdesk_controller.ignore_ajax_errors=!1},1e3)}),v.wa.errorHandler=function(){},v(document).ajaxError(function(t,e,i,s){var n,o;502===e.status&&"abort"==s||i.url&&0<=i.url.indexOf("background_process")||i.data&&"string"==typeof i.data&&0<=i.data.indexOf("background_process")?console&&console.log&&console.log("Notice: XHR failed on load: "+i.url):e.getResponseHeader("wa-session-expired")?window.location.reload():(v.storage.del("helpdesk/last-hash"),v.wa.helpdesk_controller.currentHash=null,v.wa.helpdesk_controller.stopDispatch(1),window.location.hash="",(o=(o=(n=v("body > .error-page.template").clone().appendTo(v("#c-core-content").empty())).find(".if-"+e.status)).length<=0?n.find(".otherwise"):o).show(),n.removeClass("hidden template"),(o=n.find(".place-for-iframe")).length&&((o=(n=v('<iframe src="about:blank" style="width:100%;height:auto;min-height:500px;"></iframe>').appendTo(o))[0].contentWindow||n[0].contentDocument.document||n[0].contentDocument).document.open(),o.document.write(e.responseText||$_("Empty response from server")),o.document.close(),console)&&console.log&&console.log("XHR error",e,i,s),v(".dialog:visible").trigger("close").remove())}),v.wa.helpers.isMacintosh()&&document.documentElement.classList.add("is-mac"),this.gridInterval=setInterval(function(){v.wa.helpdesk_controller.currentGrid&&v.wa.helpdesk_controller.currentGrid.update()},6e4),v.wa.helpdesk_controller.bindToggleCollapseMenuSidebar(),this.restoreCollapsibleStatusInSidebar(),v.wa.helpdesk_controller.restoreSidebarCounts(),v(document).bind("wa.appcount",function(){v("#wa-app-helpdesk .indicator").remove()}),v("#wa-app-helpdesk .indicator").remove(),v(document).keypress(function(t){"Enter"!==t.key&&"\n"!==t.key||(t.shiftKey&&(v.wa.helpdesk_controller.showLoading(),v.wa.helpdesk_controller.reloadSidebar()),!t.ctrlKey)||v.wa.helpdesk_controller.redispatch()}),v.wa.helpdesk_controller.setHash=function(t){this.stopDispatch(0),v.wa.setHash.call(v.wa,t)}},skipDispatch:0,stopDispatch:function(t){this.skipDispatch=t},currentHash:null,dispatch:function(t){if(0<this.skipDispatch)return this.skipDispatch--,!1;if(t=void 0===t?this.getHash():this.cleanHash(t),this.currentHash!=t){var e=this.currentHash,i=(this.currentHash=t,new v.Event("wa_before_dispatched"));if(v(window).trigger(i),i.isDefaultPrevented())return e&&(this.currentHash=e,window.location.hash=e),!1;if(this.currentGrid&&this.currentGrid.deactivate(),this.currentGrid=null,t=t.replace(/^[^#]*#\/*/,"")){if((t=t.split("/"))[0]){for(var s="",n=t.length,o=0;o<t.length;o++){var a=t[o];if(!(o<2)){n=o;break}if(0===o)s=a;else{if(parseInt(a,10)==a){n=o;break}s+=a.substr(0,1).toUpperCase()+a.substr(1)}}i=t.slice(n);this[s+"Action"]?this[s+"Action"](i):this[t[0]+"Action"]?this[t[0]+"Action"](t.slice(1)):console&&console&&console.log&&console.log("Invalid action name: ",s+"Action")}else console&&console.log&&console.log("DefaultAction"),this.defaultAction();t.join&&(t=t.join("/")),v.storage.set("helpdesk/last-hash",t)}else this.defaultAction();this.highlightSidebar(),v(window).trigger("wa-dispatched")}},redispatch:function(){this.currentHash=null,this.dispatch()},lastPage:function(){var t=v.storage.get("helpdesk/last-hash");t?v.wa.setHash("#/"+t):this.defaultAction()},defaultAction:function(){setTimeout(function(){var t=v(".hd-main-filters a:visible:first").attr("href");(t=t||v("#hd-common-filters a:visible:first").attr("href"))?window.location.hash=t:v.wa.helpdesk_controller.requestsAllAction()},0)},requestAction:function(t){t=t&&t[0]||"";"new"===t?this.loadHTML("?module=requests&action=add&form_id=backend"):this.loadHTML("?module=requests&action=info&id="+t)},requestLogAction:function(t){t=t&&t[0]||"";this.loadHTML("?module=requests&action=info&log_id="+t)},requestAddAction:function(t){t=t&&t[0]||"";this.loadHTML("?module=requests&action=add&form_id="+t)},requestsAction:function(t){t[0]?this.requestsSearchAction(["nosearch",t[0]]):this.requestsAllAction()},requestsAllAction:function(t,e,i){e=v.isEmptyObject(e)?{}:e,this.loadGrid({...e,hash:t,prehash:"#/requests/all/",header:$_("All requests"),afterLoad:function(t){v.wa.helpdesk_controller.initMenuAboveList(t),t.admin&&v(v("#h-search-result-header-menu-template").html()).find(".h-search-result-header-menu").remove().end().find(".h-filter-settings-toggle").on("click",function(){v.wa.helpdesk_controller.filterSettings(t)}).insertAfter(v("#c-core-content .h-header-block-top h1")),"function"==typeof i&&i.call(this,null)}})},requestsFilterAction:function(t){return this.requestsSearchAction(t)},requestsAdd_filterAction:function(){delete v.wa.helpdesk_controller.filters_hash,this.requestsSearchAction([],"add_filter")},requestsSearchAction:function(t,e,i,s){i=v.isEmptyObject(i)?{}:i,t=t||[];for(var n=["requests","search"],o=!0;"nosearch"==t[0];)o=!1,n.push(t[0]),t=t.slice(1);var a=t[0];t=t.slice(1),n.push(a),n="#/"+n.join("/")+"/",a?this.loadGrid({...i,hash:t,prehash:n,filters:a,afterLoad:function(t){var e;v.wa.helpdesk_controller.initMenuAboveList(t,o),"unread"===t.filters_hash&&((e=v(v("#h-search-result-header-menu-template").html()).find(".h-search-result-header-menu").remove().end().on("click",function(){v(this).hide(),v.wa.helpdesk_controller.unreadSettings(t)})).removeClass("h-filter-settings-toggle").addClass("h-unread-settings-toggle"),e.insertAfter(v("#c-core-content .h-header-block-top h1"))),"follow"===t.filters_hash&&v(`<span class="back" id="tooltip-what-is-this" data-wa-tooltip-template="#tooltip-template-tooltip-what-is-this" data-title="${$_("What is this?")}">
                                <i class="fas fa-question-circle"></i>
                                </span>
                                <div class="wa-tooltip-template" id="tooltip-template-tooltip-what-is-this">
                                    <div class="box">
                                        <h3>${$_("Follow mark")} <i class="fas fa-binoculars text-gray" style="font-size:1rem"></i></h3>
                                        <p>${$_("After you set the Follow mark, the next time someone performs an action with this request it will appear as Unread for you and you will receive email notification about this action. So you will be able to follow all further activity related to this request.")}</p>
                                    </div>
                                </div>
                            <script>
                            (function($) {
                                $("#tooltip-what-is-this").waTooltip({trigger:'click'});
                            })(jQuery);
                        </script>`).insertAfter(v("#c-core-content .h-header-block-top h1")),o&&(e=v(v("#h-search-result-header-menu-template").html()).on("click",".h-save-as-filter",function(){v.wa.helpdesk_controller.filterSettings(t)}).on("click",".h-change-search-conditions",function(){v.wa.helpdesk_controller.filters_hash=t.filters_hash,v.wa.setHash("#/requests/search/")}),t.f.id?(e.find(".h-filter-settings-toggle").on("click",function(){v.wa.helpdesk_controller.filterSettings(t)}),e.find(".h-search-result-header-menu").remove(),t.admin||"1"!=t.shared||e.find(".h-filter-settings-toggle").remove()):(e.find(".h-search-result-header-menu").show(),e.find(".h-filter-settings-toggle").remove()),e.insertAfter(v("#c-core-content .h-header-block-top h1"))),"function"==typeof s&&s.call(this,null)},is_search:o}):this.loadHTML("?module=requests&action=search",{filters_hash:v.wa.helpdesk_controller.filters_hash},null,function(){"add_filter"===e&&v("#h-adv-search-fields .h-add-filter-text").show(),v.wa.helpdesk_controller.filters_hash&&v("#h-adv-search-fields .h-clear").show().click(function(){delete v.wa.helpdesk_controller.filters_hash,v.wa.helpdesk_controller.redispatch()})})},designAction:function(t){Array.isArray(t)&&t.length?v("#wa-design-container").length?waDesignLoad():this.loadHTML("?module=design",{},null,function(){waDesignLoad(t.join("&"))}):this.loadHTML("?module=design",{},null,function(){waDesignLoad("")})},pagesAction:function(t){v("#wa-page-container").length?waLoadPage(t):this.loadHTML("?module=pages",null,t=>`<div class="flexbox">${t}</div>`)},sourcesEditAction:function(t){var e=t&&t[0]||"",t=t&&t[1]||"";this.loadHTML("?module=sources&action=editor&workflow_id="+t+"&id="+e)},sourcesCreateAction:function(t){var e=t&&t[0]||"",t=t&&t[1]||"";this.loadHTML("?module=sources&action=editor&workflow_id="+t+"&st="+e)},fconstructorAction:function(){this.loadHTML("?module=constructor")},faqAction:function(i){i=i||{},this.loadFaqLayout(function(){var t,e;i[0]?(e={id:i[0],category_id:null},"new"===i[0]&&(t=v("#h-faq-categories li[data-category-id].selected")).length&&(e.category_id=t.data("categoryId")),this.loadHTMLInto("#h-faq-content","?module=faq",e)):(t=v("#h-faq-categories li[data-category-id]:first")).length?(v(".h-category-settings :submit").removeClass("yellow").addClass("green"),(e=t.data("categoryId"))?(v.wa.setHash("#/faq/category/"+e),v("#h-faq-categories").find(".h-faq-categories-message").hide()):v("#h-faq-categories").find(".h-faq-categories-message").show()):(v(".h-faq-content-no-categories-template").find(".loading").remove(),v("#h-faq-content").html(v(".h-faq-content-no-categories-template").html()))})},loadFaqLayout:function(t){v("#h-faq-content").length?"function"==typeof t&&t.call(this):this.loadHTML("?module=faqLayout",{},null,t)},faqCategoryAction:function(t){t[0]?this.loadFaqLayout(function(){"none"===t[0]&&(t[0]=0),this.loadHTMLInto("#h-faq-content","?module=faqCategory&id="+t[0],{},null,function(){v.wa.helpdesk_controller.faq_context={type:"category",query:t[0]}})}):this.faqAction()},faqSearchAction:function(t){this.loadFaqLayout(function(){this.loadHTMLInto("#h-faq-content","?module=faqSearch",{query:t[0]||""},null,function(){v.wa.helpdesk_controller.faq_context={type:"search",query:t[0]}})})},settingsWorkflowAction:function(t){"add"===t[0]?this.workflowEdit():(t=t&&t[0]||"",this.loadHTML("?module=settings&action=workflow&id="+t))},pluginsAction:function(){this.loadHTML("?module=plugins")},workflowEdit:function(t){var e=v("#h-edit-workflow-dialog"),e=e.length?e.parent():v("<div></div>").appendTo("body");e.load("?module=settings&action=workflowEdit",{id:t||0},function(){var t;t=v("#h-edit-workflow-dialog"),v.waDialog({html:v("<div />").append(t).html(),onOpen:function(t,i){i.$block.on("submit",function(t){t.preventDefault();const e=v.wa.helpers.createLoadingSubmit(v(this).find(":submit")).show();v.post(v(this).attr("action"),v(this).serializeArray(),function(t){e.hide(),"ok"===t.status&&(t=t.data.workflow.id,v.wa.setHash("#/settings/workflow/"+t),v.wa.helpdesk_controller.reloadSidebar(),i.close())},"json")})}})})},settingsSidebarAction:function(t){this.loadHTML("?module=settings&action=sidebar")},settingsCronAction:function(t){this.loadHTML("?module=settings&action=cron")},settingsPortalAction:function(t){this.loadHTML("?module=settings&action=portal")},simpleSearch:function(){var t,e=v("#search-text");e.val()&&(e=0<=(e=e.val()).indexOf("@")?[{name:"c_email",param:e}]:[{name:"c_name_id",param:e}],t=this.currentGrid||new v.wa.Grid({paginator_type:this.options.paginator_type}),v.wa.setHash("#/requests/search/"+t.compileFilters(e)+"/"))},restoreCollapsibleStatusInSidebar:function(){v("#wa-app .collapse-handler").each(function(t,e){v.wa.helpdesk_controller.collapseSidebarSection(e,"restore")}),v.wa.helpdesk_controller.sidebarMoreViewOptions("workflows","restore"),v.wa.helpdesk_controller.sidebarMoreViewOptions("states","restore"),v.wa.helpdesk_controller.sidebarMoreViewOptions("sources","restore"),v.wa.helpdesk_controller.sidebarMoreViewOptions("assignments","restore")},sidebarMoreViewOptions:function(t,e){switch(e){case"toggle":v("#hd-by-"+t).is(":visible")?v.wa.helpdesk_controller.sidebarMoreViewOptions(t,"hide"):v.wa.helpdesk_controller.sidebarMoreViewOptions(t,"show");break;case"restore":var i=v.storage.get("helpdesk/mvo/"+t);"restore"!=i&&v.wa.helpdesk_controller.sidebarMoreViewOptions(t,i);break;case"show":v("#hd-by-"+t).show();i=v("#hd-more-view-options-"+t).parent().hide().parent();i.children(":visible").size()<=0&&i.parents(".sidebar .block").hide(),v.storage.set("helpdesk/mvo/"+t,"show");break;default:v("#hd-by-"+t).hide(),v("#hd-more-view-options-"+t).parent().show().parents(".sidebar .block").show(),v.storage.set("helpdesk/mvo/"+t,"hide")}},collapseSidebarSection:function(e,i){if(i=i||"collapse",(e=v(e)).size()){var s,n=e.find(".fa-caret-down, .fa-caret-right"),t=(n.size()||(n=v('<i class="fas fa-caret-right">'),e.find(".caret").append(n)),e.attr("id")||e.data("collapsibleId")),o=n.hasClass("fa-caret-down")?"shown":"hidden",a=function(){var t=e.nextAll(".collapsible, .collapsible1").first();"restore"==i?t.hide():t.slideUp(200),n.removeClass("fa-caret-down").addClass("fa-caret-right"),s="hidden"},r=function(){var t=e.nextAll(".collapsible, .collapsible1").first();"restore"==i?t.show():t.slideDown(200),n.removeClass("fa-caret-right").addClass("fa-caret-down"),s="shown"};switch(i){case"toggle":("shown"==o?a:r)();break;case"restore":t&&("hidden"==v.storage.get("helpdesk/collapsible/"+t)?a:r)();break;case"uncollapse":r();break;default:a()}t&&s&&v.storage.set("helpdesk/collapsible/"+t,s)}},unreadSettings:function(s){var t,n,e;return this.currentGrid&&(t=v(".h-header-block"),n=function(){v(".h-unread-settings-toggle",t).show(),v(".h-unread-settings",t).hide()},(e=v(".h-unread-settings",t)).length&&e.data("id")!==s.id&&e.remove(),e.length||(v(".h-unread-settings-toggle",t).hide(),v(".h-unread-settings",t).show(),e=tmpl("h-template-unread-settings-dialog",s),v.waDialog({html:e,onOpen:function(t,e){var i;s.admin&&(i=e.$block,v.wa.helpers.watchChangeForm(i),i.find("input[type=checkbox]").change(function(){var t=v(this).attr("name").replace("settings[","").replace("]",""),t=v(".h-unread-settings").find('input[type=checkbox][data-parent="'+t+'"]');t.length&&(this.checked?t.prop("disabled",!1):t.prop("disabled",!0).prop("checked",!1))}),i.on("submit",function(){const t=v.wa.helpers.createLoadingSubmit(v(this).find(":submit"));return t.show(),v.post("?module=settings&action=unreadSave",v(this).serialize(),function(){n(),t.hide(),v.wa.helpdesk_controller.reloadSidebar(),v.wa.helpdesk_controller.redispatch(),e.close()}),!1}),i.find(".h-clear-all").on("click",function(){const t=v.wa.helpers.createLoadingSubmit(v(this));return t.show(),v.post("?module=requestsRead",{hash:"@all"},function(){t.hide(),v.wa.helpdesk_controller.redispatch(),e.close()}),!1}))},onClose:function(){n()}}))),!1},filterSettings:function(o){var t,s,e;return this.currentGrid&&(t=v(".h-header-block"),s=function(){v(".h-search-result-header-menu",t).show(),t.find("h1").show(),v(".h-filter-settings",t).hide()},(e=v(".h-filter-settings",t)).length&&e.data("id")!==o.id&&e.remove(),e.length||("@all"===o.f.hash?t.append(tmpl("h-template-all-records-filter-settings",o)):(e=tmpl("h-template-filter-settings-dialog",o),v.waDialog({html:e,onOpen:function(t,i){var e=i.$block;let s=null;e.find('input[name="id"]').val()&&(s=v.wa.helpers.watchChangeForm(e));const n=v(".h-filter-settings-icons",e);n.on("click","a",function(){return n.find(".selected").removeClass("selected"),v(this).closest("li").addClass("selected"),s&&s.change(),!1}),e.submit(function(){const e=v.wa.helpers.createLoadingSubmit(v(this).find(":submit"));e.show();var t=v(this).serializeArray();return t.push({name:"icon",value:n.find(".selected").closest("li").data("icon")}),v.post("?module=filters&action=save",t,function(t){e.hide(),v.wa.helpdesk_controller.reloadSidebar(),o.f.id!=t.data?v.wa.setHash("#/requests/filter/"+t.data):v.wa.helpdesk_controller.redispatch(),i.close()},"json"),!1})},onClose:function(){s()}})),v(".buttons",t).find(".cancel").click(function(){s()}),v(".h-filter-delete").click(function(){return v.waDialog.confirm({title:$_("Are you sure?"),success_button_title:$_("Delete"),success_button_class:"danger",cancel_button_title:$_("Cancel"),cancel_button_class:"light-gray",onSuccess:function(t){const e=v.wa.helpers.createLoadingSubmit(t.$body.find(".js-success-action")).show(),i="@all"===o.f.hash?"@all":null;v.wa.helpdesk_controller.deleteFilter(i).then(()=>{i&&s(),e.hide()})}}),!1})),v(".h-search-result-header-menu",t).hide(),v(".h-filter-settings",t).show()),!1},deleteFilter:function(t){var e=t;if(!t){t=this.getHash().replace(/^[^#]*#\/*/,"").split("/");if("requests"!=t[0]||"filter"!=t[1]||""+parseInt(t[2],10)!==t[2])return;e=t[2]}return v.post("?module=filters&action=delete",{id:e},function(){v.wa.helpdesk_controller.reloadSidebar().then(()=>{v.wa.helpdesk_controller.defaultAction()})})},loadGrid:function(s){(s=s||{}).targetElement=s.targetElement||v("#c-core-content"),this.showLoading();var n=Math.random();this.random=n,this.hashBase=s.prehash||"#/",this.currentGrid=new v.wa.Grid({hash:s.hash,filters:s.filters,url:s.url,is_search:s.is_search,header:s.header,paginator_type:s.paginator_type||this.options.paginator_type}),this.currentGrid.load(function(t){var e,i;this.random==n&&("function"==typeof this.headerShadowedDestroy&&this.headerShadowedDestroy(),!s.header&&t.header&&(s.header=t.header),this.lastView=v.extend(this.lastView||{},{title:s.header,hash:window.location.hash.toString()}),"function"==typeof s.beforeLoad&&s.beforeLoad.call(this,t),this.currentView=v.wa.helpdesk_controller.currentGrid.getSettings().view,e=v(`<div class="h-requests topmost-grid-wrapper" data-view="${this.currentView}"></div>`),s.targetElement.empty().append(e),v("body > .dialog:hidden:not(.persistent)").not(s.targetElement.parents(".dialog")).remove(),i=v(`<div id="hd-requests-header-top"></div>
                 <div id="hd-requests-header" class="h-header box break-word js-mobile-not-hide-sidebar">
                    <div class="h-header-block">
                        <div class="h-header-block-top h-h1-inline" />
                    </div>
                </div>`),e.append(i),i.find(".h-header-block-top").append(v('<h1 class="text-ellipsis" />').text(s.header)),v.wa.helpdesk_controller.setBrowserTitle(s.header),e.append(v('<div id="hd-support-content" class="support-content"></div>').append(this.currentGrid.getTable())),v("html,body").animate({scrollTop:0},200),"split"===this.currentView&&v("#h-request-sidebar").prepend(i.detach()),setTimeout(()=>{if(document.querySelector("#hd-requests-header-top")){const t=new IntersectionObserver(function(t){v("#hd-requests-header").toggleClass("h-shadowed",0===t[0].intersectionRatio)},{threshold:[0,1]});t.observe(document.querySelector("#hd-requests-header-top")),this.headerShadowedDestroy=()=>t.disconnect()}}),v.wa.helpdesk_controller.highlightSidebar(),"function"==typeof s.afterLoad&&s.afterLoad.call(this,t),v.wa.helpdesk_controller.hideLoading())})},setBrowserTitle:function(t){document.title=t+"  "+this.options.accountName},updateUnreadCount:function(t){this.updateMainCount("#sb-unread-count",t)},updateFollowCount:function(t){this.updateMainCount("#sb-follow-count",t)},updateMainCount:function(t,e){t=v(t).html(e).closest("li,.brick");0<e?t.show(200):t.hide()},listResultEvent:function(t){var e=new v.Event("helpdesk_list_result");e.list_result=t,v(document).trigger(e),void 0!==t.unread_count&&v.wa.helpdesk_controller.updateUnreadCount(t.unread_count),v.wa.helpdesk_controller.updateWorkflowErrors(t.workflows_errors,t.sources_errors),t.history&&v.wa.helpdesk_history.updateHistory(t.history),t.request_ids&&!t.is_update&&(v.wa.helpdesk_controller.lastView=v.extend(v.wa.helpdesk_controller.lastView||{},{ids:t.request_ids,offset:t.ids_offset,count:t.count}))},initMenuAboveList:function(t,e){e=e&&!t.filters;var e=v("#hd-requests-header .h-header-above-requests").prepend(tmpl("h-requests-menu-template",Object.assign(t,{view:this.currentView}))).find("#h-requests-actions"),i=("split"!==this.currentView&&v("#hd-requests-header .h-header-block-top").append(e.detach()),e.removeClass("hidden"),v("#c-core-content #h-requests-actions"));const s=i.find(".js-bulk-toggle"),n=v(".js-topic-actions");s.on("click",function(t){t.preventDefault(),n.add(v(".js-topic-control")).toggleClass("hidden");var t=n.hasClass("hidden"),e=v("table.requests-table"),i=(e.toggleClass("is-bulk-select",!t),"click.helpdesk_selection_mode");e.find("tr").off(i).on(i,function(t){var e;return!!v(t.target).is(":checkbox")||(e=!(t=v(this).find(".checkboxes-col :checkbox")).prop("checked"),t.prop("checked",e).trigger("change"),!1)}),t&&((t=e.find("tr.selected")).length&&(t.find(".checkboxes-col :checkbox").prop("checked",!1).trigger("change"),t.removeClass("selected")),e.find("tr").off(i))}),v(document).off("close_bulk.helpdesk").on("close_bulk.helpdesk",function(){n.is(":visible")&&s.last().trigger("click")});var o=r().closest(".topmost-grid-wrapper");function a(){var t=o.find("td :checkbox:checked").length||0;i.find(".js-selected-count").removeClass("blue gray").addClass(0<t?"blue":"gray").text(t),0<t?i.find(".requests-operation").parent().removeClass("disabled"):i.find(".requests-operation").parent().addClass("disabled")}function r(){return v.wa.helpdesk_controller.currentGrid&&v.wa.helpdesk_controller.currentGrid.isActive()?v.wa.helpdesk_controller.currentGrid.getTable():v("<div></div>")}o.on("change","td :checkbox, th :checkbox, .h-header-above-requests",function(){setTimeout(a,0)}),a(),v("#h-requests-action-dropdown").waDropdown(),v("#h-requests-sort-dropdown").waDropdown(),i.on("click",".mass-mark-as-read,.mass-mark-as-unread,.mass-unmark-as-follow,.mass-mark-as-follow",function(){var t,e,i=v(this);return i.parents(".disabled").length||(v.wa.helpdesk_controller.showLoading(),e=t="",e=i.hasClass("mass-mark-as-unread")?(t="unread",1):i.hasClass("mass-mark-as-read")?(t="unread",""):i.hasClass("mass-mark-as-follow")?(t="follow",1):(t="follow",""),v.post("unread"===t?"?module=requests&action=unread":"?module=requests&action=follow",{status:e,ids:o.find("td :checkbox:checked").map(function(){return v(this).closest("tr").attr("rel")}).get()},function(e){var i=v.wa.helpdesk_controller.currentGrid;"unread"===t?v.wa.helpdesk_controller.updateUnreadCount(e.data.unread_count):v.wa.helpdesk_controller.updateFollowCount(e.data.follow_count),i&&i.isActive()&&i.reload(function(){var t;v.wa.helpdesk_controller.currentGrid&&v.wa.helpdesk_controller.currentGrid===i&&(v.wa.helpdesk_controller.hideLoading(),(t=v("#hd-requests-header")).find(".notice-above-requests-list").remove(),t.append(v.wa.helpdesk_controller.createClosableNotice(e.data.message,"success")))}),v(document).trigger("close_bulk.helpdesk")},"json")),!1}),i.on("click",".mass-change-status,.mass-change-assignment,.mass-delete-requests",function(){var t,e,i=v(this);return i.parents(".disabled").length||(t=!1,i.hasClass("mass-change-status")?t="state":i.hasClass("mass-change-assignment")?t="assignment":i.hasClass("mass-delete-requests")&&(t="delete"),t&&(v.wa.helpdesk_controller.showLoading(),v("#js-mass-action-sandbox").remove(),e=v('<script id="js-mass-action-sandbox" type="text/html"><\/script>').insertAfter(r()),v.get("?action=bulk",{action_type:t},function(t){v.wa.helpdesk_controller.hideLoading(),e.html(t)}))),!1})},createClosableNotice:function(t,e){var i=v(`<div class="notice-above-requests-list alert light ${e} flexbox space-4 custom-m-0 small"></div>`),e="success"===e?'<i class="fas fa-check-circle" />':"";return t&&("string"==typeof t?i.html(t):i.append(t),e&&i.prepend(v('<span class="custom-mr-8" />').append(e)),i.append('<a href="javascript:void(0)" class="alert-close"><i class="fas fa-times" /></a>').on("click",".alert-close",function(){i.remove()})),i},updateWorkflowErrors:function(t,e){var i,s;v('#wa-app .js-app-sidebar a[href^="#/settings/workflow/"] .error.indicator').remove(),t&&v.each(t,function(t,e){v('#wa-app .js-app-sidebar a[href="#/settings/workflow/'+e+'"] .no-autorestore').append('<span class="error badge indicator">!</span>')}),Array.isArray(e)&&e.length&&(i=[],v.each(e,function(t,e){i.push(e)}),v(".content:not(#s-core) > #hd-announcement").remove(),(s=v("#hd-announcement").empty()).size()||(s=v('<div id="hd-announcement" class="alert warning custom-m-16 custom-mb-0"></div>').prependTo("#s-core")),this.currentHash.includes("/split/")&&s.hide(),s.append(v('<a href="#" class="hd-announcement-close alert-close"><i class="fas fa-times"></i></a>').click(function(){s.remove(),v.post("?action=closeError")})),s.append(v("<div/>").text($_("Error delivering messages from:")+" "+i.join(", "))))},loadHTML:function(t,e,i,s){this.loadHTMLInto("#c-core-content",t,e,i,s)},loadHTMLInto:function(i,t,e,s,n){this.showLoading();var i=i||"#c-core-content",o=(e=e||null,Math.random());this.random=o,v.get(t,e,function(t){var e;v.wa.helpdesk_controller.random==o&&(i=v(i),v("body > .dialog:hidden:not(.persistent)").not(i.parents(".dialog")).remove(),i.trigger("helpdesk_before_load",[t]),s&&(t=s.call(v.wa.helpdesk_controller,t)||t),v.wa.helpdesk_controller.hideLoading(),i.html(t),v(window).scrollTop()&&v("html,body").animate({scrollTop:0},200),e="",(e=(e=i.find("h1:first .h-header-text").length?i.find("h1:first .h-header-text").text()||v("#wa-app .js-app-sidebar .selected:first").text()||_w("Helpdesk"):i.find("h1:first").text()||v("#wa-app .js-app-sidebar .selected:first").text()||_w("Helpdesk")).trim())&&v.wa.helpdesk_controller.setBrowserTitle(e),n&&n.call(v.wa.helpdesk_controller,i),i.trigger("helpdesk_after_load",[t]))})},showLoading:function(){this.waLoading.show(),this.waLoading.animate(1e4,95,!1)},progressLoading:function(t){t=t.loaded/t.total*100;this.waLoading.set(t)},hideLoading:function(){this.waLoading.done(),v(document).trigger("wa_loaded.helpdesk")},abortLoading:function(){this.waLoading.abort()},reloadSidebar:function(){return v.get("?module=backend&action=sidebar",null,function(t){var e=v("#wa-app .js-app-sidebar");e.css("height",e.height()+"px").html(t).css("height",""),v.wa.helpdesk_controller.highlightSidebar(),v.wa.helpdesk_controller.restoreSidebarCounts(),v.wa.helpdesk_controller.restoreCollapsibleStatusInSidebar(),v.wa.helpdesk_controller.bindToggleCollapseMenuSidebar(),v.wa.helpdesk_controller.hideLoading()})},bindToggleCollapseMenuSidebar:function(){v(".collapse-handler",v("#wa-app")).off("click").on("click",function(t){if(t.target.closest(".js-ignore-collapse"))return!0;v.wa.helpdesk_controller.collapseSidebarSection(this,"toggle")})},highlightSidebar:function(t){var e,i,s=this.cleanHash(t||location.hash),n=!1,o=2,a=!1,r=v("#wa-app .js-app-sidebar");r.find("li a, .brick").each(function(t,e){var i;if((e=v(e)).attr("href"))return(i=v.wa.helpdesk_controller.cleanHash(e.attr("href")))==s?(a=e,!1):void(i.length>o&&s.substr(0,i.length)===i&&(n=e,o=i.length))}),(a=!a&&n?n:a)?(r.find(".selected").removeClass("selected"),0<a.closest("ul.dropdown").length||(r=(a.is(".brick")?a:a.closest("li")).addClass("selected"),e="helpdesk/count/"+v.wa.helpdesk_controller.options.user_id+"/"+r.children("a").attr("href"),v.wa.helpdesk_controller.currentGrid?v.wa.helpdesk_controller.currentGrid.isActive()&&!r.hasClass("no-count")&&(i=v.wa.helpdesk_controller.currentGrid.getTotal(),v.storage.set(e,i),r=r.children("a"),this.updateItemCountSidebar(r,i)):v.storage.del(e))):!t&&this.lastView&&this.lastView.hash&&this.highlightSidebar(this.lastView.hash)},restoreSidebarCounts:function(){const i=this;v("#wa-app .js-app-sidebar").find("li a, .brick").each(function(){var t=v(this),e="helpdesk/count/"+v.wa.helpdesk_controller.options.user_id+"/"+t.attr("href"),e=v.storage.get(e);null===e||t.hasClass("no-count")||i.updateItemCountSidebar(t,e)})},updateItemCountSidebar:function(t,e){var i=t.find(".count");i.length?i.hasClass("no-autorestore")||i.text(e):t.append('<span class="count">'+e+"</span>")},makeLinksClickable:function(t){function o(t){for(var e=t.childNodes.length,i=0;i<e;++i){var s=t.childNodes[i];if(3==s.nodeType){var n=s.nodeValue;-1==n.indexOf("http://")&&-1==n.indexOf("https://")&&-1==n.indexOf("www.")||a.push(s)}else switch(s.nodeName.toLowerCase()){case"a":case"input":case"button":case"select":case"option":case"textarea":case"style":case"script":break;default:o(s)}}}var e={" ":!0,"\n":!0,"\t":!0,"\r":!0},i={".":e[v("<div/>").html("&nbsp;").text()]=!0,",":!0,":":!0,";":!0,"(":!0,")":!0},a=[];t instanceof v||(t=v(t||document.body));for(var s,n,r,l,h,c,d,u,p,f,g,m=0;m<t.length;m++)o(t[m]);for(m=0;m<a.length;m++){for(n=(s=a[m]).nodeValue,c=l=u=null,d=h=0;d<n.length;d++){if("http://"==n.substr(d,7))r="";else if("https://"==n.substr(d,8))r="";else{if("www."!=n.substr(d,4))continue;r="http://"}for(f=g=d;f<n.length&&!e[n.charAt(f)];)i[n.charAt(f)]||(g=f+1),++f;g=Math.min(n.length,g),"http://"===(p=n.substr(d,g-d))||"https://"===p||"www"===p?d=g:((u=v("<a></a>")).attr("href",r+p),u.text(p),u=u[0],l=l?(p=document.createTextNode(n.substr(h,d-h)),s.parentNode.insertBefore(p,c.nextSibling),p):(s.nodeValue=n.substr(0,d),s),s.parentNode.insertBefore(u,l.nextSibling),d=h=g,c=u)}u&&n.substr(g)&&s.parentNode.insertBefore(document.createTextNode(n.substr(g)),u.nextSibling)}},initWYSIWYG:function(t,e,i){e=v.extend({focus:!0,buttons:["format","bold","italic","underline","deleted","lists","link","image","horizontalrule"],plugins:["codeblock","faq"],minHeight:200,source:!1,uploadImage:!0,linkify:!1},e||{});t=v(t);return t.data("redactor")||(e.uploadImage&&(e=v.extend(e,{imageUpload:"?module=files&action=uploadimage&r=2",imageUploadFields:{_csrf:i}})),t.redactor(e)),t},initEditor:function(t,e){var i=v(t);return i.waEditor(v.extend({},e||{},{buttons:["format","bold","italic","underline","deleted","lists","link","image","horizontalrule"],plugins:["codeblock"],imageUpload:"?module=files&action=uploadimage&r=2",imageUploadFields:{_csrf:e._csrf||""},callbacks:{change:function(){i.closest("form").find(":submit").addClass("yellow")}}})),i.closest(".h-editor").find(".html,.wysiwyg").click(function(){v(window).resize()}),i},renderActionSettings:function(t,s,e){var n=(s=s||{}).url||"",i=s.are_you_sure||"",o=s.action_id||"",a=s.state_id||"",r=s.workflow_id||"",l=s.delete_this_action||"",h=s.save||"",c=void 0===s.confirm||s.confirm,d=(e=e||[],v("#h-action-settings").html('<form class="fields flexbox vertical space-8">'+t+"</form>")),t=(d.prepend(`<a href="javascript:void(0);" class="back flexbox middle space-8" id="hd-last-view">
                <span class="icon size-24"><i class="fas fa-arrow-circle-left"></i></span>
                <div class="h-paging-top-title text-gray">${$_("Back to workflow customizing page")}</div>
                <i class="spinner h-header-loading custom-mt-4" style="display:none;"></i>
            </a>`),v('<div class="bottombar h-fixed-bottombar sticky flexbox middle width-100 custom-px-12 custom-mt-16" />')),u=(i&&(i=t.html(i).text(),t.empty()),t.append(v('<button type="submit" class="button green" id="h-save-action">'+h+"</button>")),o&&t.append(v('<button type="button" class="light-gray small custom-ml-auto"><i class="fas fa-trash-alt text-red"></i> <span class="desktop-and-tablet-only">'+(l||"")+"</span></button>").click(function(){if(i&&"function"==typeof c&&!c(i))return!1;v.wa.helpers.createLoadingSubmit(v(this),{mr:0}).show(),v.post("?module=editor&action=delaction&workflow_id="+r+"&action_id="+o+"&state_id="+a,{},function(){v.wa.helpdesk_controller.redispatch()})})),v(".back",d).click(function(){v.wa.helpdesk_controller.redispatch()}),v("form",d)),p=t.find(":submit");v.each(e,function(t,e){var i=e.name,e=e.value,i=u.find(':input[name="'+i+'"]');i.length&&(i.is(":checkbox")?i.prop("checked",!0):i.is(":radio")?(i=i.filter('[value="'+e+'"]')).prop("checked",!0):i.is("select")?i.find('option[value="'+e+'"]').prop("selected",!0):i.is("input")&&i.val(e),i.trigger("change"))}),u.append(t).submit(function(){var e=u.serializeArray();const i=v.wa.helpers.createLoadingSubmit(p).show();return u.find("input, select, textarea").trigger("beforesubmit"),v.post(n,u.serialize(),function(t){d.removeClass("modified"),p.removeClass("yellow").addClass("green"),i.hide(),v('<span><i class="fas fa-check-circle text-green"></i> '+$_("Saved")+"</span>").animate({opacity:0},1e3,function(){v(this).remove()}).insertAfter(p),"ok"===(t=String(t).trim())?v.wa.helpdesk_controller.redispatch():t&&v.wa.helpdesk_controller.renderActionSettings(t,v.extend({},s,{confirm:!1}),e)}),!1}),setTimeout(function(){d.on("change","input,textarea,select",function(){p.hasClass("green")&&(d.addClass("modified"),p.removeClass("green").addClass("yellow"))}),d.on("keyup","input:text,textarea",function(){p.hasClass("green")&&(d.addClass("modified"),p.removeClass("green").addClass("yellow"))})},0),c&&v.wa.helpdesk_controller.confirmLeave(function(){return v("#h-action-settings").hasClass("modified")},$_("Unsaved changes will be lost if you leave this page now."),$_("Are you sure?"),function(){return!v("#h-action-settings").length},"h-action-settings")},showActionSettings:function(e,i,s,t,n,o,a,r,l){v("#c-core-content").children().wrapAll('<div id="h-content-above-action-settings"></div>'),v("#c-core-content").append('<div class="height-100 not-blank"><div class="article"><div id="h-action-settings" class="article-body"></div></div></div>'),v("#h-content-above-action-settings").hide();const h=v.Deferred();var c="?module=editor&action=action&wid="+e+"&action_id="+s+"&state_id="+i+"&action_class="+t;return v.get(c,function(t){v.wa.helpdesk_controller.renderActionSettings(t,{url:c,are_you_sure:l,action_id:s,save:n,state_id:i,workflow_id:e,delete_this_action:r}),h.resolve()}),h.promise()},initAttachments:function(n,t){if(!n||!t)throw new Error("init files wrapper");n=(n="string"==typeof n?v(n):n).append('<div class="h-attachments" />').children();const o=()=>{n.append(`<div class="h-attach"><div class="upload">
                    <label class="link">
                        <i class="fas fa-file-upload"></i>
                        <span>${$_("Attach file")}</span>
                        <input name="${t}" type="file" autocomplete="off">
                    </label>
                </div></div>`),queueMicrotask(()=>{const i=n.find(".h-attach:last-child");i.waUpload({is_uploadbox:!0});let s;i.on("change drop",s=function(t){const e=v(this);"drop"===t.type&&(i.find(":file")[0].files=t.originalEvent.dataTransfer.files),i.find("label.link").hide().end().find(".filename").removeClass("hint").append(`<a href="javascript:void(0)" class="remove-attach back custom-ml-8" title="${$_("remove")}"><i class="icon middle fas fa-times-circle" /></a>`),i.find("a.remove-attach").off("click").on("click",function(){return e.closest(".h-attach").off("change drop",s).remove(),!1}),e.index()===n.find(".h-attach").length-1&&o()})})};o()},insertAtCursor:function(t,e){var i,s;document.selection?(t.focus(),document.selection.createRange().text=e):t.selectionStart||"0"==t.selectionStart?(i=t.selectionStart,s=t.selectionEnd,t.value=t.value.substring(0,i)+e+t.value.substring(s,t.value.length),t.selectionStart=i+e.length,t.selectionEnd=i+e.length):t.value+=e},confirmLeave:function(i,s,n,o,t){var a,r=v(window),l=(""+Math.random()).slice(2);return t&&(l=t),this.confirmLeaveStop(l),r.on("beforeunload."+l,function(t){if("function"!=typeof o||!o())return i()?s:void 0;v.wa.helpdesk_controller.confirmLeaveStop(l)}),r.on("wa_before_dispatched."+l,a=function(t){var e;"function"==typeof o&&o()?v.wa.helpdesk_controller.confirmLeaveStop(l):i()?(t.preventDefault(),e=v.wa.helpdesk_controller.getHash(),v.waDialog.confirm({title:s,text:n,success_button_title:$_("Leave"),success_button_class:"danger",cancel_button_title:$_("Cancel"),cancel_button_class:"light-gray",onSuccess(){v.wa.helpdesk_controller.confirmLeaveStop(l),window.location.hash===e?v.wa.helpdesk_controller.redispatch():v.wa.setHash(e)}})):r.off("wa_before_dispatched",a)}),l},confirmLeaveStop:function(t){v(window).off("."+t)},getHash:function(){return this.cleanHash()},cleanHash:function(t){for((t=void 0===t?window.location.hash.toString():t).length||(t=""+t);0<t.length&&"/"===t[t.length-1];)t=t.substr(0,t.length-1);if("#"!=(t+="/")[0]?t="#"+(t="/"!=t[0]?"/"+t:t):t[1]&&"/"!=t[1]&&(t="#/"+t.substr(1)),"#/"==t)return"";try{t=decodeURIComponent(t)}catch(t){}return t}},v.wa.helpdesk_controller._loadGrid=v.wa.helpdesk_controller.loadGrid,v.wa.helpdesk_controller._requestsAllAction=v.wa.helpdesk_controller.requestsAllAction,v.wa.helpdesk_controller._requestsSearchAction=v.wa.helpdesk_controller.requestsSearchAction}(jQuery),$.wa.Grid=function(t){"use strict";var l,d,u,p,n=(t=t||{}).hash||[],o=t.url||"?module=requests&action=list",h=t.filters||"",a=t.is_search||!1,r=t.header||"",b=t.paginator_type||"page",c=(this.load=function(e){var i=this.getSettings(),s=this;$.post(o,{order:i.order,limit:i.limit,offset:i.offset,list_view:i.view,is_search:a?1:0,filters:f(h),header:r},function(t){t=t.data,l=t.mark,d=t.count,u=t.requests,h=t.filters||h,p=null,$.wa.helpdesk_controller.listResultEvent(t),e&&"function"==typeof e&&e.call($.wa.helpdesk_controller,t),$(".js-select-all-checkbox").unbind("change").bind("change",function(){$(this).is(":checked")?($(".requests-table td :checkbox").prop("checked",!0),$(".requests-table tr").addClass("selected")):($(".requests-table td :checkbox").prop("checked",!1),$(".requests-table tr").removeClass("selected")),$(this).prop("indeterminate",!1)}),$(".js-select-all-item").unbind("click").bind("click",function(t){if($(t.target).is(":checkbox"))return!0;var t=$(this).find(":checkbox"),e=t.prop("checked");t.prop("checked",t.prop("indeterminate")?e:!e).trigger("change")}),$(".h-sorting-menu").find(".h-sort-link").unbind("click").bind("click",function(){var t=Math.ceil(parseInt(s.getSettings().offset)/parseInt(s.getSettings().limit))+1;$.wa.setHash(s.getPagingHash(t,void 0,$(this).data("order")))}),$(".h-sorting-menu").find(".h-sort-link").each(function(){if($(this).data("order")===i.order)return $(".h-sorting-menu .h-choose-sorting").html($(this).html()),!1})},"json")},this.reload=function(i){var s;return!!this.isActive()&&(s=p,this.load(t=>{var e;s.closest("html").length&&(e=this.getTable(),$("#hd-support-content").empty().append(e),$(".h-header-above-requests").change(),i)&&"function"==typeof i&&i.call($.wa.helpdesk_controller,t)}),!0)},this.getSettings=function(){var t=n[1],e=((!t||t<=0)&&(t=parseInt($.storage.get("helpdesk/grid/limit"),10)||30),$.storage.set("helpdesk/grid/limit",t),n[2]||$.storage.get("helpdesk/grid/order")||"id"),i=($.storage.set("helpdesk/grid/order",e),n[3]||$.storage.get("helpdesk/grid/view")||"list"),s=(!{list:1,table:1,split:1}[i]&&(i="list"),$.storage.set("helpdesk/grid/view",i),n[4]||0);return{view:i,order:e,offset:n[0]&&0<=n[0]?n[0]:0,limit:t,request:s}}),f=(this.getTable=function(t){if(!p&&!t){var n=this;if(!u)throw new Error("$.wa.Grid.getTable() can not be called before load()");p=$('<div class="support-content-inner"></div>');var e=n.getSettings(),t=Math.ceil(parseInt(e.offset)/parseInt(e.limit))+1,i=$("#hd-requests-header"),s=()=>!!i.find(".h-header-above-requests").length,o=s()?i.find(".h-header-above-requests"):$('<div class="js-mobile-hide-with-sidebar h-header-above-requests" id="list-views-toggle"><div class="h-list-views toggle small js-topic-control" /></div>');if(o.find(".h-list-views").empty().append($.parseHTML('<a rel="list"'+("list"==e.view?' class="selected"':"")+' href="'+this.getPagingHash(t,void 0,void 0,"list")+'"><i class="fas fa-th-list view-thumb-list"></i></a><a rel="list"'+("split"==e.view?' class="selected"':"")+' href="'+this.getPagingHash(t,void 0,void 0,"split")+'"><i class="fas fa-columns view-splitview"></i></a><a rel="table"'+("table"==e.view?' class="selected"':"")+' href="'+this.getPagingHash(t,void 0,void 0,"table")+'"><i class="fas fa-list view-table"></i></a>')),"split"!==e.view&&i.addClass("h-fixed"),s()||i.find(".h-header-block").append(o),0==d)return p.append($(`
                    <div class="flexbox gray height-75 justify-content-center middle space-8 vertical">
                        <div class="icon size-96 text-light-gray"><i class="far fa-life-ring"></i></div>
                        <div>${$_("No requests.")}</div>
                    </div>
                `));var a=null,a="table"===e.view?$('<table class="requests-table full-width view-'+e.view+'"><thead></thead><tbody></tbody></table>'):"split"===e.view?$(`<div class="flexbox">
                        <div class="sidebar width-adaptive-widest blank width-100-mobile" id="h-request-sidebar" data-mobile-sidebar="init" style="overflow:auto;">
                            <table class="requests-table full-width view-${e.view} break-word">
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="content not-blank" id="h-request-content" data-mobile-content=""></div>
                    </div>`):$('<table class="requests-table full-width bottom-bordered view-'+e.view+'"><tbody></tbody></table>');"table"===e.view&&(a.addClass("single-lined"),a.find("thead").prepend(`<tr class="nowrap uppercase small">
                    <th></th>
                    <th>${$_("Status")}</th>
                    <th></th>
                    <th>${$_("ID")}</th>
                    <th>${$_("Subject and text")}</th>
                    <th>${$_("Time has passed")}</th>
                    <th>${$_("Created")}</th>
                    <th>${$_("From")}</th>
                    <th>${$_("Assigned")}</th>
                </tr>`));for(var r=u,l=a.find("tbody"),h=0;h<r.length;h++)l.append(g(r[h],e));a.on("change","td :checkbox",function(){var t=$(this),e=$(".js-select-all-checkbox"),i=a.find(`${a.is(":not(table)")?".requests-table ":""}td :checkbox`),s=i.filter(":checked").length;0<s?s===i.length?e.prop({checked:!0,indeterminate:!1}):e.prop({checked:!1,indeterminate:!0}):e.prop({checked:!1,indeterminate:!1}),t.is(":checked")?t.closest("tr").addClass("selected"):(t.closest("tr").removeClass("selected"),a.find("th :checkbox").prop("checked",!1))}),p.toggleClass("table-scrollable-x","split"!==e.view).append(a);var s=this.getPaging(d,!0,!0,"split"===e.view),o=("split"===e.view&&0<d?s.css({"padding-bottom":"10rem"}).appendTo(p.find("#h-request-sidebar")):p.append(s),p.find('[data-order="'+e.order.replace("!","")+'"]')),s=(o.length&&(o.children("a").append($('<i class="icon16"></i>')),"!"===e.order[0]?(o.find("i.icon16").addClass("darr"),o.children("a").attr("href",this.getPagingHash(t,void 0,e.order.substring(1)))):o.find("i.icon16").addClass("uarr")),u=null,new $.Event("helpdesk.list.element"));s.list_element=p,"split"===e.view&&((t=p.find("#h-request-sidebar")).prepend(i.detach()),!e.request&&r.length&&(o=r[0]["id"],o&&$.wa.setHash(location.hash.replace(new RegExp("/split/\\w+"),"/split/"+o)),e.request=o),e.request)&&(this.loadRequestInSplit(e.request),t.on("click","td",function(t){var e,i=$(this),s=$(t.target);s.is(":checkbox")||(i=i.find("a[data-request-id]").data("requestId"),i=i,e=n.getSettings(),location.hash=$.wa.helpdesk_controller.hashBase+e.offset+"/"+e.limit+"/"+e.order+"/"+e.view+"/"+i,$.wa.helpdesk_controller.stopDispatch(1),n.changeIdInSplit(i),n.loadRequestInSplit(i),s.is("a")&&t.preventDefault())})),$(document).trigger(s)}const c=this;return setTimeout(()=>{$("#records-per-page").off("change").on("change",function(){c.isActive()&&$.wa.setHash(($.wa.helpdesk_controller.hashBase||"#/")+$(this).val())}),$(document).trigger("wa_content_sidebar_loaded.helpdesk")}),p},this.loadRequestInSplit=function(e){$.wa.helpdesk_controller.showLoading();var i=p.find("#h-request-content"),s=p.find("#h-request-sidebar");0<(e=parseInt(e))&&(i.html(`
            <div class="skeleton">
            <div class="article wide">
            <div class="article-body custom-py-20">
                <div class="content flexbox">
                    <div class="width-100">
                        <div class="flexbox middle">
                            <span class="button custom-mr-16 light-gray" style="width: 120px;height:32px;"></span>
                            <span class="skeleton-line custom-mb-0" style="width:42px;height:20px;"></span>
                        </div>

                        <div class="flexbox middle custom-mt-32">
                            <span class="skeleton-line custom-mb-8" style="width:70%;height:32px;"></span>
                        </div>

                        <span class="skeleton-list custom-m-0 custom-ml-40 custom-mt-16" style="height: 18px; width: 42%;"></span>
                        <span class="skeleton-line custom-mb-8 custom-mt-16" style="width:70%;height:56px;"></span>

                        <span class="skeleton-list custom-m-0 custom-ml-40 custom-mt-16" style="height: 14px; width: 42%;"></span>
                        <span class="skeleton-list custom-m-0 custom-ml-40 custom-mt-16" style="height: 14px; width: 30%;"></span>

                        <div class="flexbox vertical space-8 custom-ml-4 custom-mt-32">
                            <span class="skeleton-line custom-mb-8" style="width:50%;height:12px;"></span>
                            <span class="skeleton-line custom-mb-8" style="width:50%;height:12px;"></span>
                            <span class="skeleton-line custom-mb-8" style="width:50%;height:12px;"></span>
                        </div>

                        <div class="flexbox wrap custom-mt-32">
                            <span class="button custom-mr-16 custom-mt-8 rounded light-gray" style="width: 120px;height: 32px;"></span>
                            <span class="button custom-mr-16 custom-mt-8 rounded light-gray" style="width: 120px;height: 32px;"></span>
                            <span class="button custom-mr-16 custom-mt-8 rounded light-gray" style="width: 100px;height: 32px;"></span>
                        </div>
                        <span class="skeleton-line custom-mt-20" style="height: 1px;"></span>

                        <div class="box flexbox vertical custom-mt-32">
                            <span class="skeleton-custom-box" style="height: 70px; margin-bottom: 2rem;border-radius: 1rem;"></span>
                            <span class="skeleton-custom-box" style="height: 74px; margin-bottom: 2rem;border-radius: 1rem;"></span>
                            <span class="skeleton-custom-box" style="height: 94px; margin-bottom: 2rem;border-radius: 1rem;"></span>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>
            `),$.get("?module=requests&action=info&id="+e,function(t){$(window).scrollTop(0,200),s.find('[rel="'+e+'"]').addClass("selected2").siblings().removeClass("selected2"),i.empty().html(t);t=$("#hd-announcement");t.length&&i.prepend(t.detach().show()),i.find(".js-mobile-back").removeClass("hidden"),$.wa.helpdesk_controller.hideLoading(),$(document).trigger("wa_loaded.helpdesk")}))},this.getPaging=function(t,e,i,s){var n=$('<div class="hd-paging"></div>'),o=this.getSettings();if(i){var a,r,l="",h=[30,50,100,200,500];if(h[0]<t){for(var c=0;c<h.length;c++)a=h[c],r=Math.floor(o.offset/a)+1,l+='<option value="'+this.getPagingHash(r,a)+'"'+(o.limit==h[c]?' selected="selected"':"")+">"+h[c]+"</option>";n.append('<div class="hd-page-num small">'+$_("Show %s records on a page").replace("%s",'<select id="records-per-page">'+l+"</select>")+"</div>")}}var i="page"===b&&!s,d=Math.ceil(t/parseInt(o.limit)),u=Math.ceil(parseInt(o.offset)/parseInt(o.limit))+1,p='<ul class="'+(i?"paging":"hd-pages list")+'">',f="javascript:void(0)",g="opacity-0 pointer-events-none",m=1<u;if((m||s)&&(p+=`<li><a href="${m?this.getPagingHash(u-1):f}" class="prevnext ${i?"":"button nobutton small rounded"} custom-mr-0 ${m?"":g}">
                ${i?"":'<i class="fas fa-caret-left icon middle"></i> '+$_("prev")}
            </a></li>`),1<d)if(i)for(var v=0,c=1;c<=d;c++)Math.abs(u-c)<3||c<5||d-c<3?(p+="<li"+(c==u?' class="selected"':"")+'><a href="'+this.getPagingHash(c)+'">'+c+"</a></li>",v=0):v++<3&&(p+=".");else p=(p+=`<li class="small">${parseInt(o.offset,10)+1} &mdash; ${Math.min(t,parseInt(o.offset,10)+parseInt(o.limit,10))}</li>`)+`<li class="small">${$_("of")} ${t}</li>`;else"page"!==b&&0<d&&(p=(p+=`<li class="small">${Math.min(parseInt(o.offset,10)+1,t)} &mdash; ${Math.min(t,parseInt(o.offset,10)+parseInt(o.limit,10))}</li>`)+`<li class="small">${$_("of")} ${t}</li>`);m=u<d;return(m||s)&&(p+=`<li><a href="${m?this.getPagingHash(u+1):f}" class="prevnext ${i?"":"button nobutton small rounded"} ${m?"":g}">
                ${i?"":$_("next")+' <i class="fas fa-caret-right icon middle"></i>'}
            </a></li>`),n.prepend(p+="</ul>"),n},this.getPagingHash=function(t,e,i,s){var n=this.getSettings();return e=e||n.limit,i=i||n.order,s=s||n.view,encodeURI($.wa.helpdesk_controller.hashBase)+(t-1)*e+"/"+e+"/"+i+"/"+s+"/"},this.update=function(a,r){var t;return!(!this.isActive()||0<(this.getSettings().offset||0)||(t=this.getSettings(),$.post(o,{filters:f(h,!0),list_view:t.view,background_process:1},function(t){t=t.data,l=t.mark,$.wa.helpdesk_controller.listResultEvent(t);for(var e,i,s=p.find("table"),n=s.find("tbody"),o=0;o<t.requests.length;o++)i=!1,0<(e=s.find('tr[rel="'+t.requests[o].id+'"]')).size()&&(i=e.hasClass("selected"),e.remove()),t.requests[o].remove||(e=r?g(t.requests[o]).appendTo(n):g(t.requests[o]).prependTo(n),i&&e.addClass("selected"));$.wa.helpdesk_controller.highlightSidebar(),a&&"function"==typeof a&&a.call($.wa.helpdesk_controller,t),p.trigger("wa-grid-updated")},"json"),0))},this.isActive=function(){if(!p)return!1;for(var t=p;(t=t.parent()).length&&t[0]!==document;);return!!t.length||(p=null,!1)},this.deactivate=function(){return p=null,this},this.remove=function(){return p&&(p.remove(),p=null),this},this.getTotal=function(){return d},this.changeIdInSplit=function(t){n[4]=t},function(t,e){if((t=t||h)instanceof Array){var i,s=[];for(i in t)if(t.hasOwnProperty(i)){var n=t[i].param;if(n instanceof Array){for(var o=0;o<n.length;o++)n[o]=v(n[o]);s.push(t[i].name+(t[i].op||":")+n.join(":"))}else s.push(t[i].name+(t[i].op||":")+v(n))}t=s.join("&")}return e?(t?t+"&":"")+"mark:"+v(l):t}),g=(this.compileFilters=f,function(s,t){var e,i,n,o=(t,e)=>t?t.length>e?String(t).slice(0,e)+"...":t:"",a=t=>{var e=s.state,i=e?`<div class="state-wrapper"><span class="state-name badge"
                        style="${String(s.list_row_css).trim()?s.list_row_css.replace("color:","background:"):"background:var(--light-gray);font-style:italic;"}"
                        title="${e}"><span>${e}</span>
                    </span>`:"";return t&&(i+=t),e&&(i+="</div>"),i},r=()=>{var t='<span class="indicators-list">';return 1===s.priority&&(t+='<i class="fas fa-exclamation-triangle text-red"></i> '),s.is_presale&&(t+='<i class="fas fa-wallet text-green"></i> '),s.is_unread&&(t+='<i class="fas fa-dot-circle text-orange"></i>'),s.type_is_requred&&(t+=`<i class="fas fa-exclamation-circle text-gray fa-sm" title="${$_("Request type must be specified")}"></i>`),t+="</span>"},l=()=>s.source_class?`<span class="userstatus ${s.source_bg}" title="${s.source_name}">
                        <i class="${s.source_class}"></i>
                    </span>`:"";return"table"===(t=t||c()).view?((e=$("<tr"+(s.is_unread?' class="unread"':"")+' rel="'+s.id+'"><td class="checkboxes-col min-width"><input type="checkbox"></td><td class="state-col min-width">'+a()+'</td><td class="indicators-col min-width">'+r()+'</td><td class="id-col min-width"><span class="request-id">'+m(s.id)+'</span></td><td class="summary-col"><div><span class="h-summary">'+s.summary+"</span>"+(s.text_clean?' <span class="h-summary-text small"></span>':"")+'<i class="shortener"></i></div></td><td class="age-col nowrap">'+s.age+'</td><td class="upd-col nowrap">'+s.upd_formatted+'</td><td class="client-col"><div>'+s.client_name+'<i class="shortener"></i></div></td><td class="assigned-col nowrap"><div>'+(s.assigned_name||'<span class="gray">'+$_("No assigned")+"</span>")+'<i class="shortener"></i></div></td></tr>')).find(".h-summary-text").html(s.text_clean),e.children(":not(.checkboxes-col)").each(function(){var t=$(this),e=$('<a href="#/request/'+s.id+'/" style="color:inherit"></a>').html(t.html()).attr("title",t.text());t.empty().append(e)}),n=e.find(".h-summary-text").html()||"",i=e.find(".h-summary").html()||"",200<n.length+i.length&&(n=n.slice(0,0<200-i.length?200-i.length:0),e.find(".h-summary-text").html(n+"..."))):"split"===t.view?e=$("<tr"+(s.is_unread?' class="unread"':"")+' rel="'+s.id+'"><td class="checkboxes-col"><input type="checkbox"></td>'+`<td class="avatar-col">
                            <a class="userpic userpic48" data-request-id="${s.id}" href="#/request/${s.id}/" class="request-summary">
                                <img src="${s.client_photo_url||"../../wa-content/img/userpic50.jpg"}" width="50" height="50">
                                ${l()}
                            </a>
                        </td>`+'<td class="description-col">'+`<div class="description-top">${a(r())} <div class="workflow-name text-ellipsis" title="${s.workflow}">${s.workflow}</div></div>`+`<div><a data-request-id="${s.id}" href="#/request/${s.id}/" class="request-summary">${s.summary}</a></div>`+`<div class="description-text text-clean small" title="${String(s.text_clean)}"><div class="text-ellipsis">${o(String(s.text_clean),64)}</div></div>`+`<div class="description-bottom">
                                <span class="client-name small text-ellipsis" title="${m(s.id)} ${s.client_name.replace(new RegExp("<\\/?strong>","g"),"")}"><span class="semibold custom-mr-8">${m(s.id)}</span>${s.client_name}</span>
                                <div class="datetime-formatted hint text-ellipsis" title="${s.dt_formatted}">${s.age}</div>
                             </div>`+"</td></tr>"):((e=$("<tr"+(s.is_unread?' class="unread"':"")+' rel="'+s.id+'"><td class="checkboxes-col"><input type="checkbox"></td>'+`<td class="avatar-col">
                        <a href="#/request/${s.id}/" class="userpic userpic48" data-request-id="${s.id}" class="request-summary">
                            <img src="${s.client_photo_url||"../../wa-content/img/userpic50.jpg"}" width="50" height="50">
                            ${l()}
                        </a>
                    </td>`+'<td class="description-col">'+`<div class="description-top">
                            ${a(r())}<a href="#/request/${s.id}/" class="request-summary">${s.summary}</a>
                        </div>`+`<div class="description-text text-clean" title="${s.text_clean}">${s.text_clean?'<div class="h-summary-text text-ellipsis"></div>':""}</div>`+'<div class="description-bottom"><span class="client-name"><span class="request-id semibold"> '+m(s.id)+"</span> "+s.client_name+'</span> <span class="age hint custom-ml-4">'+s.age+" "+$_("ago")+'</span> </div></td><td class="info-col">'+`<div class="first-row assigned-header text-ellipsis"><span class="source" title="${$_("Workflow")}: ${s.workflow}"> ${s.workflow}</span></div>`+'<div class="second-row">'+(0==+s.assigned_contact_id?`<span class="hint text-ellipsis">${$_("No assigned")}</span>`:`<span class="assigned-name text-ellipsis">${s.assigned_name}</span>`)+'</div><div class="third-row">'+(0<s.last_log_id?'<span class="performs-action text-ellipsis">'+s.time_since_update+" "+$_("ago")+'</span> <span class="hidden performs-action-text">'+s.actor_name+" "+s.last_action_performs_string+"</span>":'<span class="no-actions-yet hint text-ellipsis">'+$_("No actions with this request.")+"</span>")+"</div></td></tr>")).find(".assigned-name").attr("title",$_("Assigned:")+" "+e.find(".assigned-name").text()),e.find(".performs-action").attr("title",$_("Last action")+" "+e.find(".performs-action-text").text()),e.find(".h-summary-text").html(s.text_clean),n=e.find(".h-summary-text").html()||"",e.find(".h-summary-text").html(o(n,200))),e}),m=function(t){return"#%s".replace("%s",t)},v=function(t){return(""+t).replace(/`/g,"``").replace(/\&/g,"`&").replace(/:/g,"`:").replace(/>=/g,"`>=").replace(/<=/g,"`<=")}},!function(o){"use strict";o.wa.helpdesk_history={data:null,updateHistory:function(t){o.wa.helpdesk_controller.cleanHash(location.hash),this.data=t;for(var e,i=o("#hd-search-history").empty(),s=0;s<t.length;s++){var n=t[s];n.hash=o.wa.helpdesk_controller.cleanHash(n.hash),(e=o('<li rel="'+n.id+'">'+(0<=n.cnt?'<span class="count">'+n.cnt+"</span>":"")+'<a href="'+n.hash+'"></a></li>')).children("a").prepend(o("<span />").text(n.name)),i.append(e)}0<t.length&&((e=o('<li rel="'+n.id+'"><a href="javascript:void(0)" class="small text-gray"></a></li>')).children("a").text($_("Clear")).prepend('<i class="fas fa-times-circle"></i>').on("click",function(){o.wa.helpdesk_history.clear("search")}),i.append(e)),o.wa.helpdesk_history.updateVisibility(),o.wa.helpdesk_controller.highlightSidebar(),o.wa.helpdesk_controller.restoreSidebarCounts()},clear:function(t){return t=t&&"search"!=t?t&&"creation"==t?"&ctype[]=import&ctype[]=add":"":"&ctype="+t,o("#hd-search-history").empty(),o.wa.helpdesk_history.updateVisibility(),o.get("?action=history&clear=1"+t),!1},updateVisibility:function(){var t=o("#hd-search-history"),e=o("#hd-search-history-link");t.parent().hide(),t.children().length?e.show():e.hide()}}}(jQuery),!function(r){"use strict";r.wa.helpers={vars:{change_color_class:"yellow"},createLoadingSubmit(t,e){e=e||{},e=Object.assign({mr:4,timeoutDelay:0},e);const i=r(`<span class="icon size-16 custom-mr-${e.mr} js-loading"><i class="fas fa-spinner wa-animation-spin" /></span>`),s=t.find("> .icon:not(.js-loading), > svg"),n=t.prop("tagName");return{show:function(){return s.length&&s.hide(),"BUTTON"!==n&&"A"!==n||t.prepend(i),"INPUT"===n&&i.insertAfter(t),"BUTTON"!==n&&"INPUT"!==n||t.prop("disabled",!0),this},hide:function(){return setTimeout(()=>{t.removeAttr("disabled"),i.remove(),s.length&&s.show()},e.timeoutDelay),this}}},createChangingSubmit(t){const e=r.wa.helpers.vars.change_color_class;return{change:function(){t.prop("disabled")||t.addClass(e)},reset:function(){t.removeClass(e)}}},watchChangeForm(t,e=null){if(!t||!t.length)return;const i=r.wa.helpers.vars.change_color_class,s=e||t.find(":submit"),n=()=>{s.length&&!s.prop("disabled")&&s.addClass(i)},o=()=>{s.removeClass(i),a()},a=()=>{t.data("changeform",{change:n,reset:o}),t.one("change input",()=>{n()})};return a(),{change:n,reset:o}},onChangeInput(t,e){var i=t.val(),s=(t.on("change",function(){e.call(t)}),null);t.on("input",function(){s||i!==t.val()&&(i=t.val(),e.call(t)),clearTimeout(s),s=setTimeout(function(){s=null},1e3)})},cancelSortable(t){r(t.item).swap(t.oldIndex)},loadSortableJS(){const t=r.Deferred(),e=r("#wa-header-js"),i=e.attr("src").replace(/wa-content\/js\/jquery-wa\/wa.header.js.*$/,"");return["wa-content/js/sortable/sortable.min.js","wa-content/js/sortable/jquery-sortable.min.js"].reduce((t,e)=>t.then(()=>r.ajax({cache:!0,dataType:"script",url:i+e})),r.Deferred().resolve()).done(()=>{t.resolve()}),t.promise()},scrollToElement(t,e=80){t=("object"==typeof t&&t.length?t[0]:r(t)).getBoundingClientRect().top+window.scrollY-e;window.scrollTo({top:t,behavior:"smooth"})},getPlatform(){return(navigator.userAgentData||navigator).platform},isMacintosh(){return-1<this.getPlatform().indexOf("Mac")},isWindows(){return-1<this.getPlatform().indexOf("Win")}}}(jQuery),!function(a){a.sidebar={sidebar:null,options:{},init:function(t){this.options=t||{},this.sidebar=a("#wa").find(".js-app-sidebar:first"),this.$window=a(window),this.$skeleton=this.sidebar.find(".js-helpdesk-sidebar-skeleton"),this.$sidebarBody=this.sidebar.find(".js-helpdesk-sidebar-body"),this.loadedEvent=a.Event("wa_sidebar_loaded"),this.helpdeskLoadedEvent=a.Event("wa_sidebar_helpdesk_loaded"),this.helpdeskUnLoadedEvent=a.Event("wa_sidebar_helpdesk_unloaded"),this.bindEvents(),this.$window.trigger(this.loadedEvent)},bindEvents:function(){this.$window.on("wa_sidebar_loaded.helpdesk",()=>{this.initMobileSidebar(),this.initMobileSidebarToggle()}),this.$window.on("resize.helpdesk",()=>{this.initMobileSidebar(),this.initMobileSidebarToggle()}),this.$window.on("wa_loaded.helpdesk",a.proxy(this.removeSkeleton,this)),this.sidebar.on("click.helpdesk",".menu li a, .js-mobile-collapse-sidebar, .bricks a",a.proxy(this.slideUpSidebar,this)),this.$window.on("wa_loaded.helpdesk",a.proxy(this.removeSkeleton,this))},initMobileSidebar:function(){768<this.$window.width()?this.sidebarData&&(this.sidebar.removeData("sidebar"),this.sidebarData.unbindEvents(),delete this.sidebarData):this.sidebarData||(this.sidebar.waShowSidebar(),this.sidebarData=this.sidebar.data("sidebar"))},slideUpSidebar:function(){this.sidebarData&&(this.sidebarData.$sidebar_content.slideUp(200),this.sidebarData.is_open=!1)},initMobileSidebarToggle:function(){const e="mobile-sidebar",i=`[data-${e}]`,s="[data-mobile-content]",n="--mobile-friendly";if(760<this.$window.width())a(i).addClass(n).show(),a(s).show();else{const o=()=>{a(s).show(),a(i).add(a(".js-mobile-hide-with-sidebar")).addClass("desktop-and-tablet-only")};a(document).off("wa_content_sidebar_loaded.helpdesk").on("wa_content_sidebar_loaded.helpdesk",function(){var t=a(i);t.length&&"init"===t.data(e)&&(t.removeClass(n),a(s).hide())}).off("click.wa_content_sidebar_mobile_back").on("click.wa_content_sidebar_mobile_back",".js-mobile-back",function(t){t.preventDefault(),a(s).hide(),a(i).add(a(".js-mobile-hide-with-sidebar")).removeClass("desktop-and-tablet-only")}).off("click.wa_content_sidebar_show_content").on("click.wa_content_sidebar_show_content",`${i} a, ${i} tr`,function(){var t=a(this);if(t.closest(".js-mobile-not-hide-sidebar").length)return!0;let e=t.attr("href");if(!(e="TR"===t.prop("tagName")?t.find("a:first").attr("href"):e))return!0;window.location.hash.includes(e)?o():a(document).one("wa_loaded.helpdesk",o)}).off("show_mobile_content.helpdesk").on("show_mobile_content.helpdesk",o)}},removeSkeleton:function(){this.$sidebarBody.removeClass("hidden"),this.$skeleton.addClass("hidden")},unbindEvents:function(){this.sidebar.off(".helpdesk"),this.$window.off(".helpdesk"),this.sidebar.removeData("sidebar"),delete this.sidebarData}}}(jQuery);
//# sourceMappingURL=helpdesk.min.js.map
